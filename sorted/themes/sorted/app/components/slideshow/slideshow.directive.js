!function(){"use strict";angular.module("sorted").directive("slideshow",["$window","$interval","siteConfig",function(e,n,t){return{restrict:"A",scope:!0,link:function(t,i,s){function o(){return angular.element("[slideshow-item]").length}t.currentIndex=0,t.animating=!1,i.addClass("slideshow-outer");var l;i.find("[slideshow-mask]").addClass("slideshow-mask");var a=i.find("[slideshow-items]");a.addClass("slideshow-items");var d,r=0,c=0;t.animating=!1;t.unlockAnimation=function(){t.animating=!1},t.dotsClick=function(e){n.cancel(l),l=n(t.moveSlide,s.slideshowDelay);var i=parseInt(angular.element(e.currentTarget).attr("slideshow-index"));t.animating=!0,t.currentIndex=i,t.$digest();var o={left:"-"+c*i+"px",onComplete:t.unlockAnimation};TweenMax.to(a,1,o)},t.windowResize=function(){t.setWidths(),TweenMax.killAll(),a.css({left:"-"+c*t.currentIndex+"px"}),t.unlockAnimation()},t.configureDots=function(e){return e===t.currentIndex?"fa-circle font-orange":"fa-circle font-grey-light"},t.setWidths=function(){return c=i.find("[slideshow-mask]").width(),i.find("[slideshow-items]").width(c*r),i.find("[slideshow-item]").width(c),c},t.setupSlideshow=function(e){if(0===e)return!1;r=e,d=i.find("[slideshow-item]"),d.addClass("slideshow-item"),t.injectDots(i),t.setWidths()},t.moveSlide=function(){++t.currentIndex===i.find("[slideshow-item]").length&&(t.currentIndex=0);var e=0;return t.animating||0!==t.currentIndex?t.animating||(e=c*t.currentIndex,t.animating=!0,TweenMax.to(a,1,{left:"-"+e+"px",onComplete:t.unlockAnimation})):(t.animating=!0,TweenMax.to(a,1,{left:e+"px",onComplete:t.unlockAnimation})),e},l=n(t.moveSlide,s.slideshowDelay),i.on("click",".slideshow-dot",t.dotsClick),angular.element(e).on("resize",t.windowResize),t.$watch(o,t.setupSlideshow)},controller:["$scope","$compile","$sce","$templateRequest",function(e,n,i,s){function o(t){var i=n(angular.element("<div>").html(t).contents())(e);e.elm.append(i)}e.injectDots=function(n){e.elm=n;var l=i.getTrustedResourceUrl(t.APP_PATH+"app/components/slideshow/slideshow-dots.html");s(l).then(o)}}]}}])}();