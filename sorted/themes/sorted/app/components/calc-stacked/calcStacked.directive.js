!function(){"use strict";angular.module("sorted").directive("calcStacked",["siteConfig","$window","$filter",function(e,r,l){return{templateUrl:e.APP_PATH+"app/components/calc-stacked/calc-stacked.html",restrict:"EA",scope:{models:"=",result:"="},link:function(e){var i=[{gap:.25,name:"NZ Superannuation",data:[220,null,null]},{gap:.25,name:"KiwiSaver",data:[150,null,null]},{gap:.25,name:"Other lump sum",data:[97,null,null]},{gap:.25,name:"Other income",data:[90,null,null]},{gap:.25,name:"Desired retirement income",data:[null,800,null]},{gap:.25,name:"Extra savings",data:[null,null,243]}],a=["You will have\n$557 per week","You will need\n$800 per week","You'll need to save\n$243 per week"];e.chartConfig={transitions:!1,legend:{visible:!1},seriesDefaults:{type:"column",stack:!0},series:i,valueAxis:{labels:{visible:!0},line:{visible:!1},minorGridLines:{visible:!1},title:{text:"Amount ($)"}},categoryAxis:{categories:a,majorGridLines:{visible:!1}},tooltip:{visible:!0,template:"#= series.name #: $#= value #"}},e.$watch("models",function(){e.models&&e.models.howClose&&(e.chartConfig.series[0].color=e.models.howClose.graphic.super.color,e.chartConfig.series[1].color=e.models.howClose.graphic.kiwiSaver.color,e.chartConfig.series[2].color=e.models.howClose.graphic.otherLump.color,e.chartConfig.series[3].color=e.models.howClose.graphic.otherIncome.color,e.chartConfig.series[4].color=e.models.howClose.graphic.liveOn.color,e.chartConfig.series[5].color=e.models.howClose.graphic.deficitLump.color,e.drawChart(!1))}),e.$watch("result",function(){e.result?e.drawChart(!0):e.drawChart(!1)},!0),e.drawChart=function(r){if(r){var n,t=parseInt(e.models.howMuch.fields.lifestyleFreq.value);switch(t){case 1:n="year";break;case 12:n="month";break;case 26:n="fortnight";break;case 52:n="week"}var s=e.result.income_nz_superannuation+e.result.income_kiwisaver_lump_sum+e.result.income_other_lump_sums+e.result.income_other_income_sources,o="You will have\n"+l("currency")(s,"$",0)+" per "+n,c="You will need\n"+l("currency")(e.result.desired_retirement_income,"$",0)+" per "+n,u="You'll need to save\n"+l("currency")(e.result.deficit_lump_amount,"$",0)+" per "+n;0!==e.result.deficit_lump_amount?(e.chartConfig.categoryAxis.categories=[o,c,u],e.chartConfig.series[0].data=[e.result.income_nz_superannuation,null,null],e.chartConfig.series[1].data=[e.result.income_kiwisaver_lump_sum,null,null],e.chartConfig.series[2].data=[e.result.income_other_lump_sums,null,null],e.chartConfig.series[3].data=[e.result.income_other_income_sources,null,null],e.chartConfig.series[4].data=[null,e.result.desired_retirement_income,null],e.chartConfig.series[5].data=[null,null,e.result.deficit_lump_amount]):(e.chartConfig.categoryAxis.categories=[o,c],e.chartConfig.series[0].data=[e.result.income_nz_superannuation,null],e.chartConfig.series[1].data=[e.result.income_kiwisaver_lump_sum,null],e.chartConfig.series[2].data=[e.result.income_other_lump_sums,null],e.chartConfig.series[3].data=[e.result.income_other_income_sources,null],e.chartConfig.series[4].data=[null,e.result.desired_retirement_income],e.chartConfig.series[5].data=[null,null])}else e.chartConfig.categoryAxis.categories=a,e.chartConfig.series=i;angular.element(".calc-stacked-chart").kendoChart(e.chartConfig)},angular.element(r).bind("resize",e.drawChart)}}}])}();