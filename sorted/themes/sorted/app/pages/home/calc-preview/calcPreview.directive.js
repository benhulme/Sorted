!function(){"use strict";angular.module("sorted").directive("calcPreview",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/home/calc-preview/calc-preview.html",restrict:"E",link:function(){},controller:["$scope","silverStripeService","$rootScope","formForwardService","calcPreviewModel",function(e,r,c,o,t){function i(r){200===r.status?e.calcPreview=r.data[0]:console.error("unexpected response status",r)}function l(e){console.error("failure",e)}e.calcPreModel=t.fields,r.get("calcPreview").then(i,l),e.submitForm=function(r,c){if("calcPreviewForm"===c.formName){var i=t.prepare(e.calcPreModel);o.forward("calcPreviewPost",i)}},c.$on("cmForm.submit",e.submitForm)}]}}])}();