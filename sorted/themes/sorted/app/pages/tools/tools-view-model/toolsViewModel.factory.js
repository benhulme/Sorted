!function(){"use strict";angular.module("sorted").factory("toolsViewModel",["$filter","$sce","silverStripeService",function(t,e,n){function r(t){return _.map(t,function(t){return t.hasOwnProperty("CustomContent")&&(t.TrustedCustomContent=e.trustAsHtml(t.CustomContent)),t})}function o(e){var n=e.data[0];return _.reduce(n.Categories,function(e,o){return o.Slug=t("titleSlug")(o.Title),o.Pages=r(_.filter(n.ToolPages,function(t){return _.includes(t.CategoryIDs,""+o.ID)})),e.push(o),e},[])}function u(t){return console.error("Failed to load tool pages",t),null}function i(){return n.get("toolsArticles").then(o,u)}return{build:i}}])}();