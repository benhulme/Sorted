!function(){"use strict";angular.module("sorted").directive("mortgageToolGraphic",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/mortgage-tool/mortgage-tool-graphic/calc-graphic.html",restrict:"EA",scope:{calculator:"=",model:"="},link:function(e,t){e.setHouseHeight=function(){var r=t.find(".graphic-house-dark-img")[0].offsetWidth/390*292,n=r*((100-e.interestPercent)/100);if(t.find(".graphic-house-light").css({height:n+"px"}),e.interestPercent<30)t.find(".graphic-interest").css({top:"-50px"}),t.find(".graphic-interest").removeClass("font-white").addClass("font-purple");else{var s=.4*e.interestPercent;t.find(".graphic-interest").css({top:s+"%"}),t.find(".graphic-interest").removeClass("font-purple").addClass("font-white")}},e.setHouseHeight()},controller:["$scope","$window",function(t,r){t.siteConfig=e,t.currentModel=t.model.collection.at(0),t.$on("output:update",function(e,r){t.currentModel=t.model.collection.at(r),t.currentModel.hasResult()&&(t.currentModel.result.has("interest")&&(t.interest=t.currentModel.result.get("interest"),t.total=t.currentModel.result.get("total"),t.interestPercent=t.interest/t.total*100),t.currentModel.result.has("time")?t.years=t.currentModel.result.get("time"):t.years=25,t.setHouseHeight())}),_.isUndefined(t.interestPercent)&&(t.interestPercent=66),_.isUndefined(t.years=25)&&(t.years=25),angular.element(r).on("resize",t.setHouseHeight)}]}}])}();