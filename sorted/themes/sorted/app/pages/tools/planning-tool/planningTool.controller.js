!function(){"use strict";angular.module("sorted").controller("PlanningToolController",["$scope","$rootScope","$q","$uibModal","planningData","siteConfig","defaultData","pageData","isLoggedIn","usersGoals","profileApi","$window","$routeParams",function(t,o,e,a,n,l,r,s,d,i,g,u,c){var p=!1;if(t.target="goals",t.notChanged=!0,t.editGoal=n.goalEditable,t.small=function(){return u.innerWidth<768},$.isEmptyObject(n.goals)&&(n.goals=r.data.data[0].Data,t.default=r.data.data[0].Data),t.goals=n.goals,d&&c.id){var f=i.data.filter(function(t){return t.ID.toString()===c.id.toString()});n.id=c.id,n.goals=f[0].Data,t.goals=n.goals}t.changeFlow=function(o){t.target===o?t.target="goals":t.target=o};var m=function(){return a.open({templateUrl:l.APP_PATH+"app/pages/tools/planning-tool/components/save-resolve/saveResolve.html",controller:"ModalInstanceSaveResolve"}).result},P=function(){m().then(function(){d&&c.id?n.update(t.goals,c.id):n.save(t.goals),p=!1})};t.saveGoals=function(){p=!0,g.isLoggedIn().then(function(t){t?P():$("#login-modal").modal("show")})},t.beforeAdd=function(){return a.open({templateUrl:l.APP_PATH+"app/pages/tools/planning-tool/components/add-modal/addModal.html",controller:"ModalInstanceAdd"}).result},t.beforeEdit=function(){return a.open({templateUrl:l.APP_PATH+"app/pages/tools/planning-tool/components/edit-modal/editModal.html",controller:"ModalInstanceEdit"}).result},t.beforeDelete=function(){return a.open({templateUrl:l.APP_PATH+"app/pages/tools/planning-tool/components/delete-modal/deleteModal.html",controller:"ModalInstanceDelete"}).result},angular.element(u).bind("resize",function(){t.target="goals",t.$digest()}),o.$watch("userLogged",function(){o.userLogged&&p?P():p=!1}),t.$watch("goals",function(o,e){angular.equals(o,e)||(t.notChanged=!1)},!0)}])}();