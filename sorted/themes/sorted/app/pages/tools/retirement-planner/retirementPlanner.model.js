"use strict";angular.module("sorted").factory("RetirementPlannerModel",["siteConfig","NgBackboneModel",function(t,e){var r=e.extend({hasResult:function(){var t=this,e=["amount_total","retirement_income","desired_retirement_income"];return!!_.reduce(t.pick(e),function(t,e){return _.isNaN(e)?t:_.add(t,parseInt(e))},0)}});return e.extend({idAttribute:"ID",defaults:{Title:"Retirement planner"},urlRoot:t.API_PREFIX,url:function(){var t=this.urlRoot+"/rest/tool";return this.isNew()?t:t+"/"+this.get("ID")},constructor:function(){this.result=new r,e.apply(this,arguments)},initialize:function(t,e){_.has(e,"calculator")&&(this.calculator=e.calculator)},parse:function(t,e){var r=this,i={},n=e||{};return i=_.has(t,"status")&&_.has(t,"data")?_.merge(_.cloneDeep(t.data.Data),_.pick(t.data,"ID")):t,_.has(i.result,"result")&&r.result.set(_.pick(i,"result"),n),_.omit(i,["result"])},calculate:function(){var t=_.clone(this.attributes);t.required_savings_freq=t.lifestyle_freq,t.bridge_freq=t.lifestyle_freq,t.partner_super=t.your_super,t.your_other_income=t.your_other_income*t.your_other_income_freq,t.partner_other_income=t.partner_other_income*t.partner_other_income_freq;var e=this.calculator.calculate(t);return this.result.set(e),this},hasResult:function(){return 1===this.get("tab_viewed")&&this.result.hasResult()},calcSuper:function(){var t=390;return this.get("partner")&&(t=300),52/this.get("super_freq")*t},toJSON:function(){var t=e.prototype.toJSON.apply(this,arguments);return _.merge(t,{result:this.result.toJSON()}),_.merge({Data:t},_.pick(t,"CalcID","Title"))}})}]);