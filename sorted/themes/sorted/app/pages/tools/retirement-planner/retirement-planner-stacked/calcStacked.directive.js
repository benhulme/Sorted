!function(){"use strict";angular.module("sorted").directive("calcStackedRetirement",["siteConfig","$window","$filter",function(e,t,r){return{templateUrl:e.APP_PATH+"app/pages/tools/retirement-planner/retirement-planner-stacked/calc-stacked.html",restrict:"EA",scope:{model:"=",calculator:"="},link:function(e){var a=[{gap:.25,name:"NZ Super",data:[220,null,null],color:"#ffd700",overlay:{gradient:"none"}},{gap:.25,name:"KiwiSaver",data:[150,null,null],color:"#ffe140",overlay:{gradient:"none"}},{gap:.25,name:"Other Savings",data:[97,null,null],color:"#ffed8c",overlay:{gradient:"none"}},{gap:.25,name:"Other Income",data:[90,null,null],color:"#fff5bf",overlay:{gradient:"none"}},{gap:.25,name:"Desired retirement income",data:[null,800,null],color:"#cadc3c",overlay:{gradient:"none"}},{gap:.25,name:"Extra savings",data:[null,null,243],color:"#ce0058",overlay:{gradient:"none"}}],l=["You will have\n$557 per week","You will need\n$800 per week","You'll need to save\n$243 per week"];e.chartConfig={transitions:!1,legend:{visible:!1},seriesDefaults:{type:"column",stack:!0},series:a,valueAxis:{labels:{visible:!0},line:{visible:!1},minorGridLines:{visible:!1},title:{text:"Amount ($)"}},categoryAxis:{categories:l,majorGridLines:{visible:!1}},tooltip:{visible:!0,template:"#= series.name #: $#= value #"}},e.$watch("model.result.$attributes",function(){e.model.$attributes&&e.model.result.$attributes&&e.model.hasResult()?e.drawChart(!0):e.drawChart(!1)},!0),e.$watch(function(){return e.model.hasResult()},function(t){t?e.drawChart(!0):e.drawChart(!1)},!0),e.drawChart=function(t){if(t){var n,i=parseInt(e.model.$attributes.lifestyle_freq);switch(i){case 1:n="year";break;case 12:n="month";break;case 26:n="fortnight";break;case 52:n="week"}var s=e.model.result.$attributes.income_nz_superannuation+e.model.result.$attributes.income_kiwisaver_lump_sum+e.model.result.$attributes.income_other_lump_sums+e.model.result.$attributes.income_other_income_sources,o="You will have\n"+r("currency")(s,"$",0)+" per "+n,u="You will need\n"+r("currency")(e.model.result.$attributes.desired_retirement_income,"$",0)+" per "+n,c="You'll need to save\n"+r("currency")(e.model.result.$attributes.deficit_lump_amount,"$",0)+" per "+n;0!==e.model.result.$attributes.deficit_lump_amount&&s<e.model.result.$attributes.desired_retirement_income?(e.chartConfig.categoryAxis.categories=[o,u,c],e.chartConfig.series[0].data=[e.model.result.$attributes.income_nz_superannuation,null,null],e.chartConfig.series[1].data=[e.model.result.$attributes.income_kiwisaver_lump_sum,null,null],e.chartConfig.series[2].data=[e.model.result.$attributes.income_other_lump_sums,null,null],e.chartConfig.series[3].data=[e.model.result.$attributes.income_other_income_sources,null,null],e.chartConfig.series[4].data=[null,e.model.result.$attributes.desired_retirement_income,null],e.chartConfig.series[5].data=[null,null,e.model.result.$attributes.deficit_lump_amount]):(e.chartConfig.categoryAxis.categories=[o,u],e.chartConfig.series[0].data=[e.model.result.$attributes.income_nz_superannuation,null],e.chartConfig.series[1].data=[e.model.result.$attributes.income_kiwisaver_lump_sum,null],e.chartConfig.series[2].data=[e.model.result.$attributes.income_other_lump_sums,null],e.chartConfig.series[3].data=[e.model.result.$attributes.income_other_income_sources,null],e.chartConfig.series[4].data=[null,e.model.result.$attributes.desired_retirement_income],e.chartConfig.series[5].data=[null,null])}else e.chartConfig.categoryAxis.categories=l,e.chartConfig.series=a;angular.element(".calc-stacked-chart").kendoChart(e.chartConfig)},angular.element(t).bind("resize",e.drawChart)}}}])}();