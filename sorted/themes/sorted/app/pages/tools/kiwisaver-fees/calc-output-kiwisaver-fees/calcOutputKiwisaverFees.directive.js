!function(){"use strict";angular.module("sorted").directive("calcOutputKiwisaverFees",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/kiwisaver-fees/calc-output-kiwisaver-fees/calc-output-kiwisaver-fees.html",restrict:"EA",scope:{model:"="},link:function(e,t){e.directions={fees_till_65_dollars:"NEUTRAL",scheme:"NEUTRAL",active:"NEUTRAL"},e.mobileFilterOptions=[{label:"Highest Fees Until age 65",value:1},{label:"Lowest Fees Until age 65",value:2},{label:"A-Z Scheme Name",value:3},{label:"Z-A Scheme Name",value:4},{label:"Active Fund",value:5},{label:"Passive Fund",value:6}],e.mobileFilter=null,e.$watch("mobileFilter",function(){if(e.mobileFilter)switch(e.mobileFilter){case"1":e.result=_.orderBy(e.result,"fees_till_65_dollars","desc"),e.directions.fees_till_65_dollars="UP";break;case"2":e.result=_.orderBy(e.result,"fees_till_65_dollars","asc"),e.directions.fees_till_65_dollars="DOWN";break;case"3":e.result=_.orderBy(e.result,"scheme","asc"),e.directions.scheme="UP";break;case"4":e.result=_.orderBy(e.result,"scheme","desc"),e.directions.scheme="DOWN";break;case"5":e.result=_.orderBy(e.result,"active","asc"),e.directions.active="UP";break;case"6":e.result=_.orderBy(e.result,"active","desc"),e.directions.active="DOWN"}}),t.on("click",".btn-compare",function(){e.comparing=!e.comparing,e.comparing||e.result.forEach(function(e){e.compare&&(e.compare=0)}),e.$apply(e.comparing)}),t.on("click",".output-ksf-direction",function(t){var l=angular.element(t.currentTarget).attr("data-sort-field"),r="asc",s=e.directions[l];e.directions={fees_till_65_dollars:"NEUTRAL",scheme:"NEUTRAL",active:"NEUTRAL"},"NEUTRAL"===s&&(r="asc",e.directions[l]="UP"),"UP"===s&&(r="desc",e.directions[l]="DOWN"),"DOWN"===s&&(r="asc",e.directions[l]="UP"),e.$apply(e.result=_.orderBy(e.result,l,r))}),e.$on("save:calc",function(t,l){var r={success:function(){angular.element("#save-as-modal").modal("hide")},error:function(){},silent:!0,parse:!0};e.model.$attributes.Title=l,e.model.save(null,r)})},controller:["$scope",function(e){e.comparing=!1,e.result=[],e.$on("output:redraw",function(){var t=1===e.model.$attributes.iac?"todays":"nominal";e.result=e.model.result[t].map(function(e){return e.toJSON()}),e.$emit("cm-spinner.stop"),e.$apply()})}]}}])}();