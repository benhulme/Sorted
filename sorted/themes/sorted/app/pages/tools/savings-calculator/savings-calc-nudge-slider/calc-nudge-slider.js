!function(){"use strict";angular.module("sorted").directive("savingsCalcNudgeSlider",["siteConfig","moment",function(e,n){return{templateUrl:e.APP_PATH+"app/pages/tools/savings-calculator/savings-calc-nudge-slider/slider.html",restrict:"EA",scope:{model:"=",nudge:"="},link:function(t){t.sliderChange=!1,t.$on("slideEnded",function(){if(t.sliderChange=!0,1===t.model.get("type")){var d=n(Math.abs(t.nudgeModel));t.$apply(t.model.set("ending",d.format(e.DATE_FORMAT)))}else t.$apply(t.model.set("regular_amount",t.nudgeModel));t.sliderChange=!1})},controller:["$scope","$timeout",function(t,d){t.$watch("model.attributes",function(){t.refreshSlider(),!t.model.changed.ending&&!t.model.changed.starting||t.sliderChange||1!==t.model.attributes.type||(t.nudge.options.ceil=n(t.model.$attributes.starting,e.DATE_FORMAT).add(7,"days").valueOf()*-1,t.nudge.options.floor=n(t.model.$attributes.ending,e.DATE_FORMAT).valueOf()*-1,(t.nudgeModel>t.nudge.options.ceil||t.nudgeModel<t.nudge.options.floor)&&(t.nudgeModel=NaN),t.nudge.options.step=n.duration(1,"day").asMilliseconds())},!0),t.refreshSlider=function(){d(function(){t.$broadcast("rzSliderForceRender")})}}]}}])}();