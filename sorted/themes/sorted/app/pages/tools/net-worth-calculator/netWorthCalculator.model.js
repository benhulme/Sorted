"use strict";angular.module("sorted").factory("NetWorthCalculatorModel",["siteConfig","NgBackboneModel","NgBackboneCollection",function(t,e,s){var r=e.extend({calcResult:function(){var t=this;return _.reduce(t.attributes,function(t,e){return _.isNaN(e)?t:_.add(t,parseInt(e))},0)},hasResult:function(){var t=this.pick(["sum_total","debt_total"]);return t.sum_total>0||t.debt_total>0}}),o=e.extend({constructor:function(){this.result=new r,e.apply(this,arguments)},initialize:function(t,e){_.has(e,"calculator")&&(this.calculator=e.calculator)},calTotal:function(){return this.result.has("sum_total")?"$"+this.result.get("total"):""},parse:function(t,e){var s=this,r=e||{};return _.has(t.result,"result")&&s.result.set(_.pick(t,"result"),r),_.omit(t,["result"])},calculate:function(){var t=_.omit(_.clone(this.attributes),["id","identifier"]),e=this.calculator.calculate(t);return this.result.set(e),this},hasResult:function(){return this.result.hasResult()},toJSON:function(){var t=e.prototype.toJSON.apply(this,arguments);return _.merge(t,{result:this.result.toJSON()})}}),a=s.extend({model:o,hasResult:function(){return!!this.find(function(t){return t.hasResult()})}});return e.extend({idAttribute:"ID",urlRoot:t.API_PREFIX,defaults:{Title:"My NetWorth Savings Calculation"},url:function(){var t=this.urlRoot+"/rest/tool";return this.isNew()?t:t+"/"+this.get("ID")},constructor:function(){this.collection=new a,e.apply(this,arguments)},parse:function(t,e){var s=this,r={};return r=_.has(t,"status")&&_.has(t,"data")?t.data:t,_.has(r,"Data")?s.collection.set(r.Data,e):_.has(r,"models")&&s.collection.reset(r.models,e),_.omit(r,["Data","models"])},hasResult:function(){return this.collection.hasResult()},toJSON:function(){var t=e.prototype.toJSON.apply(this,arguments);return _.merge(t,{Data:this.collection.toJSON()})}})}]);