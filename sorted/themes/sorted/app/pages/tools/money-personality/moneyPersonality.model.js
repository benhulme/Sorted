"use strict";angular.module("sorted").factory("MoneyPersonalityModel",["siteConfig","NgBackboneModel",function(t,e){var r=e.extend({hasResult:function(){return this.result.hasResult()}});return e.extend({idAttribute:"ID",intAttrs:[],floatAttrs:[],dateAttrs:[],defaults:{Title:"Money Personality Quiz"},urlRoot:t.API_PREFIX,url:function(){var t=this.urlRoot+"/rest/tool";return this.isNew()?t:t+"/"+this.get("ID")},constructor:function(){this.result=new r,e.apply(this,arguments)},initialize:function(t,e){_.has(e,"calculator")&&(this.calculator=e.calculator)},parse:function(t,e){var r=this,s={},u=e||{};return s=_.has(t,"status")&&_.has(t,"data")?_.merge(_.cloneDeep(t.data.Data),_.pick(t.data,"ID")):t,_.has(s.result,"result")&&r.result.set(_.pick(s,"result"),u),_.omit(s,["result"])},calculate:function(){var t=this.calculator.calculate(_.clone(this.attributes));return this.result.set({code:t}),this},hasResult:function(){return this.result.hasResult()},saveResult:function(){var t={success:function(t,e,r){console.info("SUCCESS: ",t,e,r)},error:function(t,e,r){console.error("ERROR: ",t,e,r)},parse:!0};return this.save(null,t)},validate:function(t){if(function(t){var e=[];return _.forEach(t,function(t,r){if(_.isEmpty(t))return e.push(r)}),e.length}(_.omit(t,["CalcID","ID"])))return"Invalid"},toJSON:function(){var t=e.prototype.toJSON.apply(this,arguments);return _.merge(t,{result:this.result.toJSON()}),_.merge({Data:t},_.pick(t,"CalcID","Title"))}})}]);