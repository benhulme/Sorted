!function(){"use strict";angular.module("budgetingTool").controller("BudgetingToolCtrl",["$document","$log","$scope","$timeout","$window","Alert","Budget","budgetingToolConfig","budgetEvents","budgetModal","budgetHandler","budgetView","Category","chartValues","periodAmount","Profile","siteConfig","totalValues","deviceDetector",function(e,t,o,a,n,r,i,l,g,d,u,c,s,f,b,p,y,h,C){function M(){var e=o.$watch("budget",function(t,a){angular.equals(t,a)||(e(),angular.copy(h.updateTotals(),o.budget.MasterCategories),o.breakdownChartSource.data(f.update()),M())},!0)}o.siteConfig=y,o.breakdownChartSource=new kendo.data.DataSource({data:f.update()}),o.budget=i.budget,o.alert=r.alert,o.closeAlert=r.close,o.getBudgetTemplate=c.getTemplate,o.dirty=i.isDirty,o.getIconPath=s.getIconPath,o.getRemainingDisplay=h.getRemainingDisplay,o.inlineEditCategory={},o.inlineEditValue=new BigNumber(0),o.openHeaderModal=d.headerModal,o.openCategoryModal=d.categoryModal,o.openMasterCategoryModal=d.masterCategoryModal,o.profile=p.get(),o.save=function(){i.startSaveAttempt(),p.get(!0).then(p.checkLogin).then(u.save)},M(),"safari"===C.browser&&d.safariModal();var $=o.$on("$locationChangeStart",function(e,t){g.changeLocationWarning(e,t,$)});a(function(){angular.element(".logout-button").on("click",function(e){e.preventDefault(),i.isDirty()?d.logoutWarningModal().then(function(){o.$destroy(),globalState.dirty=!1,logoutProfile()}):o.$destroy()})},0),o.$on("$destroy",function(){g.onDestroy($)}),o.$on("closeMobileBreakdown",function(){o.breakdownMobileExpanded=!1})}])}();