!function(){"use strict";angular.module("budgetingTool").directive("inlineEditableCategory",["$document","$rootScope","Budget","budgetModal","budgetingToolConfig","categoryValidator","periodAmount","siteConfig",function(e,t,i,n,o,r,a,g){return{restrict:"E",templateUrl:g.APP_PATH+"app/pages/tools/budgeting-tool/components/inline-editable-category/inlineEditableCategory.html",link:function(r){function g(e){if(void 0!==r.inlineEditCategory.Cents&&(r.inlineEditCategory.Cents.eq(e.Cents)||(angular.copy(r.inlineEditCategory.Cents,e.Cents),i.setDirty())),void 0!==r.inlineEditCategory.Title&&r.inlineEditCategory.Title!==e.Title&&(e.Title=r.inlineEditCategory.Title.substring(0,o.MAX_CATEGORY_TITLE_FIELD),i.setDirty()),r.inlineEditCategory.Period.PerYear!==e.Period.PerYear){var t=a.convert(r.inlineEditCategory.Cents,e.Period,r.inlineEditCategory.Period);angular.copy(t,e.Cents),angular.copy(r.inlineEditCategory.Period,e.Period),i.setDirty()}e.editing=!1}function l(){return _.reject(_.map(i.budget.MasterCategories,function(e){return _.find(e.Categories,{editing:!0})}),_.isUndefined)}function d(i){angular.element(i.target).parents("inline-editable-category").length||"dropdown-backdrop"===i.target.className||(_.forEach(l(),function(e){t.$apply(g(e))}),i.stopImmediatePropagation(),e.off("click",d))}r.openCategoryEditForm=function(){_.forEach(l(),function(e){g(e)}),angular.copy(r.category,r.inlineEditCategory),r.category.editing=!0,e.on("click",d)},r.getCategoryAmount=function(){return a.displayDollars(r.category.Cents,r.category.Period)},r.removeCategory=function(e){n.areYouSureModal().then(function(t){t&&(r.mc.Categories.splice(e,1),i.setDirty())})}}}}])}();