!function(){"use strict";angular.module("budgetingTool").factory("Profile",["$log","$q","$window","Budget","budgetModal","budgetingToolConfig","profileApi","$rootScope",function(e,n,o,t,r,g,u,i){function a(){angular.copy(angular.fromJson(o.sessionStorage.getItem("userData")),f)}function c(e){return _.isEmpty(f)||e?u.get().then(function(e){return f=e}).catch(function(){return o.sessionStorage.clear(),i.userLogged=!1,{}}):f}function l(){return a(),i.userLogged?n.resolve({loggedIn:!0}):n.reject({loggedIn:!1})}function d(){l().then(function(){m=!1}).catch(function(){return angular.element("#login-modal").modal("show"),m=!0,n.reject({loginModalTriggered:!0})})}function s(e){return u.uploadBudgetImage(e)}var f={},m=!1;return{checkLogin:d,get:c,isLoggedIn:l,loginModalTriggered:function(){return m},updateFromSession:a,uploadBudgetImage:s}}])}();