!function(){"use strict";angular.module("budgetingTool").controller("HeaderModalCtrl",["$location","$scope","$timeout","$uibModalInstance","Budget","budgetingToolConfig","periodAmount","Profile","siteConfig",function(e,t,n,o,i,r,a,u,c){function d(e){return _.reduce(e,function(e,t){return t.Cents?e.plus(t.Cents):e},new BigNumber(0))}t.budget=angular.copy(i.budget),t.initialPeriod=angular.copy(t.budget.Period),t.data={BudgetPeriods:r.BUDGET_PERIODS},t.profile=u.get(),t.siteConfig=c,t.budgetingToolConfig=r,t.addIncomeStream=function(){t.budget.IncomeStreams.length>=r.INCOME_STREAM_MAX||t.budget.IncomeStreams.push({Removeable:!0})},t.removeIncomeStream=function(e){t.budget.IncomeStreams.splice(e,1)},t.saveHeaderModal=function(){var e=angular.copy(t.budget);e.IncomeStreams=_(e.IncomeStreams).filter(function(e){return e.Cents.greaterThan(0)}).map(function(e){return e.Title=e.Title||r.INCOME_STREAM_PLACEHOLDER,e.Cents=a.convert(e.Cents,t.initialPeriod,t.budget.Period),e}).value(),e.Cents=d(e.IncomeStreams),o.close(e)},t.toProfile=function(){return o.dismiss("cancel"),e.path("/profile")},t.cancelHeaderModal=function(){o.dismiss("cancel")},t.getAvailable=function(){var e=a.convert(d(t.budget.IncomeStreams),t.initialPeriod,t.budget.Period);return a.displayDollars(e,t.budget.Period)}}])}();