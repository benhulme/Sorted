!function(){"use strict";angular.module("sorted").directive("calcOutputInvestment",["siteConfig","$http","$q",function(t,e,n){return{templateUrl:t.APP_PATH+"app/pages/tools/investment-planner/calc-output-investment/calc-output-investment.html",restrict:"EA",scope:{model:"=",result:"=",dropdown:"=",resultData:"="},link:function(t){t.$on("save:calc",function(e,n){var u={success:function(){angular.element("#save-as-modal").modal("hide")},error:function(){},silent:!0,parse:!0};t.model.$attributes.Title=n,t.model.save(null,u)})},controller:["$scope",function(u){function o(t){return 200===t.status?t.data:(console.error("unexpected response status",t),!1)}function s(t){return console.error("failure",t),!1}u.quizResult=!1,u.siteConfig=t,u.$watch("result",function(){(u.result||0===u.result)&&(u.currentResult=_.find(u.outputs,{type:u.result}),u.quizResultTitle=u.currentResult.title,u.dropdown.value=u.result.toString(),u.quizResult=!0)}),u.$watch("dropdown.value",function(){if(u.dropdown&&u.dropdown.value){var t=parseInt(u.dropdown.value);u.currentResult=_.find(u.outputs,{type:t})}}),u.loadOutput=function(t){return e({method:"GET",url:t})};var r=u.loadOutput(t.APP_PATH+"/json/investment/aggressive.json"),l=u.loadOutput(t.APP_PATH+"/json/investment/growth.json"),i=u.loadOutput(t.APP_PATH+"/json/investment/balanced.json"),a=u.loadOutput(t.APP_PATH+"/json/investment/conservative.json"),c=u.loadOutput(t.APP_PATH+"/json/investment/defensive.json");n.all([r.then(o,s),l.then(o,s),i.then(o,s),a.then(o,s),c.then(o,s)]).then(function(t){u.outputs=t,u.result?(u.currentResult=_.find(u.outputs,{type:u.result}),u.dropdown.value=u.result.toString()):u.currentResult=_.find(u.outputs,{type:"BALANCED"})})}]}}])}();