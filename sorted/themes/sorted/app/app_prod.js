!function(){"use strict";angular.module("cmValidation",[]),angular.module("budgetingTool",["ng.deviceDetector","ngResource","kendo.directives","sorted.config","sorted.http"]),angular.module("sorted.http",[]),angular.module("sorted",["ngRoute","ngAnimate","ngSanitize","ngTouch","sorted.config","sorted.http","cmValidation","budgetingTool","rzModule","ui.bootstrap","angularMoment","kendo.directives","ngBackbone","ngLodash","angulartics","angulartics.google.tagmanager","ngDragDrop"]).config(["$routeProvider","$httpProvider","$locationProvider",function(e,t,n){n.html5Mode(!0),t.defaults.headers.common["X-Csrf-Token"]=$_gah2Anoh,navigator.userAgent.toLowerCase().indexOf("chrome")>-1||$("body").on("click",function(e){$('[data-toggle="popover"]').each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".popover").has(e.target).length||$(this).popover("hide")})})}]).controller("MetaController",["$scope","$rootScope",function(e,t){e.metadata={title:"Sorted.org.nz",description:"Sorted offers New Zealanders free, impartial information and calculators to help manage their money throughout life.  ",thumbnail:"https://www.sorted.org.nz/themes/sorted/images/sorted-og-image-default.jpg"},e.title=function(t){return e.metadata.title+" - "+t},t.$on("newPageLoaded",function(t,n){e.metadata=n})}])}(),function(){"use strict";angular.module("sorted.http").factory("calculatorApi",["$http","siteConfig",function(e,t){function n(t){return e({method:"GET",url:i+"query",params:{calcid:t}}).then(function(e){return e.data.length?_.find(e.data,{CalcID:t}):null},function(){return null})}function o(t,n){return e({method:"POST",url:i+"save",data:{CalcID:t,Data:angular.toJson(n)}}).then(function(e){return e})}function r(t,n){return t.Data=angular.toJson(n),e({method:"PUT",url:i+"update/"+t.ID,data:t}).then(function(e){return e})}function a(t){return e({method:"DELETE",url:i+"delete/"+t.ID}).then(function(e){return e}).catch(function(e){return e})}var i=t.API_PREFIX+"/calculator/";return{get:n,save:o,update:r,del:a}}])}(),function(){"use strict";angular.module("sorted.http").factory("profileApi",["$http","$q","siteConfig",function(e,t,n){function o(){return e({method:"GET",url:i+"get"}).then(function(e){return"false"===e.data.success?t.reject():e.data},function(e){return t.reject(e)})}function r(){return o().then(function(){return!0}).catch(function(){return!1})}function a(t){var n=i+"custom",o=new FormData;return o.append("Image",t),e({data:o,method:"POST",url:n,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(e){return e.data},function(){return null})}var i=n.API_PREFIX+"/profile/";return{get:o,uploadBudgetImage:a,isLoggedIn:r}}])}(),function(){"use strict";angular.module("sorted").controller("GlossaryController",["$scope","siteConfig","silverStripeService",function(e,t,n){function o(t){200===t.status?e.data=t.data[0]:console.error("unexpected response status",t)}function r(e){console.error("failure",e)}e.siteConfig=t,e.search=[],e.search.category="",n.get("glossary").then(o,r)}])}(),function(){"use strict";angular.module("sorted").config(["$routeProvider","siteConfig",function(e,t){e.when("/glossary",{templateUrl:t.APP_PATH+"app/pages/glossary/glossary.html",controller:"GlossaryController"}).when("/glossary/?category",{templateUrl:t.APP_PATH+"app/pages/glossary/glossary.html",controller:"GlossaryController"})}])}(),function(){"use strict";angular.module("sorted").service("userCalculators",["$http","silverStripeService",function(e,t){function n(e){console.error("failure",e)}var o={};return o.usedCalcId=[],o.deleteById=function(t){return e.delete("/api/v0.1/rest/tool/"+t)},o.getUsedCalculators=function(){return t.get("calculators").then(function(e){if(200===e.status)return e.data;console.error("unexpected response status",e)},n)},o.getBlankCalculators=function(){return t.get("toolsArticles").then(function(e){if(200===e.status)return e.data;console.error("unexpected response status",e)},n)},o.getUsedCalcIds=function(){return o.getUsedCalculators().then(function(e){var t=e.data;o.usedCalcId=[];for(var n=0;n<t.length;n++)o.usedCalcId.push(t[n].CalcID);return o.usedCalcId})},o}])}(),function(){"use strict";angular.module("sorted").controller("DashboardController",["$scope","siteConfig","silverStripeService","userStorage",function(e,t,n,o){e.siteConfig=t,e.user=o.data}])}(),function(){"use strict";angular.module("sorted").config(["$routeProvider","siteConfig",function(e,t){e.when("/dashboard",{templateUrl:t.APP_PATH+"app/pages/dashboard/dashboard.html",controller:"DashboardController",resolve:{check:["$location","userStorage",function(e,t){t.isLoggedIn()||e.path("/")}]}})}])}(),function(){"use strict";angular.module("sorted").service("userStorage",["$http",function(e){var t={};return t.isLoggedIn=function(){return null!==sessionStorage.getItem("userData")},t.data=JSON.parse(sessionStorage.getItem("userData")),t.getProfile=function(){return e({method:"GET",header:{"X-Csrf-Token":window.$_gah2Anoh},url:"/api/v0.1/profile/get"}).then(function(e){sessionStorage.setItem("userData",JSON.stringify(e.data))},function(){console.error("Failed to retrieve profile.")})},t.saveProfile=function(t){return e({method:"PUT",headers:{"X-Csrf-Token":window.$_gah2Anoh},url:"/api/v0.1/profile/update",data:t}).then(function(){sessionStorage.setItem("userData",t)},function(){console.error("Failed to retrieve profile.")})},t.updateUsersAvatar=function(t){var n=new FormData;return n.append("Image",t),e.post("/api/v0.1/profile/upload",n,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"X-Csrf-Token":window.$_gah2Anoh}})},t}])}(),function(){"use strict";angular.module("sorted").controller("GuidesController",["$scope","siteConfig","guidesViewModel",function(e,t,n){e.siteConfig=t,e.search="",n.build().then(function(t){e.data=t})}])}(),function(){"use strict";angular.module("sorted").config(["$routeProvider","siteConfig",function(e,t){e.when("/guides",{templateUrl:t.APP_PATH+"app/pages/guides/guides.html",controller:"GuidesController"})}])}(),function(){"use strict";angular.module("sorted").controller("HomeController",["$scope","$location","$window","siteConfig",function(e,t,n,o){e.siteConfig=o}])}(),function(){"use strict";angular.module("sorted").config(["$routeProvider","siteConfig",function(e,t){e.when("/",{templateUrl:t.APP_PATH+"app/pages/home/home.html",controller:"HomeController"}).otherwise({redirectTo:function(){window.location=location.pathname}})}])}(),function(){"use strict";angular.module("sorted").controller("OrderController",["$scope","siteConfig","orderViewModel","$http","$log",function(e,t,n,o){function r(e,t){for(var n,o=0;o<e.length;o++){var r=e[o];if(parseInt(r.ID)===parseInt(t)){n=r;break}}return n}function a(e,t){var n=[];for(var o in e.Seminar)if(e.Seminar.hasOwnProperty(o)){var a={};if(e.Seminar[o]){var i=r(t,o);a.ID=o,a.Dl=i.PDF.Filename,a.Title=i.Title,a.ShortCopy=i.ShortCopy,n.push(a)}}return n}e.siteConfig=t,e.seminarSend=!1,e.bookletSend=!1,e.Order=_.merge({},{Items:{},User:{},Organisation:{},DeliverTo:{},Seminar:{}}),e.data={organisationTypes:[{id:"1",name:"Workplace"},{id:"2",name:"School"},{id:"3",name:"Community Group"},{id:"4",name:"Both"},{id:"5",name:"Other"}],organisationSizes:[{id:"1",name:"less than 10"},{id:"2",name:"10 to 30"},{id:"3",name:"30 to 50"},{id:"4",name:"50 to 100"},{id:"5",name:"100 to 500"},{id:"6",name:"500 to 1000"},{id:"7",name:"more than 1000"}]},e.data.Title="Order Sorted Collateral",n.build().then(function(t){_.merge(e.data,t)}),e.getInput=function(e,t){return e[t.ID]},e.getOrderItemCount=function(){return _.keys(e.Order.Items).length},e.save=function(){if(angular.element(".orderForm").hasClass("ng-valid")&&(_.keys(e.Order.Items).length>0&&o.post("/api/v0.1/order/save",e.Order).then(function(){e.formSend=!0}),_.keys(e.Order.Seminar).length>0)){var t=angular.copy(e.Order),n=angular.copy(e.data),r=t.User,i=a(t,n.Seminars),l={Seminar:i,User:r,raw:e.Order};o.post("/api/v0.1/order/seminars",l).then(function(t){e.formSend=!0},function(e){console.log(e)})}}}])}(),function(){"use strict";angular.module("sorted").config(["$routeProvider","siteConfig",function(e,t){e.when("/order",{templateUrl:t.APP_PATH+"app/pages/order/order.html",controller:"OrderController"})}])}(),function(){"use strict";angular.module("sorted").directive("emailValid",["siteConfig",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,o){o.$parsers.unshift(function(e){var t={Email:e},n="";return $.ajax({type:"POST",url:"/api/v0.1/profile/checkemail",data:t,async:!1,success:function(t){"true"===t.success?(o.$setValidity("inUse",!0),n=e):(o.$setValidity("inUse",!1),n=e)}}),n})}}}])}(),function(){"use strict";angular.module("sorted").controller("ProfileController",["$scope","siteConfig","silverStripeService","userStorage","$timeout",function(e,t,n,o,r){var a=new Date;e.siteConfig=t,e.sent=!1,e.ThisYear=a.getFullYear(),e.user=o.data,e.user.BirthDate&&(e.user.dataYear=+e.user.BirthDate.split("-")[0],e.user.dataMonth=e.user.BirthDate.split("-")[1]),e.profileFormSubmit=function(){e.user.BirthDate=e.user.dataYear+"-"+e.user.dataMonth+"-01",o.saveProfile(JSON.stringify(e.user)).then(function(){e.sent=!0,r(function(){e.sent=!1},5e3)})}}])}(),function(){"use strict";angular.module("sorted").config(["$routeProvider","siteConfig",function(e,t){e.when("/profile",{templateUrl:t.APP_PATH+"app/pages/profile/profile.html",controller:"ProfileController",resolve:{check:["$location","userStorage",function(e,t){t.isLoggedIn()||e.path("/")}]}})}])}(),function(){"use strict";angular.module("sorted").directive("calcLink",["$window",function(e){return{restrict:"A",link:function(t,n){n.on("click",".ui-results-link",function(t){t.preventDefault();var n=angular.element(".calc-output"),o=n.offset().top-80;e.scrollTo(0,o)})}}}])}(),function(){"use strict";angular.module("sorted").controller("ToolsController",["$scope","siteConfig","toolsViewModel",function(e,t,n){e.siteConfig=t,e.search="",n.build().then(function(t){e.data=t})}])}(),function(){"use strict";angular.module("sorted").config(["$routeProvider","siteConfig",function(e,t){e.when("/tools",{templateUrl:t.APP_PATH+"app/pages/tools/tools.html",controller:"ToolsController"}).when("/tools/?category",{templateUrl:t.APP_PATH+"app/pages/tools/tools.html",controller:"ToolsController"})}])}(),function(){"use strict";angular.module("sorted").directive("accordion",[function(){return{restrict:"A",scope:{},link:function(e,t){t.on("click",".accordion-heading",function(e){var n=t.find(".accordion-item.selected"),o=angular.element(e.currentTarget);o.parent().hasClass("selected")||(n.find(".accordion-content").slideUp(),n.removeClass("selected"),o.parent().find(".accordion-content").slideDown(),o.parent().addClass("selected"))})}}}])}(),function(){"use strict";angular.module("sorted").directive("aspectRatio",["$window",function(e){return{restrict:"A",scope:{aspectRatio:"@"},link:function(t,n){t.resize=function(){var e=n.width(),o=t.aspectRatio.split(":");if(2!==o.length)return!1;if(t.ratioX=parseInt(o[0]),t.ratioY=parseInt(o[1]),isNaN(t.ratioX)||isNaN(t.ratioY))return!1;if(t.ratioX<=0||t.ratioY<=0)return!1;var r=e/t.ratioX*t.ratioY;return n.css({height:r+"px"}),r},t.resize(),t.checkContentWidth=function(){return n.width()},t.$watch(t.checkContentWidth,t.resize),angular.element(e).bind("resize",t.resize)}}}])}(),function(){"use strict";angular.module("sorted").directive("blur",[function(){return{restrict:"A",link:function(e,t){t.bind("keydown",function(e){13===e.keyCode&&e.target.blur()})}}}])}(),function(){"use strict";angular.module("sorted").directive("breadcrumbs",["$location","siteConfig",function(e,t){return{templateUrl:t.APP_PATH+"app/components/breadcrumbs/breadcrumbs.html",restrict:"E",controller:["$scope",function(t){var n=e.path().replace(/^#?\/?/g,"").split("/");t.breadcrumbs=_.map(n,function(e,t,n){var o=e.replace(/-/g," ");return e=t>0?"/"+e:e,e=n.slice(0,t).join("/")+e,{title:o,path:e}})}]}}])}(),function(){"use strict";angular.module("sorted").directive("buttonSelector",[function(){return{restrict:"A",scope:{ngModel:"=",digestCalcInput:"&"},link:function(e,t){e.updateValue=function(n){return e.ngModel=angular.element(n.target).val(),t.find("button").removeClass("selected"),angular.element(n.target).addClass("selected"),e.digestCalcInput(),e.ngModel},t.on("click","button",e.updateValue)}}}])}(),function(){"use strict";angular.module("sorted").directive("calcChart",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/calc-chart/calc-chart.html",restrict:"EA",scope:!1,controller:["$scope",function(e){function t(e){angular.element("#chart").kendoChart(e)}var n={transitions:!1};e.$on("chart:draw",function(o,r){e.chartData=r,t(_.merge({},n,r))}),e.$emit("chart:ready")}]}}])}(),function(){"use strict";angular.module("sorted").directive("calcDonut",["siteConfig","$window",function(e,t){return{templateUrl:e.APP_PATH+"app/components/calc-donut/calc-donut.html",restrict:"EA",scope:{calculator:"=",model:"="},link:function(n){n.siteConfig=e,n.$watch("model",function(){n.model&&n.drawChart()},!0),n.drawChart=function(){var e=100,t=10;n.model.ready&&n.model.result[n.model.graphic.interest.model]&&(e=n.model.fields[n.model.graphic.amountOwed.model].value,t=parseFloat(n.model.result[n.model.graphic.interest.model]).toFixed(2)),n.chartConfig={transitions:!1,legend:{visible:!1},chartArea:{background:""},seriesDefaults:{type:"donut",startAngle:180},series:[{name:"Result",overlay:{gradient:"none"},padding:20,data:[{category:"Amount you owe",value:e,color:n.model.graphic.amountOwed.color},{category:"Interest you'll pay",value:t,color:n.model.graphic.interest.color}],labels:{visible:!1}}],legendItemClick:function(e){e.preventDefault()},legendItemHover:function(e){e.preventDefault()},tooltip:{visible:!0,template:"#= category # (#= series.name #): $#= value #"}},angular.element(".donut-chart").kendoChart(n.chartConfig)},angular.element(t).bind("resize",n.drawChart)}}}])}(),function(){"use strict";angular.module("sorted").directive("calcGraphic",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/calc-graphic/calc-graphic.html",restrict:"EA",scope:{calculator:"=",model:"="},link:function(e,t){e.setHouseHeight=function(){var n=t.find(".graphic-house-dark-img")[0].offsetWidth/390*292,o=n*((100-e.interestPercent)/100);if(t.find(".graphic-house-light").css({height:o+"px"}),e.interestPercent<30)t.find(".graphic-interest").css({top:"-50px"}),t.find(".graphic-interest").removeClass("font-white").addClass("font-purple");else{var r=.4*e.interestPercent;t.find(".graphic-interest").css({top:r+"%"}),t.find(".graphic-interest").removeClass("font-purple").addClass("font-white")}}},controller:["$scope","$window",function(t,n){t.siteConfig=e,t.$watch("model",function(){t.model&&(t.model.result.interest&&(t.interest=t.model.result.interest,t.total=t.model.result.total,t.interestPercent=t.interest/t.total*100),t.model.ready||(t.interestPercent=66),t.model.result.time?t.years=t.model.result.time:t.years=25,t.setHouseHeight())},!0),t.windowResize=function(){t.setHouseHeight()},angular.element(n).on("resize",t.windowResize)}]}}])}(),function(){"use strict";angular.module("sorted").directive("calcGraphicText",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/calc-graphic-text/calc-graphic-text.html",restrict:"EA",scope:{model:"="},controller:["$scope",function(e){e.$watch("model.result",function(){if(e.model){var t,n;switch(e.model.modelName){case"debtCalculatorModel":t=e.model.result.result_total,n=e.model.result.result_interest;break;case"mortgageToolModel":t=e.model.result.total,n=e.model.result.interest}var o=t-n;if(e.factor=(t/o).toFixed(2),isNaN(e.factor))e.showText=!1;else{e.showText=!0,e.wholeNumber=Math.floor(e.factor),e.numIcons=[];for(var r=0;r<e.wholeNumber;r++)e.numIcons.push(r);e.fraction=Math.floor(10*(e.factor-e.wholeNumber)),e.fraction>0&&(e.fractionSrc=e.model.graphic.smallIcons[e.fraction])}e.factor<1.2&&(e.showText=!1)}})}]}}])}(),function(){"use strict";angular.module("sorted").directive("calcInflation",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/calc-inflation/calc-inflation.html",restrict:"EA",scope:{field:"=",model:"=",label:"="},link:function(e,t){t.on("click",".input-select-button",function(t){var n=angular.element(t.currentTarget);if(n.data("related")){var o=angular.element(n.data("related"));o.parent().find(n.data("toggle")).addClass("_hidden"),o.removeClass("_hidden")}n.data("result")&&$(n.data("result")).toggleClass("_hidden"),e.model&&e.$apply(e.model.set(e.field.calcModel,n.data("value")))})}}}])}(),function(){"use strict";angular.module("sorted").directive("calcInput",["siteConfig","$window",function(e,t){return{templateUrl:e.APP_PATH+"app/components/calc-input/calc-input.html",restrict:"EA",scope:{calculator:"=",models:"=",updateParent:"&updateCurrentModel",digestCalc:"&"},link:function(e,n){n.on("click",".calc-input-add",function(t){var o=angular.element(t.currentTarget).attr("data-form-type"),r=n.find('.calc-input-group[data-form-type="'+o+'"]'),a=!1;angular.forEach(r,function(n){if(angular.element(t.currentTarget).addClass("_hidden"),angular.element(n).hasClass("selected")&&(angular.element(n).removeClass("selected"),angular.element(n).find(".calc-input-container").slideUp()),!a&&angular.element(n).hasClass("_hidden")){angular.element(n).removeClass("_hidden").addClass("selected"),angular.element(n).find(".calc-input-container").css("display","none").slideDown();var r=angular.element(n).find(".calc-heading").attr("data-unique");e.updateParent({formType:o,unique:r}),a=!0}})}),n.on("click",".calc-heading",function(t){var o=n.find(".calc-input-group.selected"),r=angular.element(t.currentTarget);if(!r.parent().hasClass("selected")){o.find(".calc-input-container").slideUp(),o.removeClass("selected"),r.parent().find(".calc-input-container").slideDown(),r.parent().addClass("selected");var a=r.attr("data-form-type"),i=r.attr("data-unique");e.updateParent({formType:a,unique:i})}}),n.on("click",".ui-results-link",function(e){e.preventDefault();var n=angular.element(".calc-output"),o=n.offset().top-80;t.scrollTo(0,o)}),e.digestCalcInput=function(){e.$digest(),e.digestCalc()}},controller:["$scope",function(t){t.currentGroup="creditCard",t.currentIndex=0,t.siteConfig=e,t.slider={options:{floor:1,ceil:3e7,showSelectionBar:!0}},t.doBlur=function(e){e.target.blur()}}]}}]).directive("noCommas",function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,o){o.$parsers.unshift(function(e){var t;return t=angular.copy(e),t=t.replace(/,/g,""),o.$viewValue=t,o.$render(),o.$commitViewValue(),t})}}}).directive("ngEnter",function(){return function(e,t,n){console.log("enter"),t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(n.ngEnter,{$event:t})}),t.preventDefault())})}})}(),function(){"use strict";angular.module("sorted").directive("calcInputButtonSelect",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/calc-input-button-select/input.html",restrict:"EA",scope:{field:"=",model:"=",label:"="},link:function(e,t){e.isSelected=function(e,t){return _.isNaN(parseInt(e))||_.isNaN(parseInt(t))?e==t:parseInt(e)===parseInt(t)},t.on("click",".input-select-button",function(t){var n=angular.element(t.currentTarget);if(n.data("related")){var o=angular.element(n.data("related"));o.parent().find(n.data("toggle")).addClass("_hidden"),o.removeClass("_hidden")}n.data("result")&&$(n.data("result")).toggleClass("_hidden"),e.model&&e.$apply(e.model.set(e.field.calcModel,n.data("value")))})}}}])}(),function(){"use strict";angular.module("sorted").directive("calcInputCheckbox",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/calc-input-checkbox/input.html",restrict:"EA",scope:{field:"=",model:"="},controller:["$scope",function(e){e.allowDecimal=!1}],link:function(e,t){t.on("focus","input",function(e){angular.element(e.currentTarget).select()})}}}])}(),function(){"use strict";angular.module("sorted").directive("calcInputIarSelect",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/calc-input-iar-select/input.html",restrict:"EA",scope:{field:"=",model:"="},link:function(e,t){t.on("click",".calc-input-btn-select-group button",function(t){var n=angular.element(t.currentTarget);if(n.closest(".btn-container").find("button.active").removeClass("selected"),n.addClass("selected"),n.data("related")){var o=angular.element(n.data("related"));o.parent().find(n.data("toggle")).addClass("_hidden"),o.removeClass("_hidden")}n.data("result")&&$(n.data("result")).toggleClass("_hidden"),e.$apply(e.model.set(e.field.calcModel,n.data("value")))})}}}])}(),function(){"use strict";angular.module("sorted").directive("calcInputInterestRate",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/calc-input-interest-rate/input.html",restrict:"EA",scope:{field:"=",model:"="},controller:["$scope",function(e){e.allowDecimal=!0,e.doBlur=function(e){e.target.blur()}}],link:function(e,t){t.on("focus","input",function(e){angular.element(e.currentTarget).select()})}}}])}(),function(){"use strict";angular.module("sorted").directive("calcInputLabel",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/calc-input-label/index.html",restrict:"EA",scope:{field:"="},controller:["$scope",function(e){e.getLabel=function(){return e.field.label?e.field.label:e.field.groupLabel?e.field.groupLabel:""}}]}}])}(),function(){"use strict";angular.module("sorted").directive("calcInputMoney",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/calc-input-money/input.html",restrict:"EA",scope:{field:"=",model:"=",validation:"=",form:"="},link:function(e,t){e.$watch("model.$attributes",function(){var t;void 0!==(t=angular.copy(e.model.$attributes[e.field.calcModel]))&&"string"==typeof t&&(t=t.replace(/,/g,""),e.model.$attributes[e.field.calcModel]!==t&&(e.model.$attributes[e.field.calcModel]=t))},!0),t.on("focus","input",function(e){angular.element(e.currentTarget).select()})},controller:["$scope",function(e){e.doBlur=function(e){e.target.blur()}}]}}])}(),function(){"use strict";angular.module("sorted").directive("calcInputNumber",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/calc-input-number/input.html",restrict:"EA",scope:{field:"=",model:"="},link:function(e,t){t.on("focus","input",function(e){angular.element(e.currentTarget).select()})},controller:["$scope",function(e){e.doBlur=function(e){e.target.blur()}}]}}])}(),function(){"use strict";angular.module("sorted").directive("calcInputQuiz",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/calc-input-quiz/calc-input-quiz.html",restrict:"EA",scope:{calculator:"=",models:"=",updateParent:"&updateCurrentModel",digestCalc:"&"},link:function(e,t){t.on("click",".calc-heading",function(n){var o=t.find(".calc-input-group.selected"),r=angular.element(n.currentTarget);if(!r.parent().hasClass("selected")){o.find(".calc-input-container").slideUp(),o.removeClass("selected"),r.parent().find(".calc-input-container").slideDown(),r.parent().addClass("selected");var a=r.attr("data-form-type"),i=r.attr("data-unique");e.updateParent({formType:a,unique:i})}}),e.digestCalcInput=function(){e.$digest(),e.digestCalc()}},controller:["$scope","calcStaticValues",function(t,n){t.calcStaticValues=n,t.currentGroup="creditCard",t.currentIndex=0,t.siteConfig=e,t.slider={options:{floor:1,ceil:3e7,showSelectionBar:!0}}}]}}])}(),function(){"use strict";angular.module("sorted").directive("calcInputQuizInv",["siteConfig","$window",function(e,t){return{templateUrl:e.APP_PATH+"app/components/calc-input-quiz-inv/calc-input-quiz-inv.html",restrict:"EA",scope:{calculator:"=",model:"=",updateParent:"&updateCurrentModel",digestCalc:"&"},link:function(n,o){n.siteConfig=e,o.on("click",".ui-results-link",function(e){e.preventDefault();var n=angular.element(".calc-output"),o=n.offset().top-80;t.scrollTo(0,o)}),o.on("click",".calc-heading",function(e){var t=o.find(".calc-input-group.selected"),n=angular.element(e.currentTarget);n.parent().hasClass("selected")||(t.find(".calc-input-container").slideUp(),t.removeClass("selected"),n.parent().find(".calc-input-container").slideDown(),n.parent().addClass("selected"))}),n.digestCalcInput=function(){n.$digest(),n.digestCalc()}}}}])}(),function(){"use strict";angular.module("sorted").directive("calcInputSelectDate",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/calc-input-select-date/input.html",restrict:"EA",scope:{field:"=",model:"="},link:function(t,n){n.on("change","input",function(n){var o=angular.element(n.currentTarget).val(),r=moment(Date.parse(o));t.model.set(t.field.calcModel,r.isValid()?r.format(e.DATE_FORMAT):"")})},controller:["$scope",function(t){t.options={format:"dd/MM/yyyy",parseFormats:[e.DATE_FORMAT]},t.dateModel=t.model.get(t.field.calcModel),t.$watch("model.$attributes[field.calcModel]",function(){t.model&&(t.dateModel=t.model.get(t.field.calcModel))},!0)}]}}])}(),function(){"use strict";angular.module("sorted").directive("calcInputSelectYear",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/calc-input-select-year/input.html",restrict:"EA",scope:{field:"=",model:"="},link:function(e,t){t.on("change","input",function(t){var n=angular.element(t.currentTarget).data("kendoDatePicker").value(),o=moment(n).year();e.model.set(e.field.calcModel,o)})},controller:["$scope",function(e){e.options={format:"yyyy",start:"decade",depth:"decade",max:moment().toDate(),min:moment().add(moment.duration(-100,"years")).toDate(),footer:null},e.dateModel=e.model.get(e.field.calcModel),e.$watch("model.$attributes[field.calcModel]",function(){e.dateModel=e.model.get(e.field.calcModel)},!0)}]}}])}(),function(){"use strict";angular.module("sorted").directive("calcInputTitle",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/calc-input-title/index.html",restrict:"EA",scope:{field:"="}}}])}(),function(){"use strict";angular.module("sorted").directive("calcInputYears",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/calc-input-years/input.html",restrict:"EA",scope:{field:"=",model:"="},controller:["$scope",function(e){e.allowDecimal=!1,e.doBlur=function(e){e.target.blur()}}],link:function(e,t){t.on("focus","input",function(e){angular.element(e.currentTarget).select()})}}}])}(),function(){"use strict";angular.module("sorted").directive("calcNudgeSlider",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/calc-nudge-slider/slider.html",restrict:"EA",scope:{model:"=",nudge:"="},link:function(e){e.$on("slideEnded",function(){e.$apply(e.model.set(e.nudge.field,e.nudgeModel))})},controller:["$scope",function(e){e.nudgeModel=e.model.$attributes[e.nudge.field],e.$watch("model.result.$attributes",function(){console.error("nudge slider watch fired with no logic present")},!0)}]}}])}(),function(){"use strict";angular.module("sorted").directive("calcOutput",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/calc-output/calc-output.html",restrict:"EA",scope:{calculator:"=",model:"=",sliderOptions:"=",formType:"=",floor:"=",save:"&"},link:function(e,t){t.on("click",".calc-output-birthdate",function(t){t.preventDefault(),e.ageFormHidden=!1,e.$digest()}),t.on("click",".calc-output-save",function(){e.save()}),e.$watch("model.fields.nudgeInverseTerm.value",function(){if(e.model.fields.nudgeInverseTerm&&e.model.fields.totalTerm.value){var t=60-e.model.fields.nudgeInverseTerm.value;e.model.fields.totalTerm.value=t}}),e.$watch("model.fields.totalTerm.value",function(){if(e.model.fields.totalTerm){var t=60-e.model.fields.totalTerm.value;e.model.fields.nudgeInverseTerm.value=t}})},controller:["$scope","calcStaticValues","$timeout",function(e,t,n){console.log(e.model.fields[e.model.nudge.model],"result value"),e.ageFormHidden=!0,e.calcOutputConsts=t,e.$watch("model",function(){e.model&&(e.model.fields.monthBorn&&(e.model.fields.monthBorn.value||e.model.fields.yearBorn.value)?e.ageFormHidden=!1:e.ageFormHidden=!0,e.model.nudge&&(isNaN(e.model.nudge.options.ceil)?e.sliderOptions.ceil=e.model.fields[e.model.nudge.options.ceil].value:e.sliderOptions.ceil=e.model.nudge.options.ceil,angular.isDefined(e.model.fields.interestFreePeriod)&&(e.sliderOptions.ceil-=e.model.fields.interestFreePeriod.value),angular.isDefined(e.model.fields.deferredPaymentPeriod)&&(e.sliderOptions.ceil-=e.model.fields.deferredPaymentPeriod.value),e.model.nudge.options.ceilFactor&&(e.sliderOptions.ceil=e.sliderOptions.ceil/e.model.nudge.options.ceilFactor),isNaN(e.model.nudge.options.floor)&&e.model.nudge.options.floor!==!1?e.sliderOptions.floor=e.model.fields[e.model.nudge.options.floor].value:e.model.nudge.options.floor!==!1&&"repaymentAmount"===e.model.nudge.model?e.sliderOptions.floor=.02*e.model.fields.amountOwed.value:e.sliderOptions.floor=e.model.nudge.options.floor),console.log(e.model.fields[e.model.nudge.model],"updated value"),e.refreshSlider())},!0),e.$watch("floor",function(){e.sliderOptions.floor=e.floor}),e.$watch("sliderOptions",function(){e.sliderOptions.interval=10,console.log(e.sliderOptions),e.sliderOptions&&(e.slider={options:e.sliderOptions})}),e.refreshSlider=function(){n(function(){e.$broadcast("rzSliderForceRender")})}}]}}])}(),function(){"use strict";angular.module("sorted").directive("calcSelect",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/calc-select/select.html",restrict:"EA",scope:{field:"=",model:"=",label:"="},controller:["$scope",function(e){_.find(e.field.options,{selected:!0})&&e.model.set(e.field.calcModel,_.find(e.field.options,{selected:!0}).value)}]}}])}(),function(){"use strict";angular.module("sorted").directive("calcSelectMonths",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/calc-select-months/select.html",restrict:"EA",scope:{field:"=",model:"="},controller:["$scope",function(e){e.options=[{label:"January",value:1},{label:"February",value:2},{label:"March",value:3},{label:"April",value:4},{label:"May",value:5},{label:"June",value:6},{label:"July",value:7},{label:"August",value:8},{label:"September",value:9},{label:"October",value:10},{label:"November",value:11},{label:"December",value:12}],e.months=["January","February","March","April","May","June","July","August","September","October","November","December"]}]}}])}(),function(){"use strict";angular.module("sorted").directive("calcStacked",["siteConfig","$window","$filter",function(e,t,n){return{templateUrl:e.APP_PATH+"app/components/calc-stacked/calc-stacked.html",restrict:"EA",scope:{models:"=",result:"="},link:function(e){var o=[{gap:.25,name:"NZ Superannuation",data:[220,null,null]},{gap:.25,name:"KiwiSaver",data:[150,null,null]},{gap:.25,name:"Other lump sum",data:[97,null,null]},{gap:.25,name:"Other income",data:[90,null,null]},{gap:.25,name:"Desired retirement income",data:[null,800,null]},{gap:.25,name:"Extra savings",data:[null,null,243]}],r=["You will have\n$557 per week","You will need\n$800 per week","You'll need to save\n$243 per week"];e.chartConfig={transitions:!1,legend:{visible:!1},seriesDefaults:{type:"column",stack:!0},series:o,valueAxis:{labels:{visible:!0},line:{visible:!1},minorGridLines:{visible:!1},title:{text:"Amount ($)"}},categoryAxis:{categories:r,majorGridLines:{visible:!1}},tooltip:{visible:!0,template:"#= series.name #: $#= value #"}},e.$watch("models",function(){e.models&&e.models.howClose&&(e.chartConfig.series[0].color=e.models.howClose.graphic.super.color,e.chartConfig.series[1].color=e.models.howClose.graphic.kiwiSaver.color,e.chartConfig.series[2].color=e.models.howClose.graphic.otherLump.color,e.chartConfig.series[3].color=e.models.howClose.graphic.otherIncome.color,e.chartConfig.series[4].color=e.models.howClose.graphic.liveOn.color,e.chartConfig.series[5].color=e.models.howClose.graphic.deficitLump.color,e.drawChart(!1))}),
e.$watch("result",function(){e.result?e.drawChart(!0):e.drawChart(!1)},!0),e.drawChart=function(t){if(t){var a,i=parseInt(e.models.howMuch.fields.lifestyleFreq.value);switch(i){case 1:a="year";break;case 12:a="month";break;case 26:a="fortnight";break;case 52:a="week"}var l=e.result.income_nz_superannuation+e.result.income_kiwisaver_lump_sum+e.result.income_other_lump_sums+e.result.income_other_income_sources,s="You will have\n"+n("currency")(l,"$",0)+" per "+a,u="You will need\n"+n("currency")(e.result.desired_retirement_income,"$",0)+" per "+a,c="You'll need to save\n"+n("currency")(e.result.deficit_lump_amount,"$",0)+" per "+a;0!==e.result.deficit_lump_amount?(e.chartConfig.categoryAxis.categories=[s,u,c],e.chartConfig.series[0].data=[e.result.income_nz_superannuation,null,null],e.chartConfig.series[1].data=[e.result.income_kiwisaver_lump_sum,null,null],e.chartConfig.series[2].data=[e.result.income_other_lump_sums,null,null],e.chartConfig.series[3].data=[e.result.income_other_income_sources,null,null],e.chartConfig.series[4].data=[null,e.result.desired_retirement_income,null],e.chartConfig.series[5].data=[null,null,e.result.deficit_lump_amount]):(e.chartConfig.categoryAxis.categories=[s,u],e.chartConfig.series[0].data=[e.result.income_nz_superannuation,null],e.chartConfig.series[1].data=[e.result.income_kiwisaver_lump_sum,null],e.chartConfig.series[2].data=[e.result.income_other_lump_sums,null],e.chartConfig.series[3].data=[e.result.income_other_income_sources,null],e.chartConfig.series[4].data=[null,e.result.desired_retirement_income],e.chartConfig.series[5].data=[null,null])}else e.chartConfig.categoryAxis.categories=r,e.chartConfig.series=o;angular.element(".calc-stacked-chart").kendoChart(e.chartConfig)},angular.element(t).bind("resize",e.drawChart)}}}])}(),function(){"use strict";angular.module("sorted").directive("categoryFilter",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/category-filter/categoryFilter.html",restrict:"E",scope:{data:"=",search:"=",prefix:"=",type:"="},link:function(e,t){e.updateFilter=function(t){e.search=angular.element(t.target).attr("category")||"",e.$apply()},t.bind("click",".category-filter-link",function(t){"BUTTON"!==angular.element(t.target)[0].nodeName&&e.updateFilter(t)})}}}])}(),function(){"use strict";angular.module("sorted").directive("cmPrint",["$window","$analytics",function(e,t){return{restrict:"A",scope:{},link:function(n,o){o.on("click",function(n){t.eventTrack("button",{category:"print",action:"button"}),n.preventDefault(),e.print()})}}}])}();var app=angular.module("cmValidation");app.directive("cmRestrictNumbers",function(){return{restrict:"A",require:"?ngModel",scope:{allowDecimal:"="},link:function(e,t){e.keydown=function(t){return t.keyCode>=8&&t.keyCode<=46||(t.keyCode>=48&&t.keyCode<=57||(t.keyCode>=96&&t.keyCode<=105||!(!e.allowDecimal||190!==t.keyCode&&110!==t.keyCode)))},t.on("keydown",e.keydown)}}}),angular.module("sorted").directive("cmSelect",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/cm-select/cm-select.html",scope:{cmOptions:"=",cmPlaceholder:"@",ngModel:"="},link:function(e,t){t.on("click",".cm-option",function(t){e.$apply(function(){e.ngModel=t.target.attributes["cm-value"].value})}),e.$watch("ngModel",function(n){null===n?e.placeholder=e.cmPlaceholder:n&&t.find(".cm-option").length>1&&(e.placeholder=t.find('.cm-option[cm-value="'+n+'"]')[0].attributes["cm-label"].value)});var n=e.$watch("cmOptions",function(){var t=_.find(e.cmOptions,{value:e.ngModel});t&&(e.placeholder=t.label,n())})},controller:["$scope",function(e){e.options=e.cmOptions,e.placeholder=e.cmPlaceholder}]}}]),function(){"use strict";angular.module("sorted").directive("cmSpinner",["siteConfig","$rootScope",function(e,t){return{templateUrl:e.APP_PATH+"app/components/cm-spinner/cm-spinner.html",restrict:"E",scope:{},link:function(n,o){n.siteConfig=e,n.showSpinner=!1,t.$on("cm-spinner.start",function(){o.css("display","block")}),t.$on("cm-spinner.stop",function(){o.css("display","none")})}}}])}(),function(){"use strict";angular.module("sorted").directive("collapseToggler",function(){return{restrict:"A",link:function(e,t){t.on("click",function(){$(this).toggleClass("in").siblings(".collapse").toggleClass("in")})}}})}(),function(){"use strict";angular.module("sorted").factory("colourGenerator",["budgetingToolConfig",function(e){function t(e,t){if(t>=1)return e;var n=e.match(/[a-f\d]{2}/gi);return"#"+_.map(n,function(e){return(Math.floor(parseInt(e,16)*t)+Math.floor(255*(1-t))).toString(16)}).join("")}function n(e,t){var n=e.match(/[a-f\d]{2}/gi);return"rgba("+_.map(n,function(e){return parseInt(e,16)}).join(",")+","+t+")"}function o(){return i>=e.COLOUR_SET.length&&(i=0,a++),a>=e.COLOUR_GRADIENTS.length&&(a=0),t(e.COLOUR_SET[i++],e.COLOUR_GRADIENTS[a])}function r(e){return t(e,.5)}var a=0,i=0;return{getNextColour:o,getStartColour:r,hexToRgba:n}}])}();var app=angular.module("cmValidation"),ALPHANUM_REGEXP=/^[a-z0-9]+$/i;app.directive("cmAlphanum",function(){return{require:"ngModel",link:function(e,t,n,o){o.$validators.alphanum=function(e,t){return!!o.$isEmpty(e)||("false"===n.cmCondition||!!ALPHANUM_REGEXP.test(t))}}}});var app=angular.module("cmValidation"),EMAIL_REGEXP=/^[a-zA-Z0-9.+_-]+@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;app.directive("cmEmail",function(){return{require:"ngModel",link:function(e,t,n,o){o.$validators.email=function(e,t){return!!o.$isEmpty(e)||("false"===n.cmCondition||!!EMAIL_REGEXP.test(t))}}}});var app=angular.module("cmValidation"),INTEGER_REGEXP=/^\-?\d+$/;app.directive("cmInteger",function(){return{require:"ngModel",link:function(e,t,n,o){o.$validators.integer=function(e,t){return!!o.$isEmpty(e)||("false"===n.cmCondition||!!INTEGER_REGEXP.test(t))}}}});var app=angular.module("cmValidation");app.directive("cmMatch",function(){return{require:"ngModel",link:function(e,t,n,o){var r=t.parents("form").attr("name"),a=e[r][n.cmMatch];o.$validators.match=function(e){return!!o.$isEmpty(e)||("false"===n.cmCondition||a.$viewValue===e)}}}});var app=angular.module("cmValidation"),INTEGER_REGEXP=/^\-?\d+$/;app.directive("cmMaxamount",function(){return{require:"ngModel",link:function(e,t,n,o){o.$validators.maxamount=function(e,t){return!!o.$isEmpty(e)||("false"===n.cmCondition||!!(INTEGER_REGEXP.test(t)&&t<=parseInt(n.cmMaxamount)))}}}});var app=angular.module("cmValidation");app.directive("cmMaxlength",function(){return{require:"ngModel",link:function(e,t,n,o){o.$validators.maxlength=function(e){return!!o.$isEmpty(e)||("false"===n.cmCondition||e.length<=n.cmMaxlength)}}}});var app=angular.module("cmValidation"),INTEGER_REGEXP=/^\-?\d+$/;app.directive("cmMinamount",function(){return{require:"ngModel",link:function(e,t,n,o){o.$validators.minamount=function(e,t){return!!o.$isEmpty(e)||("false"===n.cmCondition||!!(INTEGER_REGEXP.test(t)&&parseInt(t)>=parseInt(n.cmMinamount)))}}}});var app=angular.module("cmValidation");app.directive("cmMinlength",function(){return{require:"ngModel",link:function(e,t,n,o){o.$validators.minlength=function(e){return!!o.$isEmpty(e)||("false"===n.cmCondition||e.length>=n.cmMinlength)}}}});var app=angular.module("cmValidation"),INTEGER_REGEXP=/[$]?\b[0-9,.]+$/i;app.directive("cmMoney",function(){return{require:"ngModel",link:function(e,t,n,o){o.$validators.money=function(e,t){return!!o.$isEmpty(e)||("false"===n.cmCondition||!!INTEGER_REGEXP.test(t))}}}});var app=angular.module("cmValidation");app.directive("cmNotempty",function(){return{require:"ngModel",link:function(e,t,n,o){o.$validators.notempty=function(e){return"false"===n.cmCondition||!((o.$isEmpty(e)||null===e)&&!t.hasClass("ng-pristine"))}}}});var app=angular.module("cmValidation"),REGEXP=/^(\d+\.?\d{0,2}|\.\d{1,2})$/;app.directive("cmPercent",function(){return{require:"ngModel",link:function(e,t,n,o){o.$validators.percent=function(e,t){return!!o.$isEmpty(e)||("false"===n.cmCondition||!!(REGEXP.test(t)&&t<=100))}}}});var app=angular.module("cmValidation"),PHONE_REGEXP=/^\+?\d+$/;app.directive("cmPhone",function(){return{require:"ngModel",link:function(e,t,n,o){o.$validators.phone=function(e,t){return!!o.$isEmpty(e)||("false"===n.cmCondition||!!PHONE_REGEXP.test(t))}}}});var app=angular.module("cmValidation"),STRING_REGEXP=/^[a-zA-Z0-9 \-\']+$/;app.directive("cmString",function(){return{require:"ngModel",link:function(e,t,n,o){o.$validators.string=function(e,t){return!!o.$isEmpty(e)||("false"===n.cmCondition||!!STRING_REGEXP.test(t))}}}}),function(){"use strict";angular.module("sorted").factory("commonDataCache",[function(){function e(e,t){o[e]=t}function t(e){return o.hasOwnProperty(e)?o[e]:null}function n(){o={}}var o={};return{set:e,get:t,clear:n}}])}(),function(){"use strict";angular.module("sorted").directive("compile",["$compile",function(e){return function(t,n,o){t.$watch(function(){return t.$eval(o.compile)},function(o){n.html(o),e(n.contents())(t)})}}])}(),function(){"use strict";angular.module("sorted").directive("conveyor",["$window",function(e){return{restrict:"A",scope:{},link:function(t,n){t.animating=!1,t.startX=0,t.startLeft=0;n.addClass("conveyor-outer");var o=n.find("[conveyor-mask]");o.addClass("conveyor-mask"),t.conveyorBelt=n.find("[conveyor-belt]"),t.conveyorBelt.addClass("conveyor-belt");var r=angular.element("<button>");r.addClass("conveyor-left disabled"),n.prepend(r);var a=angular.element("<button>");a.addClass("conveyor-right"),n.append(a),t.unlockAnimation=function(){t.animating=!1},t.leftClick=function(){var e=n.find("[conveyor-items]").width();if(a.removeClass("disabled"),t.conveyorBelt.prop("offsetLeft")>=-e){return t.animating=!0,TweenMax.to(t.conveyorBelt,1,{left:"0px",onComplete:t.unlockAnimation}),r.addClass("disabled"),0}return t.animating=!0,TweenMax.to(t.conveyorBelt,1,{left:"+="+e+"px",onComplete:t.unlockAnimation}),e},t.rightClick=function(){var e=n.find("[conveyor-items]").width(),i=n.find("[conveyor-items]").length,l=e*i,s=l-o.width();return r.removeClass("disabled"),t.conveyorBelt.prop("offsetLeft")<=-(s-e)?(t.animating=!0,TweenMax.to(t.conveyorBelt,1,{left:"-"+s+"px",onComplete:t.unlockAnimation}),a.addClass("disabled"),s):(t.animating=!0,TweenMax.to(t.conveyorBelt,1,{left:"-="+e+"px",onComplete:t.unlockAnimation}),e)},t.windowResize=function(){var e=n.find("[conveyor-items]").width(),r=n.find("[conveyor-items]").length,i=e*r,l=i-o.width();return t.conveyorBelt.prop("offsetLeft")<=-l&&t.conveyorBelt.css({left:"-"+l+"px"}),t.conveyorBelt.prop("offsetLeft")>-l&&a.removeClass("disabled"),l},t.touchStart=function(e){return t.startX=e.originalEvent.touches[0].clientX,t.startLeft=n.find(".conveyor-belt").prop("offsetLeft"),t.startX},t.touchMove=function(e){var i=e.originalEvent.touches[0].clientX,l=i-t.startX,s=t.startLeft+l,u=n.find("[conveyor-items]").width(),c=n.find("[conveyor-items]").length,d=u*c,g=d-o.width();return s<=0&&s>=-g&&n.find(".conveyor-belt").css({left:s+"px"}),s>=0?r.addClass("disabled"):r.removeClass("disabled"),s<=-g?a.addClass("disabled"):a.removeClass("disabled"),s},n.on("touchstart",t.touchStart),n.on("touchmove",t.touchMove),n.on("click",".conveyor-left",t.leftClick),n.on("click",".conveyor-right",t.rightClick),angular.element(e).on("resize",t.windowResize)}}}])}(),function(){"use strict";angular.module("sorted").directive("coverImage",function(){return{restrict:"A",scope:{},link:function(e,t,n){e.setCoverImage=function(){return!!n.coverImage&&(t.css({backgroundImage:"url("+n.coverImage+")"}),n.coverImage)},t.addClass("cover-image"),e.setCoverImage()}}})}(),function(){"use strict";angular.module("sorted").directive("editableElement",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,o,r){function a(e,t){var n=parseInt(t),o=n>3?"...":"";return n<e.length?e.substr(0,n-o.length)+o:e}var i=n,l=angular.element('<input type="text" class="budget-title-edit form-control">');r.$render=function(){l.val(r.$viewValue)},i.bind("click",function(){n.replaceWith(e(l)(t)),l[0].focus()}),l.bind("blur keyup",function(n){var s=l.val(),u=_.some([13,27],function(e){return e===n.which});("keyup"!==n.type||u)&&(o.editableMaxLength&&(s=a(s,o.editableMaxLength)),r.$setViewValue(s),l.replaceWith(e(i)(t)))})}}})}(),function(){"use strict";angular.module("sorted").service("calcService",["$http","apiEndpoints",function(e,t){return{save:function(n){var o={method:"POST",url:t.calcSave,data:n,headers:{"Content-Type":"application/json"}};return e(o)},update:function(n,o){var r={method:"PUT",url:t.calcSave+"/"+o,data:n,headers:{"Content-Type":"application/json"}};return e(r)},get:function(n){var o={method:"GET",url:t.calcSave+"/"+n,headers:{"Content-Type":"application/json"}};return e(o)},prepare:function(e){var t={};return angular.forEach(e,function(e,n){var o={};angular.forEach(e.fields,function(e,t){o[t]=e.value}),o.result=e.result,t[n]=o}),t},prepareCollection:function(e){var t=[];return angular.forEach(e.models,function(e){var n=e.attributes;n.result=e.result.attributes,t.push(n)}),t},load:function(e,t){return angular.forEach(e,function(n,o){Array.isArray(t[o].result)||(e[o].result=t[o].result,e[o].ready=!0),angular.forEach(n.fields,function(n,r){t[o]&&t[o][r]&&(e[o].fields[r].value=t[o][r])})}),e},loadCollection:function(e,t){angular.forEach(t,function(t,n){var o=e.get(n);angular.forEach(t,function(e,t){o.$attributes[t]=e})})}}}])}(),function(){"use strict";angular.module("sorted").service("calcInputService",["$http","calcInputs",function(e,t){return{get:function(n,o){var r={method:"GET",url:t[n],params:o};return e(r).success(function(){})}}}])}(),function(){"use strict";angular.module("sorted").service("formForwardService",["apiEndpoints","$location",function(e,t){return{forward:function(n,o){t.path(e[n]).search(o)}}}])}(),function(){"use strict";angular.module("sorted").service("saveCalcService",["$http","apiEndpoints",function(e,t){return{save:function(n){var o={method:"POST",url:t.calcSave,data:n,headers:{"Content-Type":"application/json"}};return e(o)},update:function(n){var o={method:"PUT",url:t.calcSave,data:n,headers:{"Content-Type":"application/json"}};return e(o)},prepare:function(e){var t={};return angular.forEach(e,function(e,n){var o={};angular.forEach(e.fields,function(e,t){o[t]=e.value}),o.result=e.result,t[n]=o}),t}}}])}(),function(){"use strict";angular.module("sorted").service("silverStripeService",["$http","apiEndpoints",function(e,t){function n(e,t){if(t===!0){var n=new Date(e.replace(" ","T"));return{time:n.getHours()+":"+n.getMinutes()+":"+n.getMilliseconds(),date:n.getDate(),month:o[n.getMonth()],year:n.getYear()-100}}return new Date(e)}var o={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"};return{get:function(n,o,r){var a={};return a=void 0!==o&&n?{method:"GET",url:t[n]+"/"+o,params:r}:{method:"GET",url:t[n],params:r},e(a)},formatDates:function(e,t){var o=[],r=!1;return angular.forEach(e,function(e,a){o[a]=e,e.hasOwnProperty("Created")&&(o[a].Created=n(e.Created,t),r=!0),e.hasOwnProperty("LastEdited")&&(o[a].LastEdited=n(e.LastEdited,t),r=!0),e.hasOwnProperty("PublishDate")&&(o[a].PublishDate=n(e.PublishDate,t),r=!0)}),!!r&&o}}}])}(),function(){"use strict";angular.module("sorted").directive("editorPicks",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/editor-picks/editor-picks.html",restrict:"E",scope:{data:"=",title:"@"},controller:["$scope","silverStripeService",function(){}]}}])}(),function(){"use strict";angular.module("sorted").directive("emailSignup",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/email-signup/email-signup.html",restrict:"E",scope:{}}}])}(),function(){"use strict";angular.module("budgetingTool").directive("imageFileModel",["$parse","budgetingToolConfig",function(e,t){return{restrict:"A",link:function(n,o,r){var a=e(r.imageFileModel),i=e(r.imagePreviewModel);o.bind("change",function(){if(_.includes(t.CATEGORY_IMAGE_TYPES,o[0].files[0].type)){var e=new FileReader;e.onload=function(e){n.$apply(function(){a.assign(n,o[0].files[0]),i.assign(n,e.target.result)})},e.readAsDataURL(o[0].files[0])}})}}}])}(),function(){"use strict";angular.module("sorted").directive("fontsAdjust",["siteConfig","fontStorage",function(e,t){return{templateUrl:e.APP_PATH+"app/components/fontsAdjust/fontsAdjust.html",restrict:"E",link:function(e){e.decrease=function(){t.getFont().fontSize>18&&t.decFontSize()},e.increase=function(){t.getFont().fontSize<25&&t.incFontSize()}}}}]).directive("adjustableFont",["fontStorage",function(e){return{restrict:"A",link:function(t,n){var o=parseInt(n.css("font-size"),10),r=parseInt(n.css("line-height"),10);e.setFont(o,r),n.addClass("adjustable-font");var a=function(){n.css("font-size",e.getFont().fontSize+"px"),n.css("line-height",e.getFont().lineHeight+"px")};t.$watch(function(){return e.getFont().fontSize},a)}}}])}(),function(){"use strict";angular.module("sorted").service("fontStorage",function(){var e=0,t=0;return{incFontSize:function(){e+=3,t+=3},decFontSize:function(){e-=3,t-=3},getFont:function(){return{fontSize:e,lineHeight:t}},setFont:function(n,o){e=n,t=o}}})}(),function(){"use strict";angular.module("sorted").directive("footer",["siteConfig","$rootScope",function(e,t){return{templateUrl:e.APP_PATH+"app/components/footer/footer.html",restrict:"E",scope:{},link:function(e,n){n.on("submit","#save-as-form",function(e){var n=angular.element(e.currentTarget).find("#save-as-title").val();t.$broadcast("save:calc",n)}),t.$on("show:save-as",function(e,t){angular.element().find("#save-as-title").val(t)})},controller:["$scope",function(t){t.siteConfig=e}]}}])}(),function(){"use strict";angular.module("sorted").directive("header",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/header/header.html",restrict:"EA",scope:{headerEndpoint:"@header"},controller:["$scope","silverStripeService","$rootScope",function(t,n,o){function r(e){200===e.status?(t.data=e.data[0],o.$emit("newPageLoaded",{title:t.data.Title,description:t.data.MetaDescription})):console.error("unexpected response status",e)}function a(e){console.error("failure",e)}"headerHome"===t.headerEndpoint?t.headerType="HOME":t.headerType="STANDARD",n.get(t.headerEndpoint).then(r,a),t.siteConfig=e}]}}])}(),function(){"use strict";angular.module("sorted").directive("headerShareButtons",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/header-share-buttons/headerShareButtons.html",restrict:"E",scope:{facebook:"@",twitter:"@",gplus:"@",email:"@"},link:function(t){t.siteConfig=e}}}])}(),function(){"use strict";angular.module("sorted").directive("headerSmall",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/header-small/header-small.html",restrict:"EA",scope:{data:"=",basetitle:"@"},controller:["$scope","$rootScope",function(t,n){t.siteConfig=e,void 0!==t.data&&n.$emit("newPageLoaded",{title:t.data.Title,description:t.data.MetaDescription})}]}}])}(),function(){"use strict";angular.module("sorted").directive("headerSmallTitle",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/header-small-title/header-small-title.html",restrict:"EA",scope:{data:"="},controller:["$scope","$rootScope",function(t,n){t.siteConfig=e;var o=t.$watch("data",function(){t.data&&(n.$emit("newPageLoaded",{title:t.data.Title,description:t.data.MetaDescription}),o())})}]}}])}(),function(){"use strict";angular.module("sorted").directive("loggedIn",["siteConfig",function(){return{restrict:"A",link:function(e){window.checkLogin(),e.$watch(function(){return sessionStorage.getItem("userData")},function(){sessionStorage.getItem("userData")&&window.fillLogged()})}}}])}(),function(){"use strict";angular.module("sorted").directive("modelLink",[function(){return{restrict:"A",scope:{modelLink:"=",ngModel:"="},link:function(e){e.linkToModel=function(){0===e.modelLink?e.ngModel=null:e.ngModel=e.modelLink},e.modelToLink=function(){e.modelLink=e.ngModel},e.$watch("modelLink",e.linkToModel,!0),e.$watch("ngModel",e.modelToLink)}}}])}(),function(){"use strict";angular.module("sorted").directive("navigation",["siteConfig","$window","$route","$rootScope",function(e,t,n,o){return{templateUrl:e.APP_PATH+"app/components/navigation/navigation.html",restrict:"E",scope:{},controller:["$scope",function(t){t.siteConfig=e}],link:function(e,n){e.selectNav=function(){var e=t.location.pathname+t.location.hash,o=n.find(".nav-link");"/"===e?angular.element('.nav-link[href="/"]').addClass("selected"):angular.forEach(o,function(t){"/"!==angular.element(t).attr("href")&&(e.search(angular.element(t).attr("href"))!==-1?angular.element(t).addClass("selected"):angular.element(t).removeClass("selected"))})},o.$on("$routeChangeSuccess",e.selectNav),e.selectNav()}}}])}(),function(){"use strict";angular.module("sorted").directive("notLoggedIn",[function(){return{restrict:"E",transclude:!0,scope:!1,template:'<p class="login-prompt" ng-if="!isLoggedIn"><ng-transclude></ng-transclude></p>'}}])}(),function(){"use strict";angular.module("sorted").directive("notSureBox",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/not-sure-box/not-sure-box.html",restrict:"E",scope:{},controller:["$scope",function(t){t.siteConfig=e}],link:function(){}}}])}(),function(){"use strict";angular.module("sorted").directive("parallax",["$window",function(e){return{restrict:"A",scope:{},link:function(t,n){var o=[.25,.2,.1,.025];t.maxItems=o.length,n.addClass("parallax-outer");var r=n.find("[parallax-layer]");r.addClass("parallax-inner");var a=_.sortBy(r,function(e){return e.attributes["parallax-layer"].value});t.moveElements=function(){var n=0;return angular.forEach(a,function(r,a){var i=0;i=a<t.maxItems?o[a]:o[t.maxItems-1],angular.element(r).css({top:e.scrollY*i}),n++}),n},angular.element(e).bind("scroll",t.moveElements)}}}])}(),function(){"use strict";angular.module("sorted").directive("popover",["siteConfig",function(e){return{restrict:"E",scope:{data:"="},link:function(e,t){e.attachTemplate(t),e.close=function(){t.find('[   data-toggle="popover"  ]').popover("hide")},t.on("click",".popover-close",e.close)},controller:["$scope","$compile","$sce","$templateRequest","$analytics",function(t,n,o,r,a){function i(e){a.eventTrack("view",{category:"glossary",action:"view"});var o=n(angular.element("<div>").html(e))(t);t.elm.find('[   data-toggle="popover"  ]').attr("data-template",o.html()),t.elm.find('[   data-toggle="popover"  ]').popover().on("click",function(e){e.preventDefault(),l||$(this).popover("show")})}var l=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;t.attachTemplate=function(n){t.elm=n;var a=o.getTrustedResourceUrl(e.APP_PATH+"app/components/popover/popover.html");r(a).then(i)}}]}}])}(),function(){"use strict";angular.module("sorted").directive("relatedContent",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/related-content/related-content.html",restrict:"E",scope:{data:"=",title:"@"},controller:["$scope",function(t){t.Title=t.title||"Related",t.siteConfig=e,t.showLink=function(e){switch(e.ClassName){case"SortedBlogPost":case"CampaignPage":case"ToolPage":return!1;default:return!0}}}]}}])}(),function(){"use strict";angular.module("sorted").directive("relatedLinks",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/relatedLinks/relatedLinks.html",restrict:"E",link:function(){},controller:["$scope","silverStripeService","$location",function(e,t,n){function o(t){200===t.status?e.relatedLinks=t.data:console.error("unexpected response status",t)}function r(e){console.error("failure",e)}e.getCategory=function(){return n.search().category};var a=t.get("relatedLinks");e.stripTags=function(e){return e.replace(/<\/?[^>]+>/gi,"")},a.then(o,r)}]}}])}(),function(){"use strict";angular.module("sorted").directive("saveTrigger",["Profile","$analytics",function(e,t){return{restricted:"A",link:function(n,o){var r;return r=function(){return e.get(!0).then(function(e){_.isEmpty(e)?angular.element("#login-modal").modal("show"):angular.element("#save-as-modal").modal("show")})},o.click(function(){t.eventTrack("calculator",{category:"save",action:"calculator"}),null===sessionStorage.getItem("userData")&&sessionStorage.setItem("triggerSave","true"),r()})}}}])}.call(this),function(){"use strict";angular.module("sorted").directive("scrollFade",["$window","$timeout",function(e,t){return{restrict:"A",scope:{},link:function(n,o){n.fadeElements=function(){return!!n.isInView()&&(o.find("[scroll-fade-item]").removeClass("scroll-fade-invisible"),!0)},n.isInView=function(){var t=o.height();return o[0].getBoundingClientRect().top+t/2<e.innerHeight},n.getItemsLength=function(){return o.find("[scroll-fade-item]").length},n.setupFades=function(t){return 0!==t&&(n.watchDestroy(),e.innerWidth>1024&&!n.isInView()&&(o.find("[scroll-fade-item]").addClass("scroll-fade-invisible scroll-fade-transitioner"),!0))},t(function(){n.watchDestroy=n.$watch(n.getItemsLength,n.setupFades),angular.element(e).bind("scroll",n.fadeElements)},100)}}}])}(),function(){"use strict";angular.module("sorted").directive("sequence",["$interval",function(e){return{restrict:"A",scope:{},link:function(t,n,o){var r,a=n.find("[sequence-order]");a.addClass("_invisible"),t.orderedElms=_.sortBy(a,function(e){return e.attributes["sequence-order"].value}),t.counter=0,t.fadeIn=function(){return angular.element(t.orderedElms[t.counter]).removeClass("_invisible"),++t.counter>=t.orderedElms.length&&(e.cancel(r),!0)},r=e(t.fadeIn,o.sequence)}}}])}(),function(){"use strict";angular.module("sorted").directive("slideshow",["$window","$interval","siteConfig",function(e,t,n){return{restrict:"A",scope:!0,link:function(n,o,r){function a(){return angular.element("[slideshow-item]").length}n.currentIndex=0,n.animating=!1,o.addClass("slideshow-outer");var i;o.find("[slideshow-mask]").addClass("slideshow-mask");var l=o.find("[slideshow-items]");l.addClass("slideshow-items");var s,u=0,c=0;n.animating=!1;n.unlockAnimation=function(){n.animating=!1},n.dotsClick=function(e){t.cancel(i),i=t(n.moveSlide,r.slideshowDelay);var o=parseInt(angular.element(e.currentTarget).attr("slideshow-index"));n.animating=!0,n.currentIndex=o,n.$digest();var a={left:"-"+c*o+"px",onComplete:n.unlockAnimation};TweenMax.to(l,1,a)},n.windowResize=function(){n.setWidths(),TweenMax.killAll(),l.css({left:"-"+c*n.currentIndex+"px"}),n.unlockAnimation()},n.configureDots=function(e){return e===n.currentIndex?"fa-circle font-orange":"fa-circle font-grey-light"},n.setWidths=function(){return c=o.find("[slideshow-mask]").width(),o.find("[slideshow-items]").width(c*u),o.find("[slideshow-item]").width(c),c},n.setupSlideshow=function(e){if(0===e)return!1;u=e,s=o.find("[slideshow-item]"),s.addClass("slideshow-item"),n.injectDots(o),n.setWidths()},n.moveSlide=function(){++n.currentIndex===o.find("[slideshow-item]").length&&(n.currentIndex=0);var e=0;return n.animating||0!==n.currentIndex?n.animating||(e=c*n.currentIndex,n.animating=!0,TweenMax.to(l,1,{left:"-"+e+"px",onComplete:n.unlockAnimation})):(n.animating=!0,TweenMax.to(l,1,{left:e+"px",onComplete:n.unlockAnimation})),e},i=t(n.moveSlide,r.slideshowDelay),o.on("click",".slideshow-dot",n.dotsClick),angular.element(e).on("resize",n.windowResize),n.$watch(a,n.setupSlideshow)},controller:["$scope","$compile","$sce","$templateRequest",function(e,t,o,r){function a(n){var o=t(angular.element("<div>").html(n).contents())(e);e.elm.append(o)}e.injectDots=function(t){e.elm=t;var i=o.getTrustedResourceUrl(n.APP_PATH+"app/components/slideshow/slideshow-dots.html");r(i).then(a)}}]}}])}(),function(){"use strict";angular.module("sorted").directive("socials",["siteConfig","$location",function(e,t){return{restricted:"E",templateUrl:e.APP_PATH+"app/components/socials/socials.html",scope:{data:"="},link:function(n){return n.siteConfig=e,n.url=t.absUrl(),n.$watch("data",function(e){void 0===e.ThumbnailImage.Filename&&(e.ThumbnailImage.Filename=e.CalcIcon.Filename),n.fbUrl="https://www.facebook.com/sharer/sharer.php?u=https://"+t.host()+e.Link}),$(".fb-share").click(function(e){return e.preventDefault(),window.FB.ui({method:"feed",name:n.data.Title,link:n.url,picture:"https://"+t.host()+"/"+n.data.ThumbnailImage.Filename,caption:n.url,description:n.data.MetaDescription,message:""}),!1})}}}])}.call(this),function(){"use strict";angular.module("sorted").directive("sortedTip",["siteConfig",function(e){return{restrict:"AE",templateUrl:e.APP_PATH+"app/components/sorted-tip/sortedTip.html",transclude:!0}}])}(),function(){"use strict";angular.module("sorted").directive("stickyBlock",function(){return{restrict:"A",link:function(e,t){var n,o;o=t.offset().top-97,window.outerWidth>1024&&(n=800,t.affix({offset:{top:o,bottom:n}}))}}})}.call(this),function(){"use strict";angular.module("sorted").filter("titleSlug",[function(){return function(e){return e.replace(/[\W]+/g,"-").toLowerCase()}}])}(),function(){"use strict";angular.module("sorted").filter("toTrusted",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}])}.call(this),function(){"use strict";angular.module("sorted").directive("toolTitle",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/components/tool-title/tool-title.html",restrict:"E",scope:{data:"="},controller:["$scope","$location",function(t,n){t.siteConfig=e,t.url=n.absUrl()}]}}])}(),function(){"use strict";angular.module("sorted").directive("vertMiddle",["$window",function(e){return{restrict:"A",scope:{vertDisableBelow:"@"},link:function(t,n,o){t.align=function(){if(t.vertDisableBelow&&e.innerWidth<=t.vertDisableBelow)return n.find("."+o.vertMiddle).css({marginTop:"0",marginBottom:"0"}),!1;var r=n.find("."+o.vertMiddle).height(),a=n.height(),i=(a-r)/2;return n.find("."+o.vertMiddle).css({marginTop:i+"px",marginBottom:i+"px"}),i},n.find(".vert-middle-preload").on("load",function(){t.align()}),t.align(),t.checkContentHeight=function(){return n.find("."+o.vertMiddle).height()},t.$watch(t.checkContentHeight,t.align),angular.element(e).bind("resize",t.align)}}}])}(),function(){"use strict";angular.module("sorted").directive("glossaryFilter",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/glossary/glossaryFilter/glossaryFilter.html",restrict:"E",scope:{data:"=",search:"="},link:function(e,t){e.alphabet=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],e.updateFilter=function(t){e.search.category=angular.element(t.target).attr("category"),e.$apply()},e.disable=function(t){if(e.data){return!e.data.Terms.filter(function(e){return e.category===t.toLowerCase()}).length}},t.bind("click",".categoryLink",function(t){e.updateFilter(t)})}}}])}(),function(){"use strict";angular.module("sorted").directive("glossaryList",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/glossary/glossaryList/glossaryList.html",restrict:"EA",scope:{data:"=",search:"="},link:function(){}}}])}(),function(){"use strict";angular.module("sorted").directive("dashboardPlates",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/dashboard/dashboardPlates/dashboardPlates.html",restrict:"E",scope:{},controller:["$scope","$http","userCalculators","silverStripeService",function(e,t,n,o){function r(t){200===t.status?e.blankPlatesCustom=t.data:console.error("unexpected response status",t)}function a(e){console.error("failure",e)}o.get("blankCalculatorsDefaults").then(r,a),n.getUsedCalcIds().then(function(t){e.usedId=t}),n.getBlankCalculators().then(function(t){e.data=t[0]}),e.$watch(function(){return n.usedCalcId},function(t){n.getBlankCalculators().then(function(n){e.usedId=t,e.data=n[0]})},!0),e.checkId=function(t){for(var n=0;n<e.usedId.length;n++)if(t===e.usedId[n])return!0}}]}}])}(),function(){"use strict";angular.module("sorted").directive("modalWindow",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/dashboard/modalWindow/modalWindow.html",restrict:"E"}}])}(),function(){"use strict";angular.module("sorted").directive("usedPlates",["siteConfig",function(e){return{
templateUrl:e.APP_PATH+"app/pages/dashboard/usedPlates/usedPlates.html",restrict:"E",scope:{},controller:["$scope","$http","userCalculators","silverStripeService",function(e,t,n,o){function r(t){200===t.status?e.usedPlatesCustom=t.data:console.error("unexpected response status",t)}function a(e){console.error("failure",e)}o.get("usedCalculatorsDefaults").then(r,a),n.getUsedCalculators().then(function(t){e.data=t.data}),e.deleteById=function(t){n.deleteById(t).then(function(){n.getUsedCalcIds().then(function(){n.getUsedCalculators().then(function(t){e.data=t.data}),$(".modal-"+t).modal("hide"),$(".modal-backdrop").remove()})})},e.hideUndone=function(){return!1}}]}}])}(),function(){"use strict";angular.module("sorted").directive("usersAvatar",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/dashboard/usersAvatar/usersAvatar.html",restrict:"E",controller:["userStorage","$scope",function(e,t){t.user=e.data}]}}]).directive("avatarFileModel",["$parse","userStorage",function(e,t){return{restrict:"A",link:function(n,o,r){var a=e(r.avatarFileModel),i=a.assign,l=function(){var e=n.myFile;t.updateUsersAvatar(e).then(function(){t.getProfile()})};o.bind("change",function(){n.$apply(function(){i(n,o[0].files[0])}),l()}),n.$watch(function(){return sessionStorage.getItem("userData")},function(e){n.user.Image=JSON.parse(e).Image})}}}])}(),function(){"use strict";angular.module("sorted").directive("usersHeader",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/dashboard/usersHeader/usersHeader.html",restrict:"E"}}])}(),function(){"use strict";angular.module("sorted").controller("GuidePageController",["$scope","silverStripeService","$location","$routeParams","$rootScope",function(e,t,n,o,r){function a(t){200===t.status?(e.data=t.data[0],r.$emit("newPageLoaded",{title:e.data.Title,description:e.data.MetaDescription})):console.error("unexpected response status",t)}function i(e){console.error("failure",e)}var l=o.guide;e.getCategory=function(){return n.search().category};var s=t.get("varPage",l);e.stripTags=function(e){return e.replace(/<\/?[^>]+>/gi,"")},s.then(a,i)}])}(),function(){"use strict";angular.module("sorted").config(["$routeProvider","siteConfig",function(e,t){e.when("/guides/:guide",{templateUrl:t.APP_PATH+"app/pages/guides/guide-page/guide-page.html",controller:"GuidePageController"})}])}(),function(){"use strict";angular.module("sorted").directive("guideSection",["siteConfig","$sce","$compile",function(e,t,n){return{templateUrl:e.APP_PATH+"app/pages/guides/guide-section/guide-section.html",restrict:"E",scope:{data:"="},link:function(e){e.$watch("data",function(){if(e.data&&_.has(e.data,"Content")){var o=n(t.trustAsHtml(e.data.Content).valueOf())(e)[0];angular.element(".sections-content").contents().remove(),angular.element(".sections-content").append(o)}})},controller:["$scope","$location","$anchorScroll",function(t,n,o){t.siteConfig=e,t.scrollTo=function(e){var t=n.hash();n.hash(e),o(),n.hash(t)}}]}}])}(),function(){"use strict";angular.module("sorted").directive("guidesArticles",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/guides/guides-articles/guidesArticles.html",restrict:"E",link:function(){},controller:["$scope","silverStripeService","$location",function(e,t,n){function o(t){200===t.status?e.guidesArticles=t.data:console.error("unexpected response status",t)}function r(e){console.error("failure",e)}e.getCategory=function(){return n.search().category};var a=t.get("guidesArticles");e.stripTags=function(e){return e.replace(/<\/?[^>]+>/gi,"")},a.then(o,r)}]}}])}(),function(){"use strict";angular.module("sorted").factory("guidesViewModel",["$filter","silverStripeService",function(e,t){function n(t){var n=t.data[0];return _.map(n.Categories,function(t){t.Slug=e("titleSlug")(t.Title)}),_.reduce(n.Categories,function(e,t){return t.Pages=_.filter(n.GuidePages,function(e){return _.includes(e.CategoryIDs,""+t.ID)}),e.push(t),e},[])}function o(e){return console.error("Failed to load guide pages",e),null}function r(){return t.get("guidesArticles").then(n,o)}return{build:r}}])}(),function(){"use strict";angular.module("sorted").directive("calcPreview",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/home/calc-preview/calc-preview.html",restrict:"E",link:function(){},controller:["$scope","silverStripeService","$rootScope","formForwardService","calcPreviewModel",function(e,t,n,o,r){function a(t){200===t.status?e.calcPreview=t.data[0]:console.error("unexpected response status",t)}function i(e){console.error("failure",e)}e.calcPreModel=r.fields,t.get("calcPreview").then(a,i),e.submitForm=function(t,n){if("calcPreviewForm"===n.formName){var a=r.prepare(e.calcPreModel);o.forward("calcPreviewPost",a)}},n.$on("cmForm.submit",e.submitForm)}]}}])}(),angular.module("sorted").factory("calcPreviewModel",function(){var e={salary:null,expense:null},t=function(e){return JSON.parse(JSON.stringify(e))},n={fields:t(e),reset:function(){n.fields=t(e)},prepare:function(e){var t={};return angular.forEach(e,function(e,n){var o=e.replace("$","").replace(",","");t[n]=parseFloat(o).toFixed(2)}),t}};return n}),function(){"use strict";angular.module("sorted").directive("campaigns",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/home/campaigns/campaigns.html",restrict:"E",link:function(){},controller:["$scope","silverStripeService",function(e,t){function n(t){200===t.status?e.campaigns=t.data:console.error("unexpected response status",t)}function o(e){console.error("failure",e)}e.touched=!1,e.selectedQuestion=void 0,t.get("campaigns").then(n,o)}]}}])}(),function(){"use strict";angular.module("sorted").directive("mustReads",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/home/must-reads/must-reads.html",restrict:"E",link:function(){},controller:["$scope","silverStripeService",function(e,t){function n(n){200===n.status?e.mustReads=t.formatDates(n.data,!0):console.error("unexpected response status",n)}function o(e){console.error("failure",e)}var r=t.get("mustReads");e.stripTags=function(e){return e.replace(/<\/?[^>]+>/gi,"")},r.then(n,o)}]}}])}(),function(){"use strict";angular.module("sorted").directive("popularTools",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/home/popular-tools/popular-tools.html",restrict:"E",link:function(){},controller:["$scope","silverStripeService",function(t,n){function o(e){200===e.status?t.tools=e.data:console.error("unexpected response status",e)}function r(e){console.error("failure",e)}t.siteConfig=e,n.get("popularTools").then(o,r)}]}}])}(),function(){"use strict";angular.module("sorted").directive("questionSelector",["$location","siteConfig",function(e,t){return{templateUrl:t.APP_PATH+"app/pages/home/question-selector/question-selector.html",restrict:"E",link:function(){},controller:["$scope","silverStripeService",function(e,t){function n(t){200===t.status?e.questions=t.data:console.error("unexpected response status",t)}function o(e){console.error("failure",e)}e.touched=!1,e.selectedQuestion=void 0,t.get("questionSelector").then(n,o)}]}}])}(),function(){"use strict";angular.module("sorted").directive("signupPrompt",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/home/signup-prompt/signup-prompt.html",restrict:"E",link:function(){},controller:["$scope","silverStripeService",function(e,t){function n(t){200===t.status?e.signupPrompt=t.data[0]:console.error("unexpected response status",t)}function o(e){console.error("failure",e)}t.get("signupPrompt").then(n,o)}]}}])}(),function(){"use strict";angular.module("sorted").directive("orderBookletsItem",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/order/order-booklets-item/orderBookletsItem.html",restrict:"E",link:function(){}}}])}(),function(){"use strict";angular.module("sorted").directive("orderPostersItem",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/order/order-posters-item/orderPostersItem.html",restrict:"E",link:function(){}}}])}(),function(){"use strict";angular.module("sorted").directive("orderSeminarsItem",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/order/order-seminars-item/orderSeminarsItem.html",restrict:"E",link:function(){}}}])}(),function(){"use strict";angular.module("sorted").factory("orderViewModel",["silverStripeService",function(e){function t(e){var t=e.data;return _.merge({},{Categories:t.Categories,Booklets:_.filter(t.Collateral,{CategoryID:"1"}),Seminars:_.filter(t.Collateral,{CategoryID:"2"}),Posters:_.filter(t.Collateral,{CategoryID:"3"})})}function n(e){return console.error("Failed to load collateral",e),null}function o(){return e.get("sortedCollateral").then(t,n)}return{build:o}}])}(),function(){"use strict";angular.module("sorted").config(["$routeProvider","siteConfig",function(e,t){e.when("/check-email",{templateUrl:t.APP_PATH+"app/pages/password/checkEmail/checkEmail.html"})}])}(),function(){"use strict";angular.module("budgetingTool").controller("BudgetingToolCtrl",["$document","$log","$scope","$timeout","$window","Alert","Budget","budgetingToolConfig","budgetEvents","budgetModal","budgetHandler","budgetView","Category","chartValues","periodAmount","Profile","siteConfig","totalValues","deviceDetector",function(e,t,n,o,r,a,i,l,s,u,c,d,g,f,m,p,h,v,C){function _(){var e=n.$watch("budget",function(t,o){angular.equals(t,o)||(e(),angular.copy(v.updateTotals(),n.budget.MasterCategories),n.breakdownChartSource.data(f.update()),_())},!0)}n.siteConfig=h,n.breakdownChartSource=new kendo.data.DataSource({data:f.update()}),n.budget=i.budget,n.alert=a.alert,n.closeAlert=a.close,n.getBudgetTemplate=d.getTemplate,n.dirty=i.isDirty,n.getIconPath=g.getIconPath,n.getRemainingDisplay=v.getRemainingDisplay,n.inlineEditCategory={},n.inlineEditValue=new BigNumber(0),n.openHeaderModal=u.headerModal,n.openCategoryModal=u.categoryModal,n.openMasterCategoryModal=u.masterCategoryModal,n.profile=p.get(),n.save=function(){i.startSaveAttempt(),p.get(!0).then(p.checkLogin).then(c.save)},_(),"safari"===C.browser&&u.safariModal();var b=n.$on("$locationChangeStart",function(e,t){s.changeLocationWarning(e,t,b)});o(function(){angular.element(".logout-button").on("click",function(e){e.preventDefault(),i.isDirty()?u.logoutWarningModal().then(function(){n.$destroy(),globalState.dirty=!1,logoutProfile()}):n.$destroy()})},0),n.$on("$destroy",function(){s.onDestroy(b)}),n.$on("closeMobileBreakdown",function(){n.breakdownMobileExpanded=!1})}])}(),function(){"use strict";angular.module("sorted").controller("DebtCalculatorController",["$scope","siteConfig","silverStripeService","calcInputService","$q","$rootScope","debtCalculatorModel","Profile","calcService","pageData","calcData","isLoggedIn","$routeParams","$analytics",function(e,t,n,o,r,a,i,l,s,u,c,d,g,f){e.siteConfig=t,e.debtCalculatorModel=i,e.calcTitle=null,e.loadId=null,e.interaction=!1,e.resultsInteraction=!1,e.loadChange=0,e.sliderOptions={floor:0,ceil:1e3,showSelectionBar:!0};var m=new SortedCalculator_Debt;e.updateCurrentModel=function(t,n){e.model=e.models[n],e.unique=n,e.formType=t,e.$digest()},e.runCalculation=function(t){var n,o,r;switch(e.formType){case"creditCard":n={cc:{cc1:t.data}},o=m.calculate(n),r=o.cc.cc1;break;case"hirePurchase":n={hp:{hp1:t.data}},o=m.calculate(n),r=o.hp.hp1;break;case"carLoan":n={cl:{cl1:t.data}},o=m.calculate(n),r=o.cl.cl1;break;case"personalLoan":n={pl:{pl1:t.data}},o=m.calculate(n),r=o.pl.pl1}return r},e.$watch("models",function(){if(e.model){e.loadChange>2?e.interaction||(f.eventTrack("startinteraction",{category:"calculators",label:"debt Calc"}),e.interaction=!0):e.loadChange++;var t=e.model.prepare(e.model.fields);t.ready?(console.log("recalc"),e.model.result=e.runCalculation(t),e.model.result.result_total?(e.resultsInteraction||(f.eventTrack("resultscalculated",{category:"calculators",label:"debt Calc"}),e.resultsInteraction=!0),e.model.ready=!0):(e.model.ready=!1,e.model.result={})):(e.model.ready=!1,e.model.result={})}},!0),e.createModels=function(t){var n={};return angular.forEach(t,function(t){var o=e[t.model];angular.forEach(t.inputs,function(r){n[r.unique]=o.getInstance(t),e.model||(e.formType=t.type,e.model=n[r.unique],e.unique=r.unique)})}),n},e.digestCalc=function(){e.$digest()},e.$on("save:calc",function(t,n){var o=s.prepare(e.models),r={CalcID:e.data.CalcID,Data:o,Title:n};e.calcTitle=n,e.loadedId?(r.ID=e.loadedId,s.update(r,e.loadedId).then(e.calcSaved,e.calcSavedFailed)):s.save(r).then(e.calcSaved,e.calcSavedFailed)}),e.calcSaved=function(t){angular.element("#save-as-modal").modal("hide"),e.loadId=t.data.ID},e.calcSavedFailed=function(e){console.error("failed ",e)},e.loadCalc=function(t){e.models=s.load(e.models,t.data.data.Data)},e.loadCalcFailed=function(e){console.error("failed ",e)},e.data=u.data[0],e.calculator=c.data,e.models=e.createModels(e.calculator),g.id&&d&&(e.loadedId=g.id,s.get(e.loadedId).then(e.loadCalc,e.loadCalcFailed))}])}(),angular.module("sorted").factory("debtCalculatorModel",[function(){function e(e,t){var n=!1;return e&&("string"==typeof e&&(e=e.replace("$","").replace(",","")),n=parseFloat(e).toFixed(t)),!(!n||isNaN(n))&&n}function t(e){var t=!1;return e&&("string"==typeof e&&(e=e.replace("$","").replace(",","")),t=parseInt(e)),!(!t||isNaN(t))&&t}var n=function(e){return JSON.parse(JSON.stringify(e))},o=function(o){this.fields={},this.result={},this.nudge=o.nudge,this.graphic=o.graphic,this.modelName=o.model;for(var r in o.fields)o.fields.hasOwnProperty(r)&&(this.fields[r]={calcModel:n(o.fields[r].calcModel),format:n(o.fields[r].format),required:n(o.fields[r].required),value:n(o.fields[r].value)});this.prepare=function(n){var o={},r=!0;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a].value;if(n[a].format)switch(n[a].format.type){case"INTEGER":i=t(n[a].value);break;case"FLOAT":i=e(n[a].value,n[a].format.decimals)}i||0===i||n[a].required!==!0||(r=!1),o[n[a].calcModel]=i}return{ready:r,data:o}}};return{getInstance:function(e){return new o(e)}}}]),function(){"use strict";angular.module("sorted").config(["$routeProvider","siteConfig","profileApiProvider","silverStripeServiceProvider","calcInputServiceProvider",function(e,t,n,o,r){var a=t.APP_PATH+"app/pages/tools/debt-calculator/debt-calculator.html",i={isLoggedIn:function(){return n.$get().isLoggedIn()},pageData:function(){return o.$get().get("debtCalculator")},calcData:function(){return r.$get().get("debtCalculator")}};e.when("/tools/debt-calculator",{templateUrl:a,controller:"DebtCalculatorController",resolve:i}).when("/tools/debt-calculator/:id",{templateUrl:a,controller:"DebtCalculatorController",resolve:i})}])}(),function(){"use strict";angular.module("sorted").controller("InvestmentPlannerController",["$scope","siteConfig","InvestmentPlannerModel","$timeout","$window","$routeParams","isLoggedIn","pageData","calcData","$analytics",function(e,t,n,o,r,a,i,l,s,u){e.siteConfig=t,e.data=l.data[0],e.calculator=s.data,e.dropdown=s.data.dropdown,e.model=function(){var t={},o=new r.SortedCalculator_InvestmentPlanner;return _.forEach(e.calculator.fields,function(e){_.has(e,"calcModel")&&(t[e.calcModel]=e.value),_.merge(t,{CalcID:"9"})}),new n(t,{calculator:o,parse:!0})}(),e.result=!1,e.interaction=!1,e.resultsInteraction=!1,e.model.on("change",function(t){e.interaction||(u.eventTrack("startinteraction",{category:"calculators",label:"investment planner"}),e.interaction=!0),t.isValid()&&t.calculate()&&(e.resultsInteraction||(u.eventTrack("resultscalculated",{category:"calculators",label:"investment planner"}),e.resultsInteraction=!0),t.result?(e.allReady=!0,e.result=t.result.$attributes.label):(e.allReady=!1,e.result=!1))}),_.has(a,"id")&&i&&e.model.set("ID",a.id).fetch({parse:!0,success:function(e,t,n){console.info("success: ",e,t,n)},error:function(e,t,n){console.error("error: ",e,t,n)}})}])}(),angular.module("sorted").factory("InvestmentPlannerModel",["siteConfig","NgBackboneModel",function(e,t){"use strict";var n=t.extend({hasResult:function(){return this.result.hasResult()}});return t.extend({idAttribute:"ID",intAttrs:[],floatAttrs:[],dateAttrs:[],defaults:{Title:"Investor kickstarter"},urlRoot:e.API_PREFIX,url:function(){var e=this.urlRoot+"/rest/tool";return this.isNew()?e:e+"/"+this.get("ID")},constructor:function(){this.result=new n,t.apply(this,arguments)},initialize:function(e,t){_.has(t,"calculator")&&(this.calculator=t.calculator)},parse:function(e,t){var n=this,o={},r=t||{};return o=_.has(e,"status")&&_.has(e,"data")?_.merge(_.cloneDeep(e.data.Data),_.pick(e.data,"ID")):e,_.has(o.result,"result")&&n.result.set(_.pick(o,"result"),r),_.omit(o,["result"])},calculate:function(){var e=this.calculator.calculate(_.clone(this.attributes));return this.result.set(e),this},hasResult:function(){return this.result.hasResult()},saveResult:function(){var e={parse:!0};return this.save(null,e)},validate:function(e){if(function(e){var t=[];return _.forEach(e,function(e,n){if(_.isEmpty(e))return t.push(n)}),t.length}(_.omit(e,["CalcID","ID"])))return"Invalid"},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return _.merge(e,{result:this.result.toJSON()}),_.merge({Data:e},_.pick(e,"CalcID","Title"))}})}]),function(){"use strict";angular.module("sorted").config(["$routeProvider","siteConfig","profileApiProvider","silverStripeServiceProvider","calcInputServiceProvider",function(e,t,n,o,r){var a=t.APP_PATH+"app/pages/tools/investment-planner/investment-planner.html",i={isLoggedIn:function(){return n.$get().isLoggedIn()},pageData:function(){return o.$get().get("investmentPlanner")},calcData:function(){return r.$get().get("investmentPlanner")}};e.when("/tools/investor-kickstarter",{templateUrl:a,controller:"InvestmentPlannerController",resolve:i}).when("/tools/investor-kickstarter/:id",{templateUrl:a,controller:"InvestmentPlannerController",resolve:i})}])}(),function(){"use strict";angular.module("sorted").controller("KiwisaverFeesController",["$scope","siteConfig","KiwisaverFeesModel","$timeout","$window","$routeParams","isLoggedIn","pageData","calcData","$analytics",function(e,t,n,o,r,a,i,l,s,u){e.siteConfig=t,e.data=l.data[0],e.calculator=s.data,e.resultsInteraction=!1,e.interaction=!1,e.model=function(){var t={},o=new r.SortedCalculator_KiwiSaver_Fees;return _.forEach(e.calculator.fields,function(n){_.has(n,"calcModel")&&(t[n.calcModel]=n.value),_.merge(t,_.pick(e.calculator,["CalcID"]))}),new n(t,{calculator:o,parse:!0})}(),e.model.on("change",function(t){e.interaction||(u.eventTrack("startinteraction",{category:"calculators",label:"KS fees"}),e.interaction=!0),t.isValid()&&(e.$emit("cm-spinner.start"),t.calculating=!0,t.calculate().then(function(){o(function(){e.resultsInteraction||(u.eventTrack("resultscalculated",{category:"calculators",label:"KS fees"}),e.resultsInteraction=!0),0===e.model.result.nominal.length&&0===e.model.result.todays.length?$.when(e.model.loadDummyData(e.calculator.dummyData)).then(function(){t.calculating=!0,e.$broadcast("output:redraw")}):e.$broadcast("output:redraw")},0)}))}),_.has(a,"id")?i&&e.model.set("ID",a.id).fetch({parse:!0}):(e.$emit("cm-spinner.start"),$.when(e.model.loadDummyData(e.calculator.dummyData)).then(function(){e.$broadcast("output:redraw")}))}])}(),angular.module("sorted").factory("KiwisaverFeesModel",["siteConfig","NgBackboneModel","NgBackboneCollection",function(e,t,n){"use strict";var o=t.extend({defaults:{compare:0},initialize:function(){this.on("change:compare",function(){},this)}}),r=n.extend({model:o}),a=n.extend({model:o}),i=t.extend({constructor:function(){this.todays=new a,this.nominal=new r,t.apply(this,arguments)},initialize:function(){this.listenTo(this.todays,"change",function(){this.trigger("result:change")})},parse:function(e,t){var n=[],o=[];return _.forEach(e,function(e){n.push(e.todays),o.push(e.nominal)}),this.todays.reset(n,t),this.nominal.reset(o,t),e},reset:function(e,t){return this.parse(e,t||{}),this},hasResult:function(){return!0},toJSON:function(){return _.merge({},{todays:this.todays.toJSON()},{nominal:this.nominal.toJSON()})}});return t.extend({idAttribute:"ID",defaults:{Title:"KiwiSaver fees calculator"},urlRoot:e.API_PREFIX,url:function(){var e=this.urlRoot+"/rest/tool";return this.isNew()?e:e+"/"+this.get("ID")},constructor:function(){this.result=new i,t.apply(this,arguments)},initialize:function(t,n){_.has(n,"calculator")&&(this.calculator=n.calculator),this.on("change:year_born change:month_born",function(t){if(t.has("year_born")&&t.has("month_born")){var n="01/"+t.get("month_born")+"/"+t.get("year_born"),o=moment(n,e.DATE_FORMAT);o.isValid()&&t.set("my_birthdate",o.format(e.DATE_FORMAT))}})},parse:function(e){var t={};return _.has(e,"status")&&_.has(e,"data")?(t=e.data,_.has(t,"Data")&&(t=t.Data,_.merge(t,_.pick(e.data.Data,"Title"),_.pick(e.data,"ID")))):t=e,_.omit(t,["result","Data"])},loadDummyData:function(e){return this.calculate(e)},calculate:function(e){var t=this,n=$.Deferred(),o=e||this._prepare();return $(document).on("ksfcalcend",function(){return t.calculating=!1,t.result.reset(t.calculator.model.results),n.resolve(t)}),this.calculator.calculate(o),n.promise()},_prepare:function(){var e=_.clone(this.attributes);return _.merge(e,{employment:"1"===e.employment,iac:1===e.iac})},hasResult:function(){return this.result.nominal.length>0&&this.result.todays.length>0},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return _.merge({Data:e},_.pick(e,"CalcID"),_.has(e,"Title")?_.pick(e,"Title"):{Title:"My KiwiSaver Fees calculation"})},validate:function(e){function t(e){var t=[];return _.forEach(e,function(e,n){if(!_.isNumber(e)&&_.isEmpty(e))return t.push(n)}),t.length}if("1"===e.employment){if(t(_.omit(e,["earnings","contrib","contrib_freq"])))return"Invalid"}else if("1"!==e.employment&&t(_.omit(e,["salary","employee_contrib","employer_contrib"])))return"Invalid"}})}]),function(){"use strict";angular.module("sorted").config(["$routeProvider","siteConfig","profileApiProvider","silverStripeServiceProvider","calcInputServiceProvider",function(e,t,n,o,r){var a=t.APP_PATH+"app/pages/tools/kiwisaver-fees/kiwisaver-fees.html",i={isLoggedIn:function(){return n.$get().isLoggedIn()},pageData:function(){return o.$get().get("kiwisaverFees")},calcData:function(){return r.$get().get("kiwisaverFees")}};e.when("/tools/kiwisaver-fees-calculator",{templateUrl:a,controller:"KiwisaverFeesController",resolve:i}).when("/tools/kiwisaver-fees-calculator/:id",{templateUrl:a,controller:"KiwisaverFeesController",resolve:i})}])}(),function(){"use strict";angular.module("sorted").controller("KiwisaverSavingsController",["$scope","siteConfig","KiwiSaverSavingsModel","$window","$routeParams","isLoggedIn","pageData","calcData","$analytics",function(e,t,n,o,r,a,i,l,s){var u=new o.SortedCalculator_KiwiSaver;e.siteConfig=t,e.data=i.data[0],e.calculator=l.data,e.model=function(){var t={};return _.forEach(e.calculator.fields,function(e){t[e.calcModel]=e.value}),_.merge(t,_.pick(e.calculator,"CalcID")),new n(t,{parse:!0})}(l.data),e.resultsInteraction=!1,e.interaction=!1,e.loadChange=0,e.hasResult=function(){var t=!_.isEmpty(e.model)&&e.model.hasResult();return t&&(e.resultsInteraction||(s.eventTrack("resultscalculated",{category:"calculators",label:"KS savings"}),e.resultsInteraction=!0)),t},_.has(r,"id")&&a&&e.model.set("ID",r.id).fetch({parse:!0,success:function(e,t,n){},error:function(e,t,n){}}),e.$watch("model.$attributes",function(){e.loadChange>1?e.interaction||(s.eventTrack("startinteraction",{category:"calculators",label:"KS savings"}),e.interaction=!0):e.loadChange++,e.model.calculate(u)},!0)}])}(),angular.module("sorted").factory("KiwiSaverSavingsModel",["siteConfig","NgBackboneModel",function(e,t){"use strict";var n=t.extend({hasResult:function(){var e=this,t=["retirement_lump_sum","retirement_income","years_3","years_5"];return!!_.reduce(e.pick(t),function(e,t){return _.isNull(t)?e:_.add(e,parseInt(t))},0)}});return t.extend({idAttribute:"ID",intAttrs:[],floatAttrs:[],dateAttrs:[],defaults:{Title:"KiwiSaver savings calculator"},urlRoot:e.API_PREFIX,url:function(){var e=this.urlRoot+"/rest/tool";return this.isNew()?e:e+"/"+this.get("ID")},initialize:function(){this.result=new n,this.on("change:gender",function(){2===this.get("gender")?this.set("life_expectancy",91):1===this.get("gender")&&this.set("life_expectancy",94)})},parse:function(e,t){var n=this,o={},r={},a=t||{};return o=_.has(e,"status")&&_.has(e,"data")?_.merge(_.cloneDeep(e.data.Data),_.pick(e.data,"ID")):e,_.has(o.result,"result")&&n.result.set(_.pick(o,"result"),a),_.forEach(o,function(e,t){n.intAttrs.indexOf(t)>-1?r[t]=n._toInt(e):n.floatAttrs.indexOf(t)>-1?r[t]=n._toFloat(e):n.dateAttrs.indexOf(t)>-1?r[t]=n._toDate(e):r[t]=e}),_.omit(r,["result"])},calculate:function(e){var t=e.calculate(_.clone(this.attributes));return t?this.result.set(t):this.result.clear(),this},hasResult:function(){return this.result.hasResult()},saveResult:function(){var e={parse:!0};return this.save(null,e)},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return _.merge(e,{result:this.result.toJSON()}),_.merge({Data:e},_.pick(e,"CalcID","Title"))}})}]),function(){"use strict";angular.module("sorted").config(["$routeProvider","siteConfig","profileApiProvider","silverStripeServiceProvider","calcInputServiceProvider",function(e,t,n,o,r){var a={isLoggedIn:function(){return n.$get().isLoggedIn()},pageData:function(){return o.$get().get("kiwisaverSavingsCalculator")},calcData:function(){return r.$get().get("kiwisaverSavingsCalculator")}};e.when("/tools/kiwisaver-savings-calculator",{templateUrl:t.APP_PATH+"app/pages/tools/kiwisaver-savings-calculator/index.html",controller:"KiwisaverSavingsController",resolve:a}).when("/tools/kiwisaver-savings-calculator/:id/",{templateUrl:t.APP_PATH+"app/pages/tools/kiwisaver-savings-calculator/index.html",controller:"KiwisaverSavingsController",resolve:a})}])}(),function(){"use strict";angular.module("sorted").controller("MoneyPersonalityController",["$scope","siteConfig","MoneyPersonalityModel","$timeout","$window","$routeParams","isLoggedIn","pageData","calcData","$analytics",function(e,t,n,o,r,a,i,l,s,u){e.siteConfig=t,e.data=l.data[0],e.calculator=s.data,e.dropdown=s.data.dropdown,e.model=function(){var t={},o=new r.SortedCalculator_MoneyPersonalityProfiler;return _.forEach(e.calculator.fields,function(e){_.has(e,"calcModel")&&(t[e.calcModel]=e.value),_.merge(t,{CalcID:"10"})}),new n(t,{calculator:o,parse:!0})}(),e.result=!1,e.resultsInteraction=!1,e.interaction=!1,e.model.on("change",function(t){e.interaction||(u.eventTrack("startinteraction",{category:"calculators",label:"Money Personality"}),e.interaction=!0),t.isValid()&&t.calculate()&&(e.resultsInteraction||(u.eventTrack("resultscalculated",{category:"calculators",label:"Money Personality"}),e.resultsInteraction=!0),t.result?(e.allReady=!0,e.result=t.result.$attributes.code):(e.allReady=!1,e.result=!1))}),_.has(a,"id")&&i&&e.model.set("ID",a.id).fetch({parse:!0,success:function(e,t,n){console.info("success: ",e,t,n)},error:function(e,t,n){console.error("error: ",e,t,n)}})}])}(),angular.module("sorted").factory("MoneyPersonalityModel",["siteConfig","NgBackboneModel",function(e,t){var n=t.extend({hasResult:function(){return this.result.hasResult()}});return t.extend({idAttribute:"ID",intAttrs:[],floatAttrs:[],dateAttrs:[],defaults:{Title:"Money Personality Quiz"},urlRoot:e.API_PREFIX,url:function(){var e=this.urlRoot+"/rest/tool";return this.isNew()?e:e+"/"+this.get("ID")},constructor:function(){this.result=new n,t.apply(this,arguments)},initialize:function(e,t){_.has(t,"calculator")&&(this.calculator=t.calculator)},parse:function(e,t){var n=this,o={},r=t||{};return o=_.has(e,"status")&&_.has(e,"data")?_.merge(_.cloneDeep(e.data.Data),_.pick(e.data,"ID")):e,_.has(o.result,"result")&&n.result.set(_.pick(o,"result"),r),_.omit(o,["result"])},calculate:function(){var e=this.calculator.calculate(_.clone(this.attributes));return this.result.set({code:e}),this},hasResult:function(){return this.result.hasResult()},saveResult:function(){var e={success:function(e,t,n){console.info("SUCCESS: ",e,t,n)},error:function(e,t,n){console.error("ERROR: ",e,t,n)},parse:!0};return this.save(null,e)},validate:function(e){if(function(e){var t=[];return _.forEach(e,function(e,n){if(_.isEmpty(e))return t.push(n)}),t.length}(_.omit(e,["CalcID","ID"])))return"Invalid"},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return _.merge(e,{result:this.result.toJSON()}),_.merge({Data:e},_.pick(e,"CalcID","Title"))}})}]),function(){"use strict";angular.module("sorted").config(["$routeProvider","siteConfig","profileApiProvider","silverStripeServiceProvider","calcInputServiceProvider",function(e,t,n,o,r){var a=t.APP_PATH+"app/pages/tools/money-personality/money-personality.html",i={isLoggedIn:function(){return n.$get().isLoggedIn()},pageData:function(){return o.$get().get("moneyPersonality")},calcData:function(){return r.$get().get("moneyPersonality")}};e.when("/tools/money-personality-quiz",{templateUrl:a,controller:"MoneyPersonalityController",resolve:i}).when("/tools/money-personality-quiz/:id",{templateUrl:a,controller:"MoneyPersonalityController",resolve:i})}])}(),function(){"use strict";angular.module("sorted").config(["$routeProvider","siteConfig","profileApiProvider","silverStripeServiceProvider","calcInputServiceProvider",function(e,t,n,o,r){var a=t.APP_PATH+"app/pages/tools/net-worth-calculator/net-worth-calculator.html",i={isLoggedIn:function(){return n.$get().isLoggedIn()},pageData:function(){return o.$get().get("netWorthCalculator")},calcData:function(){return r.$get().get("netWorthCalculator")}};e.when("/tools/net-worth-calculator",{templateUrl:a,controller:"NetWorthCalculatorController",resolve:i}).when("/tools/net-worth-calculator/:id",{templateUrl:a,controller:"NetWorthCalculatorController",resolve:i})}])}(),function(){"use strict";angular.module("sorted").controller("NetWorthCalculatorController",["$scope","siteConfig","NetWorthCalculatorModel","$window","$routeParams","isLoggedIn","pageData","calcData","$analytics",function(e,t,n,o,r,a,i,l,s){function u(t){function n(e){var t=(new Date).getFullYear();return parseInt(e)?new Date(t+parseInt(e)).getFullYear():t}function o(e){if(0!==e.result.get("sum_total")||0!==e.result.get("debt_total")){a.push(e.result.get("total")),i.push(e.result.get("sum_total")),l.push(parseInt(e.result.get("debt_total")*-1));var t=e.get("identifier");s.push(n(t))}}var r=e.model.hasResult(),a=[],i=[],l=[],s=[],u=_.merge({},{categories:_.map([0,10,20],function(e){return n(e.value)})},{assets:t.dummyData.assets},{debts:t.dummyData.debts},{netWorth:[_.add(t.dummyData.assets[0],t.dummyData.debts[0]),_.add(t.dummyData.assets[1],t.dummyData.debts[1]),_.add(t.dummyData.assets[2],t.dummyData.debts[2])]});e.model.collection.forEach(function(e){o(e)});var c=_.merge({},t.options);return c.categoryAxis.categories=r?s:u.categories,_.merge(c,{series:[_.merge({},{data:r?i:u.assets,stack:"Savings/Debts",name:"Assets",color:"#20d4af"}),_.merge({},{data:r?l:u.debts,stack:"Savings/Debts",name:"Liabilities",color:"#ce0058"}),_.merge({},{data:r?a:u.netWorth,stack:"Total",name:"Your net worth",color:"#00afff"})]}),c}e.siteConfig=t,e.data=i.data[0],e.calculator=l.data,e.model=function(){var t=[],r=new o.SortedCalculator_Net_Worth;return _.forEach(e.calculator.models,function(e){var n={};_.forEach(e.fields,function(e){e.calcModel&&(n[e.calcModel]=e.value)}),_.merge(n,_.pick(e,["unique","identifier","id"])),t.push(n)}),new n({models:t,CalcID:e.calculator.CalcID},{parse:!0,calculator:r})}(),e.resultsInteraction=!1,e.interaction=!1,e.hasResult=function(){return e.model.hasResult()},e.$broadcast("chart:draw",u(_.cloneDeep(e.calculator.chart))),e.model.collection.on("change",function(t){e.interaction||(s.eventTrack("startinteraction",{category:"calculators",label:"networth"}),e.interaction=!0),t.calculate().hasResult()&&(e.resultsInteraction||(s.eventTrack("resultscalculated",{category:"calculators",label:"networth"}),e.resultsInteraction=!0),
e.$broadcast("chart:draw",u(_.cloneDeep(e.calculator.chart))))}),_.has(r,"id")&&a&&e.model.set("ID",r.id).fetch({parse:!0,success:function(e,t,n){console.info("success: ",e,t,n)},error:function(e,t,n){console.error("error: ",e,t,n)}}),e.$on("chart:ready",function(){e.$broadcast("chart:draw",u(e.calculator.chart))})}])}(),angular.module("sorted").factory("NetWorthCalculatorModel",["siteConfig","NgBackboneModel","NgBackboneCollection",function(e,t,n){var o=t.extend({calcResult:function(){var e=this;return _.reduce(e.attributes,function(e,t){return _.isNaN(t)?e:_.add(e,parseInt(t))},0)},hasResult:function(){var e=this.pick(["sum_total","debt_total"]);return e.sum_total>0||e.debt_total>0}}),r=t.extend({constructor:function(){this.result=new o,t.apply(this,arguments)},initialize:function(e,t){_.has(t,"calculator")&&(this.calculator=t.calculator)},calTotal:function(){return this.result.has("sum_total")?"$"+this.result.get("total"):""},parse:function(e,t){var n=this,o=t||{};return _.has(e.result,"result")&&n.result.set(_.pick(e,"result"),o),_.omit(e,["result"])},calculate:function(){var e=_.omit(_.clone(this.attributes),["id","identifier"]),t=this.calculator.calculate(e);return this.result.set(t),this},hasResult:function(){return this.result.hasResult()},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return _.merge(e,{result:this.result.toJSON()})}}),a=n.extend({model:r,hasResult:function(){return!!this.find(function(e){return e.hasResult()})}});return t.extend({idAttribute:"ID",urlRoot:e.API_PREFIX,defaults:{Title:"My NetWorth Savings Calculation"},url:function(){var e=this.urlRoot+"/rest/tool";return this.isNew()?e:e+"/"+this.get("ID")},constructor:function(){this.collection=new a,t.apply(this,arguments)},parse:function(e,t){var n=this,o={};return o=_.has(e,"status")&&_.has(e,"data")?e.data:e,_.has(o,"Data")?n.collection.set(o.Data,t):_.has(o,"models")&&n.collection.reset(o.models,t),_.omit(o,["Data","models"])},hasResult:function(){return this.collection.hasResult()},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return _.merge(e,{Data:this.collection.toJSON()})}})}]),function(){"use strict";angular.module("sorted").config(["$routeProvider","siteConfig","profileApiProvider","silverStripeServiceProvider","calcInputServiceProvider",function(e,t,n,o,r){var a=t.APP_PATH+"app/pages/tools/mortgage-tool/mortgage-tool.html",i={isLoggedIn:function(){return n.$get().isLoggedIn()},pageData:function(){return o.$get().get("mortgageTool")},calcData:function(){return r.$get().get("mortgageTool")}};e.when("/tools/mortgage-calculator",{templateUrl:a,controller:"MortgageToolController",resolve:i}).when("/tools/mortgage-calculator/:id",{templateUrl:a,controller:"MortgageToolController",resolve:i})}])}(),function(){"use strict";angular.module("sorted").controller("MortgageToolController",["$scope","siteConfig","MortgageToolModel","$window","$routeParams","isLoggedIn","pageData","calcData","$analytics",function(e,t,n,o,r,a,i,l,s){function u(){var t=[],r=new o.SortedCalculator_Mortgage_Manager,a=new o.SortedCalculator_Mortgage_Repayment;return _.forEach(e.calculator.inputs,function(n){var o={};_.forEach(e.calculator.fields,function(e){e.calcModel&&(o[e.calcModel]=e.value)}),_.merge(o,_.pick(n,["id","unique","title"])),t.push(o)}),new n({models:t,CalcID:e.calculator.CalcID},{parse:!0,mortgageRepayment:a,mortgageManager:r})}e.siteConfig=t,e.data=i.data[0],e.calculator=l.data,e.resultsInteraction=!1,e.interaction=!1,e.loadChange=0,e.validation={},e.model=function(){return _.isEmpty(e.model)?u():e.model}(),e.model.collection.on("change",function(t){e.loadChange>0?e.interaction||(s.eventTrack("startinteraction",{category:"calculators",label:"Mortgage"}),e.interaction=!0):e.loadChange++;try{t.calculate().hasResult()&&(console.log("result!"),e.resultsInteraction||(s.eventTrack("resultscalculated",{category:"calculators",label:"Mortgage"}),e.resultsInteraction=!0),e.$broadcast("output:update",t.collection.indexOf(t)))}catch(e){console.error("calculation failed ",e)}}),e.$on("input:changed",function(t,n){e.$broadcast("output:update",n)}),_.has(r,"id")&&a&&e.model.set({ID:_.toString(r.id)},{silent:!0}).fetch({parse:!0,success:function(){e.$broadcast("output:update",0)}})}])}(),angular.module("sorted").factory("MortgageToolModel",["siteConfig","NgBackboneModel","NgBackboneCollection",function(e,t,n){var o="",r=t.extend({initialize:function(e,t){_.has(t,"parent")&&(this.parent=t.parent),this.on("change:total",function(){var e=parseInt(this.get("total")),t=parseInt(this.parent.get("lump_sum_repayment"));if(_.isInteger(e)&&_.isInteger(t)){var n=_.add(e,t);this.set({total:n},{silent:!0})}}),this.listenTo(this.parent,"change:repayments1",function(){var e=_.round(this.parent.get("repayments1"));e!==_.round(this.get("min_repayment"))&&this.set({min_repayment:e},{silent:!0})})},calcResult:function(){var e=this;return _.reduce(e.pick(["total","interest"]),function(e,t){return _.isNaN(t)?e:_.add(e,parseInt(t))},0)},hasResult:function(){return this.calcResult()}}),a=t.extend({constructor:function(){this.result=new r(null,{parent:this}),t.apply(this,arguments)},initialize:function(e,t){_.has(t,"mortgageRepayment")&&(this.mortgageRepayment=t.mortgageRepayment),_.has(t,"mortgageManager")&&(this.mortgageManager=t.mortgageManager),this.on("change:year_born change:month_born",function(e){var t=_.clone(e.changed),n=_.transform(t,function(e,t,n){e[n]=isNaN(t)?null:parseInt(t)},{});e.set(n,{silent:!0})}),this.listenTo(this.result,"change",function(){this.trigger("result:change",this)}),this.listenTo(this.result,"change:min_repayment",function(){this.result.get("min_repayment")!==this.get("repayments1")&&this.set({repayments1:_.round(this.result.get("min_repayment"))},{silent:!0})}),this.listenTo(this.result,"change:time",function(){var e=parseInt(this.get("term1")),t=_.round(this.result.get("time"));t!==e&&this.set({term1:t},{silent:!0})})},parse:function(e,t){var n=this,o=t||{};return _.has(e.result,"result")&&n.result.set(_.pick(e,"result"),o),e&&(e.id=parseInt(e.unique.substr(e.unique.length-1))-1),_.omit(e,["result"])},calculate:function(){var e=this._getCalculator().calculate(this._prepare(this.attributes));return e.mortgage1.time=Math.ceil(e.mortgage1.time),this.result.set(e.mortgage1),this},calculateSlider:function(e){var t=this.pick(["loan1","interest1","freq1","lump_sum_repayment"]);return t.term1=e,t.lump_sum_repayment>0&&(t.loan1=t.loan1-t.lump_sum_repayment),this.mortgageRepayment.calculate(t).mortgage1.min_repayment},_getCalculator:function(){return this.hasChanged("repayments1")&&!this.hasChanged("term1")?o="mortgageManager":this.hasChanged("term1")&&!this.hasChanged("repayments1")&&(o="mortgageRepayment"),o||(o="mortgageManager"),this[o]},_prepare:function(e){var t,n,o=_.pick(_.clone(e),["loan1","interest1","repayments1","freq1","term1","lump_sum_repayment","year_born1","month_born1"]),r=_.merge(o,{loan1:o.loan1-o.lump_sum_repayment,lump_sum_repayment:0});return this.collection.models[0].attributes.year_born1&&this.collection.models[0].attributes.month_born1?(t=this.collection.models[0].attributes.month_born1,n=this.collection.models[0].attributes.year_born1):this.collection.models[1].attributes.year_born1&&this.collection.models[1].attributes.month_born1?(t=this.collection.models[1].attributes.month_born1,n=this.collection.models[1].attributes.year_born1):this.collection.models[2].attributes.year_born1&&this.collection.models[2].attributes.month_born1&&(t=this.collection.models[2].attributes.month_born1,n=this.collection.models[2].attributes.year_born1),t&&n&&(this.collection.models[0].attributes.month_born1=t,this.collection.models[0].attributes.year_born1=n,this.collection.models[1].attributes.month_born1=t,this.collection.models[1].attributes.year_born1=n,this.collection.models[2].attributes.month_born1=t,this.collection.models[2].attributes.year_born1=n),r.year_born1=n,r.month_born1=t,r},calcMinRepaymentAmt:function(){var e=this.pick(["loan1","interest1","freq1"]);return _.merge(e,{term1:30}),this.mortgageRepayment.calculate(e).mortgage1.min_repayment},hasResult:function(){return this.result.hasResult()},validate:function(){if(!this.hasResult())return"Invalid"},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return _.merge(e,{result:this.result.toJSON()})}}),i=n.extend({model:a,initialize:function(e,t){_.has(t,["parent"])&&(this.parent=t.parent)},hasResult:function(){return!!this.find(function(e){return e.hasResult()})}});return t.extend({idAttribute:"ID",urlRoot:e.API_PREFIX,defaults:{Title:"My Mortgage Calculator"},url:function(){var e=this.urlRoot+"/rest/tool";return this.isNew()?e:e+"/"+this.get("ID")},constructor:function(){this.collection=new i(null,{parent:this}),t.apply(this,arguments)},parse:function(e,t){var n=this,o={};return o=_.has(e,"status")&&_.has(e,"data")?e.data:e,_.has(o,"Data")?n.collection.set(o.Data,t):_.has(o,"models")&&n.collection.set(o.models,t),_.has(o,"ID")&&_.merge(o,{ID:_.toString(o.ID)}),_.omit(o,["Data","models"])},hasResult:function(){return this.collection.hasResult()},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return _.merge(e,{Data:this.collection.toJSON()})}})}]),function(){"use strict";angular.module("sorted").controller("PlanningToolController",["$scope","$rootScope","$q","$uibModal","planningData","siteConfig","defaultData","pageData","isLoggedIn","usersGoals","profileApi","$window","$routeParams",function(e,t,n,o,r,a,i,l,s,u,c,d,g){var f=!1;if(e.target="goals",e.notChanged=!0,e.editGoal=r.goalEditable,e.small=function(){return d.innerWidth<768},$.isEmptyObject(r.goals)&&(r.goals=i.data.data[0].Data,e.default=i.data.data[0].Data),e.goals=r.goals,s&&g.id){var m=u.data.filter(function(e){return e.ID.toString()===g.id.toString()});r.id=g.id,r.goals=m[0].Data,e.goals=r.goals}e.changeFlow=function(t){e.target===t?e.target="goals":e.target=t};var p=function(){return o.open({templateUrl:a.APP_PATH+"app/pages/tools/planning-tool/components/save-resolve/saveResolve.html",controller:"ModalInstanceSaveResolve"}).result},h=function(){p().then(function(){s&&g.id?r.update(e.goals,g.id):r.save(e.goals),f=!1})};e.saveGoals=function(){f=!0,c.isLoggedIn().then(function(e){e?h():$("#login-modal").modal("show")})},e.beforeAdd=function(){return o.open({templateUrl:a.APP_PATH+"app/pages/tools/planning-tool/components/add-modal/addModal.html",controller:"ModalInstanceAdd"}).result},e.beforeEdit=function(){return o.open({templateUrl:a.APP_PATH+"app/pages/tools/planning-tool/components/edit-modal/editModal.html",controller:"ModalInstanceEdit"}).result},e.beforeDelete=function(){return o.open({templateUrl:a.APP_PATH+"app/pages/tools/planning-tool/components/delete-modal/deleteModal.html",controller:"ModalInstanceDelete"}).result},angular.element(d).bind("resize",function(){e.target="goals",e.$digest()}),t.$watch("userLogged",function(){t.userLogged&&f?h():f=!1}),e.$watch("goals",function(t,n){angular.equals(t,n)||(e.notChanged=!1)},!0)}])}(),function(){"use strict";angular.module("sorted").config(["$routeProvider","siteConfig","silverStripeServiceProvider","planningDataProvider","profileApiProvider",function(e,t,n,o,r){var a={isLoggedIn:function(){return r.$get().isLoggedIn()},pageData:function(){return n.$get().get("goalPlanner")},defaultData:function(){return o.$get().getDefaultGoals()},usersGoals:function(){return o.$get().getUserGoals()}};e.when("/tools/goal-planner",{templateUrl:t.APP_PATH+"app/pages/tools/planning-tool/planningTool.html",controller:"PlanningToolController",resolve:a}).when("/tools/goal-planner/results",{templateUrl:t.APP_PATH+"app/pages/tools/planning-tool/components/goal-result/goalResult.html",controller:"PlanningResultsController"}).when("/tools/goal-planner/welcome",{templateUrl:t.APP_PATH+"app/pages/tools/planning-tool/components/goal-welcome/goalWelcome.html",controller:"GoalWelcomeController",resolve:a}).when("/tools/goal-planner/:id",{templateUrl:t.APP_PATH+"app/pages/tools/planning-tool/planningTool.html",controller:"PlanningToolController",resolve:a})}])}(),function(){"use strict";angular.module("sorted").factory("planningData",["$http",function(e){function t(){return d}function n(e){d=e}function o(){return e.get("/api/v0.1/goal/get")}function r(){return e.get("/api/v0.1/calculator/query?calcid="+c).then(function(e){return e},function(){return!1})}function a(n){var o={CalcID:c,Title:t(),Data:n};e.post("/api/v0.1/rest/tool/"+c,JSON.stringify(o))}function i(n,o){var r={CalcID:c,Title:t(),Data:n};e.put("/api/v0.1/rest/tool/"+o,JSON.stringify(r))}var l=[],s=[],u={},c="12",d="Goal Planner";return{id:"",goals:u,title:d,tempItem:l,tempCategory:"",goalEditable:s,setTitle:n,getUserGoals:r,getDefaultGoals:o,save:a,update:i}}])}(),function(){"use strict";angular.module("sorted").controller("RetirementPlannerController",["$scope","siteConfig","RetirementPlannerModel","$window","$routeParams","isLoggedIn","pageData","calcData","$analytics",function(e,t,n,o,r,a,i,l,s){e.siteConfig=t,e.data=i.data[0],e.calculator=l.data,e.resultsInteraction=!1,e.interaction=!1,e.loadChange=0,e.model=function(){var t={},r=new o.SortedCalculator_Retirement;return _.forEach(e.calculator,function(e){_.forEach(e.fields,function(e){_.has(e,"calcModel")&&(t[e.calcModel]=e.value)})}),_.merge(t,{CalcID:"1"}),new n(t,{parse:!0,calculator:r})}(),e.model.on("change",function(t){e.loadChange>0?e.interaction||(s.eventTrack("startinteraction",{category:"calculators",label:"retirement"}),e.interaction=!0):e.loadChange++,t.calculate().hasResult()&&(e.resultsInteraction||(console.log("resultsInteraction called!"),s.eventTrack("resultscalculated",{category:"calculators",label:"retirement"}),e.resultsInteraction=!0)),t.calculate().hasResult()}),_.has(r,"id")&&a&&e.model.set("ID",r.id).fetch({parse:!0})}])}(),angular.module("sorted").factory("RetirementPlannerModel",["siteConfig","NgBackboneModel",function(e,t){var n=t.extend({hasResult:function(){var e=this,t=["amount_total","retirement_income","desired_retirement_income"];return!!_.reduce(e.pick(t),function(e,t){return _.isNaN(t)?e:_.add(e,parseInt(t))},0)}});return t.extend({idAttribute:"ID",defaults:{Title:"Retirement planner"},urlRoot:e.API_PREFIX,url:function(){var e=this.urlRoot+"/rest/tool";return this.isNew()?e:e+"/"+this.get("ID")},constructor:function(){this.result=new n,t.apply(this,arguments)},initialize:function(e,t){_.has(t,"calculator")&&(this.calculator=t.calculator)},parse:function(e,t){var n=this,o={},r=t||{};return o=_.has(e,"status")&&_.has(e,"data")?_.merge(_.cloneDeep(e.data.Data),_.pick(e.data,"ID")):e,_.has(o.result,"result")&&n.result.set(_.pick(o,"result"),r),_.omit(o,["result"])},calculate:function(){var e=_.clone(this.attributes);e.required_savings_freq=e.lifestyle_freq,e.bridge_freq=e.lifestyle_freq,e.partner_super=e.your_super,e.your_other_income=e.your_other_income*e.your_other_income_freq,e.partner_other_income=e.partner_other_income*e.partner_other_income_freq;var t=this.calculator.calculate(e);return this.result.set(t),this},hasResult:function(){return 1===this.get("tab_viewed")&&this.result.hasResult()},calcSuper:function(){var e=390;return this.get("partner")&&(e=300),52/this.get("super_freq")*e},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return _.merge(e,{result:this.result.toJSON()}),_.merge({Data:e},_.pick(e,"CalcID","Title"))}})}]),function(){"use strict";angular.module("sorted").config(["$routeProvider","siteConfig","profileApiProvider","silverStripeServiceProvider","calcInputServiceProvider",function(e,t,n,o,r){var a=t.APP_PATH+"app/pages/tools/retirement-planner/retirement-planner.html",i={isLoggedIn:function(){return n.$get().isLoggedIn()},pageData:function(){return o.$get().get("retirementPlanner")},calcData:function(){return r.$get().get("retirementPlanner")}};e.when("/tools/retirement-planner",{templateUrl:a,controller:"RetirementPlannerController",resolve:i}).when("/tools/retirement-planner/:id",{templateUrl:a,controller:"RetirementPlannerController",resolve:i})}])}(),function(){"use strict";angular.module("sorted").controller("SavingsCalculatorController",["$scope","siteConfig","SavingsCalculatorModel","$window","$routeParams","isLoggedIn","pageData","calcData","calcService","$analytics",function(e,t,n,o,r,a,i,l,s,u){function c(t){var n="Term for ";return n+=e.getDurationDesc(t)}function d(e,n){var o=n.hasResult(),r=[],a=[],i=[],l=_.merge({},e.options);if(o){r.push(n.$attributes.initial_savings),r.push(n.$attributes.type?n.result.$attributes.total_saved-n.result.$attributes.interest:n.result.$attributes.contributions),a.push(0),a.push(n.result.$attributes.interest);var s=moment(n.$attributes.starting,t.DATE_FORMAT),u=moment(n.$attributes.ending,t.DATE_FORMAT),d=moment.duration(u.diff(s));i.push(n.$attributes.type?s.format("ll"):"Now"),i.push(n.$attributes.type?u.format("ll"):_.capitalize(d.humanize(!0))),_.merge(l,{series:[{name:"Amount deposited",data:r},{name:"Compound interest",data:a}],categoryAxis:{title:{text:c(n)},categories:i}})}return l}e.siteConfig=t,e.data=i.data[0],e.calculator=l.data,e.model=function(){var t=[],r=new o.SortedCalculator_Savings;return _.forEach(e.calculator.models,function(e){var n={};_.forEach(e.fields,function(e){e.calcModel&&(n[e.calcModel]=e.value)}),_.merge(n,_.pick(e,["unique","name","id","type"])),t.push(n)}),new n({models:t,CalcID:e.calculator.CalcID},{parse:!0,calculator:r})}(),e.resultsInteraction=!1,e.interaction=!1,e.model.collection.currentType=0,e.hasResult=function(){return e.model.hasResult()},e.getDurationDesc=function(e){var n="";if(0===e.$attributes.type)n+=e.$attributes.regular_duration_amount,n+=" ",n+=e.$attributes.regular_duration_amount_type;else{var o=moment(e.$attributes.ending,t.DATE_FORMAT),r=moment(e.$attributes.starting,t.DATE_FORMAT),a=r.diff(o);n+=moment.duration(a).humanize()}return n},e.$watch("model.collection.currentType",function(){e.currentModel=e.model.collection.get(e.model.collection.currentType),e.currentNudge=e.calculator.nudge[e.model.collection.currentType],e.$broadcast("chart:draw",d(e.calculator.chart,e.currentModel))}),e.model.collection.on("change",function(t){e.interaction||(u.eventTrack("startinteraction",{category:"calculators",label:"savings"}),e.interaction=!0),t.calculate().hasResult()&&(e.resultsInteraction||(u.eventTrack("resultscalculated",{category:"calculators",label:"savings"}),e.resultsInteraction=!0),e.$broadcast("chart:draw",d(e.calculator.chart,t)))}),e.$on("chart:ready",function(){e.$broadcast("chart:draw",d(e.calculator.chart,e.model.collection.get(e.calculator.controls[0].value)))}),e.$on("save:calc",function(t,n){var o=s.prepareCollection(e.model.collection),r={CalcID:e.data.CalcID,Data:o,Title:n};e.calcTitle=n,e.loadedId?(r.ID=e.loadedId,s.update(r,e.loadedId).then(e.calcSaved,e.calcSavedFailed)):s.save(r).then(e.calcSaved,e.calcSavedFailed)}),e.calcSaved=function(t){angular.element("#save-as-modal").modal("hide"),e.loadId=t.data.ID},e.calcSavedFailed=function(e){console.error("failed ",e)},e.loadCalc=function(t){s.loadCollection(e.model.collection,t.data.data.Data),t.data.data.Data[0].result.length},e.loadCalcFailed=function(e){console.error("failed ",e)},r.id&&a&&(e.loadedId=r.id,s.get(e.loadedId).then(e.loadCalc,e.loadCalcFailed))}])}(),angular.module("sorted").factory("SavingsCalculatorModel",["siteConfig","NgBackboneModel","NgBackboneCollection",function(e,t,n){var o=t.extend({hasResult:function(){var e=this,t=["contributions","total","interest"];return!!_.reduce(e.pick(t),function(e,t){return _.isNull(t)?e:_.add(e,parseInt(t))},0)}},{pick:["total","contributions","interest","period","age","total_saved","nudge_age","nudge_interest","nudge_period","nudge_total","nudge_total_saved"]}),r=t.extend({defaults:{saving_freq:52,starting:moment().format(e.DATE_FORMAT),Title:"Savings calculator"},intAttrs:["type","saving_amount","saving_freq","initial_savings","iar"],floatAttrs:["interest_rate","regular_amount","regular_duration_amount","nudge_dollars"],dateAttrs:["starting","ending"],urlRoot:e.API_PREFIX,url:function(){var e=this.urlRoot+"/calculator";return this.isNew()?e:e+"/"+this.get("id")},parse:function(e){var t=this,n={};return _.has(e.result,"result")&&(t.result.set(_.pick(e,"result")),e=_.omit(e,"result")),_.forEach(e,function(e,o){t.intAttrs.indexOf(o)>-1?n[o]=t._toInt(e):t.floatAttrs.indexOf(o)>-1?n[o]=t._toFloat(e):t.dateAttrs.indexOf(o)>-1?n[o]=t._toDate(e):n[o]=e}),n},constructor:function(){this.result=new o,t.apply(this,arguments)},initialize:function(t,n){_.has(n,"calculator")&&(this.calculator=n.calculator),this.on("change",function(t){if(0===t.get("type")&&parseInt(t.get("regular_duration_amount"))>0&&t.has("regular_duration_amount_type")&&t.has("starting")){var n=moment.duration(parseInt(t.get("regular_duration_amount")),t.get("regular_duration_amount_type")),o=moment(t.get("starting"),e.DATE_FORMAT).add(n).format(e.DATE_FORMAT);t.set({ending:o},{silent:!0})}}),this.on("change:ending",function(t,n){var o=/^\d{2}([\/])\d{2}([\/])\d{4}$/;n.length>-1&&!o.test(n)&&this.set({ending:moment(n,e.DATE_FORMAT)},{silent:!0})}),this.listenTo(this.result,"change",function(){this.trigger("result:change",this)})},calculate:function(){var e=this.calculator.calculate(_.clone(this.attributes));return this.result.set(e),this},hasResult:function(){if(0===this.attributes.type){var t;"weeks"===this.attributes.regular_duration_amount_type?t=52:"months"===this.attributes.regular_duration_amount_type?t=12:"years"===this.attributes.regular_duration_amount_type&&(t=1);if(1/t*this.attributes.regular_duration_amount<1/this.attributes.saving_freq)return this.result.attributes.total=0,this.result.attributes.total_saved=0,this.result.attributes.interest=0,this.result.attributes.period=0,!1}else{var n=moment(this.attributes.starting,e.DATE_FORMAT),o=moment(this.attributes.ending,e.DATE_FORMAT);if(moment.duration(o.diff(n)).asDays()<7)return this.result.attributes.total=0,this.result.attributes.total_saved=0,this.result.attributes.interest=0,this.result.attributes.period=0,!1}return this.result.hasResult()},saveResult:function(){var e={success:function(e,t,n){console.info("SUCCESS: ",e,t,n)},error:function(e,t,n){console.error("ERROR: ",e,t,n)}};return this.save(null,e)},loadResult:function(e){this.set("id",e);var t={success:function(e,t,n){console.info("SUCCESS: ",e,t,n)},error:function(e,t,n){console.error("ERROR: ",e,t,n)}};return this.fetch(t)},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return _.merge(e,{result:this.result.toJSON()}),_.merge({Data:e},_.pick(e,"CalcID","Title"))},_toInt:function(e){var t=!1;return _.isEmpty(e)?e:(_.isInteger(e)?t=e:"string"==typeof e&&(e=e.replace("$","").replace(",",""),t=parseInt(e)),_.isNaN(t)?0:t)},_toFloat:function(e,t){var n=!1;return e&&("string"==typeof e&&(e=e.replace("$","").replace(",","")),n=parseFloat(e).toFixed(t)),!(!n||_.isNaN(n))&&n},_toDate:function(t){var n=_.isEmpty(t)?!!_.isNull(t)&&moment():moment(t,e.DATE_FORMAT);return n?n.format(e.DATE_FORMAT):""}}),a=n.extend({model:r,hasResult:function(){return!!this.find(function(e){return e.hasResult()})}});return t.extend({idAttribute:"ID",urlRoot:e.API_PREFIX,defaults:{Title:"My Savings Calculation"},url:function(){var e=this.urlRoot+"/rest/tool";return this.isNew()?e:e+"/"+this.get("ID")},constructor:function(){this.collection=new a,t.apply(this,arguments)},parse:function(e,t){var n=this,o={};return o=_.has(e,"status")&&_.has(e,"data")?e.data:e,_.has(o,"Data")?n.collection.reset(o.Data,t):_.has(o,"models")&&n.collection.reset(o.models,t),_.omit(o,["Data","models"])},hasResult:function(){return this.collection.hasResult()},fetch:function(e){return t.prototype.fetch.apply(this,e)},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return _.merge(e,{Data:this.collection.toJSON()})}})}]),function(){"use strict";angular.module("sorted").config(["$routeProvider","siteConfig","profileApiProvider","silverStripeServiceProvider","calcInputServiceProvider",function(e,t,n,o,r){var a=t.APP_PATH+"app/pages/tools/savings-calculator/savings-calculator.html",i={isLoggedIn:function(){return n.$get().isLoggedIn()},pageData:function(){return o.$get().get("savingsCalculator")},calcData:function(){return r.$get().get("savingsCalculator")}};e.when("/tools/savings-calculator",{templateUrl:a,controller:"SavingsCalculatorController",resolve:i}).when("/tools/savings-calculator/:id",{templateUrl:a,controller:"SavingsCalculatorController",resolve:i})}])}(),function(){"use strict";angular.module("sorted").directive("toolsArticles",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/tools-articles/toolsArticles.html",restrict:"E",scope:!1,controller:["$scope","silverStripeService",function(e,t){function n(t){200===t.status?e.blankPlatesCustom=t.data:console.error("unexpected response status",t)}function o(e){console.error("failure",e)}t.get("blankCalculatorsDefaults").then(n,o)}]}}])}(),function(){"use strict";angular.module("sorted").factory("toolsViewModel",["$filter","$sce","silverStripeService",function(e,t,n){function o(e){return _.map(e,function(e){return e.hasOwnProperty("CustomContent")&&(e.TrustedCustomContent=t.trustAsHtml(e.CustomContent)),e})}function r(t){var n=t.data[0];return _.reduce(n.Categories,function(t,r){return r.Slug=e("titleSlug")(r.Title),r.Pages=o(_.filter(n.ToolPages,function(e){return _.includes(e.CategoryIDs,""+r.ID)})),t.push(r),t},[])}function a(e){return console.error("Failed to load tool pages",e),null}function i(){return n.get("toolsArticles").then(r,a)}return{build:i}}])}(),function(){"use strict";angular.module("budgetingTool").constant("budgetingToolConfig",{ALERT_TIMEOUT:2500,BREAKDOWN_CHART_OPTIONS:{chartArea:{height:300,width:300,margin:0,padding:0},transitions:!1,legend:{visible:!1},series:[{field:"dollars",overlay:{gradient:"none"},padding:10}],seriesDefaults:{type:"donut",startAngle:90},legendItemClick:function(e){e.preventDefault()},legendItemHover:function(e){e.preventDefault()},tooltip:{animation:{duration:0},template:"#= category #: $#= value > 0.25 ? value : 0 #",visible:!0}},BREAKDOWN_CHART_SPACER:.003,BROWSER_CLOSE_WARNING:"You're working on a budget that hasn't been saved.",BUDGET_PERIODS:[{Shortname:"weekly",Title:"Weekly",PerYear:52},{Shortname:"fortnightly",Title:"Fortnightly",PerYear:26},{Shortname:"fourweekly",Title:"4 Weekly",PerYear:13},{Shortname:"monthly",Title:"Monthly",PerYear:12},{Shortname:"yearly",Title:"Yearly",PerYear:1}],BUDGETING_TOOL_PREFIX:"app/pages",BUDGETING_TOOL_PATH:"/tools/budgeting-tool",BUDGETING_TOOL_IMAGE_PATH:"assets/images/tools/budgeting-tool",CALC_ID:"2",CATEGORY_IMAGE_TYPES:["image/gif","image/jpeg","image/png"],CATEGORY_TITLE_PLACEHOLDER:"Name your category",COLOUR_GRADIENTS:[.66,.33],COLOUR_SET:["#ce0058","#704c99","#cadc3c","#00afff","#006e96","#ffd700","#20d4af","#e18cc8"],DEFAULT_BUDGET_TITLE:"Your budget",DEFAULT_BUDGET_PERIOD:3,DEFAULT_BUDGET_VIEW:"list",IE_MAX_SAFE_INTEGER:9e12,INCOME_STREAM_PLACEHOLDER:"Income source",LOGIN_REMINDER_TIMEOUT:3e5,MAX_CATEGORY_TITLE:24,MAX_CATEGORY_TITLE_FIELD:50,MAX_STREAMS:5,VIEW_TEMPLATES:{grid:{title:"Grid View",plateTitle:"Visual with Images",icon:"grid.svg",plateIcon:"gridPlate.svg",url:"gridView.html"},list:{title:"List View",plateTitle:"List View",icon:"list.svg",plateIcon:"listPlate.svg",url:"listView.html"}}})}(),function(){"use strict";angular.module("budgetingTool").factory("Alert",["budgetingToolConfig",function(e){function t(e){angular.copy({},e)}function n(){angular.copy(l.NEED_ACCOUNT,s)}function o(){angular.copy(l.BUDGET_REPLACED,s)}function r(){angular.copy(l.BUDGET_RETAINED,s)}function a(){angular.copy(l.SAVE_SUCCEEDED,s)}function i(){angular.copy(l.SAVE_FAILED,s)}var l={BUDGET_REPLACED:{type:"warning",message:"Your old budget was replaced with your latest budget.",timeout:e.ALERT_TIMEOUT},BUDGET_RETAINED:{type:"warning",message:"We kept your old budget and discarded the new one.",timeout:e.ALERT_TIMEOUT},NEED_ACCOUNT:{type:"info",message:"Budget save failed. You need a free account to save a budget!",timeout:e.ALERT_TIMEOUT},SAVE_SUCCEEDED:{type:"success",message:"Budget saved successfully.",timeout:e.ALERT_TIMEOUT},SAVE_FAILED:{type:"danger",message:"Budget save failed! Please try again in a moment.",timeout:e.ALERT_TIMEOUT}},s={};return{alert:s,close:t,needAccount:n,replaced:o,retained:r,saved:a,saveFailed:i}}])}(),function(){"use strict";angular.module("budgetingTool").factory("Budget",["$log","$q","$timeout","$window","Alert","budgetingToolConfig","calculatorApi","budgetConverter",function(e,t,n,o,r,a,i,l){function s(){A=!0}function u(){A=!1,w=!1,globalState.dirty=!1}function c(){return angular.copy({IncomeStreams:[],Categories:[],Period:a.BUDGET_PERIODS[a.DEFAULT_BUDGET_PERIOD]},y),y}function d(){angular.copy({},y),angular.copy({},T)}function g(e){return i.del(e||T)}function f(){return _.isEmpty(y)?i.get(a.CALC_ID).then(function(e){return e?(angular.copy(e,T),angular.copy(l.process(angular.fromJson(e.Data)),y),w=!1,globalState.dirty=!1):(w=!0,globalState.dirty=!0),y}):y}function m(){if(A)return _.isEmpty(T)?i.get(a.CALC_ID).then(function(e){return e?t.reject({calculator:e}):i.save(a.CALC_ID,y).then(function(e){return e&&200!==e.status?t.reject():(u(),i.get(a.CALC_ID).then(function(e){angular.copy(e,T)}))})}):i.update(T,y)}function p(e){return g(e).then(m).then(function(){u(),r.replaced()})}function h(){return d(),f().then(function(){u(),r.retained()})}function v(e){w=!0,globalState.dirty=!0;var t=_.findIndex(y.MasterCategories,{ID:e.ID});angular.copy(e,y.MasterCategories[t])}function C(e){w=!0,globalState.dirty=!0,y.MasterCategories.splice(_.findIndex(y.MasterCategories,{ID:e}),1)}function b(){return A}function P(e){w=!0,globalState.dirty=!0,y.Title=e.Title,angular.copy(e.Period,y.Period),angular.copy(e.IncomeStreams,y.IncomeStreams)}var y={},T={},A=!1,w=!1;return{budget:y,clear:d,create:c,del:g,deleteMasterCategory:C,isDirty:function(){return w},setDirty:function(){w=!0},endSaveAttempt:u,get:f,keepCurrent:h,overwrite:p,save:m,startSaveAttempt:s,saveInProgress:b,updateHeaderFields:P,updateMasterCategory:v}}])}(),function(){"use strict";angular.module("budgetingTool").factory("Category",["Budget","siteConfig",function(e,t){function n(){return{ID:_.maxBy(_.flatMap(e.budget.MasterCategories,"Categories"),"ID").ID+1,Title:"",Icon:{Filename:""},Cents:new BigNumber(0),Default:!1,Period:angular.copy(e.budget.Period)}}function o(e){return e.IsCustom?e.Filename:t.APP_PATH+e.Filename}return{create:n,getIconPath:o}}])}(),function(){"use strict";angular.module("budgetingTool").factory("MasterCategory",["Budget","colourGenerator",function(e,t){function n(){return{ID:_.maxBy(e.budget.MasterCategories,"ID").ID+1,Title:"",Icon:{Filename:""},Color:t.getNextColour(),Cents:new BigNumber(0),Default:!1,Expanded:!1,Categories:[]}}return{create:n}}])}(),function(){"use strict";angular.module("budgetingTool").factory("Profile",["$log","$q","$window","Budget","budgetModal","budgetingToolConfig","profileApi","$rootScope",function(e,t,n,o,r,a,i,l){function s(){angular.copy(angular.fromJson(n.sessionStorage.getItem("userData")),f)}function u(e){return _.isEmpty(f)||e?i.get().then(function(e){return f=e}).catch(function(){return n.sessionStorage.clear(),l.userLogged=!1,{}}):f}function c(){return s(),l.userLogged?t.resolve({loggedIn:!0}):t.reject({loggedIn:!1})}function d(){c().then(function(){m=!1}).catch(function(){return angular.element("#login-modal").modal("show"),m=!0,t.reject({loginModalTriggered:!0})})}function g(e){return i.uploadBudgetImage(e)}var f={},m=!1;return{checkLogin:d,get:u,isLoggedIn:c,loginModalTriggered:function(){return m},updateFromSession:s,uploadBudgetImage:g}}])}(),function(){"use strict";angular.module("budgetingTool").factory("budgetConverter",function(){function e(e){_.forEach(e.IncomeStreams,function(e){e.Cents=new BigNumber(e.Cents)}),_.forEach(e.MasterCategories,function(e){e.Cents=new BigNumber(e.Cents),_.forEach(e.Categories,function(e){e.Cents=new BigNumber(e.Cents)})
})}function t(e,t){return new BigNumber(e.toFixed(15)).times(t)}function n(e){_.forEach(e.IncomeStreams,function(n){n.Cents=t(n.Cents,e.Period.PerYear)}),_.forEach(e.MasterCategories,function(n){n.Cents=t(n.Cents,e.Period.PerYear),_.forEach(n.Categories,function(n){n.Cents=t(n.Cents,e.Period.PerYear),_.assign(n,{Period:_.clone(e.Period)})})})}function o(t){var o=angular.copy(t);switch(typeof t.IncomeStreams[0].Cents){case"string":e(o);break;case"number":n(o)}return delete o.Cents,delete o.Subtotal,o}return{process:o}})}(),function(){"use strict";angular.module("budgetingTool").factory("budgetEvents",["$timeout","$window","Budget","budgetHandler","budgetingToolConfig","budgetModal","Profile",function(e,t,n,o,r,a,i){function l(e,t,o){n.isDirty()&&(a.locationChangeWarningModal(t,o),e.preventDefault())}function s(){if(n.isDirty())return r.BROWSER_CLOSE_WARNING}function u(n){angular.element(t).off("beforeunload",s),angular.element(t).on("hidden.bs.modal",o.save),angular.element(t).off("hidden.bs.modal",i.updateFromSession),n(),c&&e.cancel(c)}angular.element(t).on("beforeunload",s),angular.element(t).on("hidden.bs.modal",o.save),angular.element(t).on("hidden.bs.modal",i.updateFromSession);var c=e(function(){i.isLoggedIn().catch(a.loginReminderModal)},r.LOGIN_REMINDER_TIMEOUT);return{changeLocationWarning:l,onDestroy:u,warnClose:s}}])}(),function(){"use strict";angular.module("budgetingTool").factory("budgetHandler",["$q","Alert","Budget","budgetModal","Profile",function(e,t,n,o,r){function a(){r.isLoggedIn().then(n.save).then(function(){n.saveInProgress()&&(n.endSaveAttempt(),t.saved())}).catch(function(e){if(e&&e.calculator)return o.overwriteConfirmModal(e.calculator);if(!r.loginModalTriggered())return e&&!e.loggedIn?t.needAccount():t.saveFailed()})}return{save:a}}])}(),function(){"use strict";angular.module("budgetingTool").factory("budgetView",["Budget","budgetingToolConfig","siteConfig",function(e,t,n){function o(){return i=e.budget.View||i}function r(){return n.APP_PATH+t.BUDGETING_TOOL_PREFIX+t.BUDGETING_TOOL_PATH+"/"+t.VIEW_TEMPLATES[o()].url}function a(t){t!==i&&(i=t,t!==e.budget.View&&(e.budget.View=t,e.setDirty()))}var i=t.DEFAULT_BUDGET_VIEW;return{get:o,getTemplate:r,set:a}}])}(),function(){"use strict";angular.module("budgetingTool").factory("budgetingToolResolver",["$location","$q","Budget","budgetingToolConfig","Profile",function(e,t,n,o,r){return function(){return t.all([n.get(),r.get(!0)]).then(function(n){return _.isEmpty(n[0])||!n[0].hasOwnProperty("MasterCategories")?(e.path(o.BUDGETING_TOOL_PATH+"/welcome"),t.reject("No stored budget yet.")):(_.isEmpty(n[1])?(n[0].Title=o.DEFAULT_BUDGET_TITLE,n[0].BreakdownExpanded=!0):n[0].Title||(n[0].Title=n[1].FirstName+"'s budget",n[0].BreakdownExpanded=!0),!0)})}}])}(),function(){"use strict";angular.module("budgetingTool").factory("categoryValidator",["budgetingToolConfig",function(e){function t(e){return Math.floor(e)===e?0:e.toString().split(".")[1].length||0}function n(n){return void 0!==n&&null!==n&&(!(n<0)&&(!(n>(Number.MAX_SAFE_INTEGER||e.IE_MAX_SAFE_INTEGER))&&!(t(n)>2)))}function o(t){return void 0!==t&&(0!==t.length&&!(t.length>e.MAX_CATEGORY_TITLE_FIELD))}return{cents:n,title:o}}])}(),function(){"use strict";angular.module("budgetingTool").factory("chartValues",["Budget","budgetingToolConfig","colourGenerator","periodAmount","totalValues",function(e,t,n,o,r){function a(){return _.some(e.budget.MasterCategories,function(e){return e.Cents.toNumber()})||void 0===e.budget.MasterCategories?0:1/e.budget.MasterCategories.length}function i(){return _.filter(e.budget.MasterCategories,function(e){return"number"==typeof e.Cents&&(e.Cents=new BigNumber(e.Cents)),e.Cents.greaterThan(0)}).length}function l(){var l=o.displayDollars(r.getSubtotal()),s=(l||1)*t.BREAKDOWN_CHART_SPACER,u=i(),c=a();u<5&&(s/=2);var d=e.budget.MasterCategories;return u&&(d=_.filter(e.budget.MasterCategories,function(e){return e.Cents.greaterThan(0)})),_.flatMap(d,function(e){var t=e.Color;l||(t=n.getStartColour(e.Color));var r=[];1!==u&&r.push({dollars:s,color:"transparent"});var a=o.displayDollars(e.Cents);return r.push({category:e.Title,dollars:a||c,color:t}),r})}return{update:l}}])}(),function(){"use strict";angular.module("budgetingTool").factory("masterCategoryCompiler",["Budget",function(e){function t(t,n){return _(n).map(function(n){var o=_.cloneDeep(n);return o.Categories=_.intersectionBy(t,n.Categories,"ID"),_.forEach(o.Categories,function(t){t.Cents=new BigNumber(0),_.assign(t,{Period:_.clone(e.budget.Period)})}),o}).filter(function(e){return e.Categories.length>0}).value()}return{compile:t}}])}(),function(){"use strict";angular.module("budgetingTool").factory("periodAmount",["Budget",function(e){function t(e,t,n){return e.eq(0)?e:e.div(t.PerYear).times(n.PerYear)}function n(t,n){if(void 0===t)return t;if(t.eq(0))return t.toNumber();var o=n?n.PerYear:e.budget.Period.PerYear;return t.div(100).div(o).round(2).toNumber()}function o(e){return void 0===e?e:e.eq(0)?e.toNumber():e.div(100).round(2).toNumber()}return{convert:t,displayCategoryDollars:o,displayDollars:n}}])}(),function(){"use strict";angular.module("budgetingTool").factory("totalValues",["Budget","periodAmount",function(e,t){function n(e){return _.reduce(e,function(e,t){return e.plus(t.Cents)},new BigNumber(0))}function o(){return n(e.budget.MasterCategories)}function r(){return n(e.budget.IncomeStreams)}function a(){var e=r().minus(o());return t.displayDollars(e)}function i(){return _.map(e.budget.MasterCategories,function(e){var t=_.reduce(e.Categories,function(e,t){return e.plus(t.Cents)},new BigNumber(0));return console.log(t),_.assign(angular.copy(e),{Cents:t})})}return{getIncomeTotal:r,getSubtotal:o,getRemainingDisplay:a,updateTotals:i}}])}(),function(){"use strict";angular.module("budgetingTool").controller("AreYouSureModalCtrl",["$scope","$uibModalInstance",function(e,t){e.cancelAreYouSure=function(){t.close(!1)},e.confirmAreYouSure=function(){t.close(!0)}}])}(),function(){"use strict";angular.module("budgetingTool").factory("budgetModal",["$location","$log","$q","$uibModal","Budget","Category","siteConfig",function(e,t,n,o,r,a,i){function l(){return o.open({animation:!0,templateUrl:i.APP_PATH+"app/pages/tools/budgeting-tool/modals/areYouSure.html",controller:"AreYouSureModalCtrl",size:"md",windowClass:"budget-are-you-sure-modal"}).result.then(function(e){return e})}function s(e){o.open({animation:!0,templateUrl:i.APP_PATH+"app/pages/tools/budgeting-tool/modals/headerModal.html",controller:"HeaderModalCtrl",resolve:{profile:function(){return angular.copy(e)}},size:"lg",windowClass:"budget-header-modal"}).result.then(r.updateHeaderFields)}function u(e,t){e||(e=a.create()),o.open({animation:!0,templateUrl:i.APP_PATH+"app/pages/tools/budgeting-tool/modals/categoryModal.html",controller:"CategoryModalCtrl",resolve:{categoryModel:function(){return angular.copy(e)},masterCategoryModel:function(){return angular.copy(t)}},size:"lg",windowClass:"budget-category-modal"}).result.then(function(e){r.updateMasterCategory(e)})}function c(t,n){o.open({animation:!0,templateUrl:i.APP_PATH+"app/pages/tools/budgeting-tool/modals/locationChangeWarningModal.html",controller:"LocationChangeWarningModalCtrl",size:"md",windowClass:"budget-location-change-warning-modal"}).result.then(function(o){o&&(n(),r.clear(),e.path(t.substring(e.absUrl().length-e.url().length)))})}function d(){return o.open({animation:!0,templateUrl:i.APP_PATH+"app/pages/tools/budgeting-tool/modals/logoutWarningModal.html",controller:"LogoutWarningModalCtrl",size:"md",windowClass:"budget-logout-warning-modal"}).result.then(function(e){return e?n.resolve():n.reject()})}function g(){o.open({animation:!0,templateUrl:i.APP_PATH+"app/pages/tools/budgeting-tool/modals/loginReminderModal.html",controller:"LoginReminderModalCtrl",size:"md",windowClass:"budget-login-reminder-modal"})}function f(){o.open({animation:!0,templateUrl:i.APP_PATH+"app/pages/tools/budgeting-tool/modals/safariModal.html",controller:"safariModalCtrl",size:"md",windowClass:"budget-logout-warning-modal"})}function m(e){o.open({animation:!0,templateUrl:i.APP_PATH+"app/pages/tools/budgeting-tool/modals/masterCategoryModal.html",controller:"MasterCategoryModalCtrl",resolve:{masterCategoryModel:function(){return angular.copy(e)}},size:"md",windowClass:"budget-master-category-modal"}).result.then(function(e){r.updateMasterCategory(e)})}function p(e){return o.open({animation:!0,templateUrl:i.APP_PATH+"app/pages/tools/budgeting-tool/modals/overwriteConfirmModal.html",controller:"OverwriteConfirmModalCtrl",resolve:{existingBudget:function(){return angular.copy(e)}},size:"lg",windowClass:"budget-overwrite-confirm-modal"}).result.then(function(t){return t?r.overwrite(e):r.keepCurrent()})}return{areYouSureModal:l,categoryModal:u,headerModal:s,locationChangeWarningModal:c,loginReminderModal:g,logoutWarningModal:d,masterCategoryModal:m,overwriteConfirmModal:p,safariModal:f}}])}(),function(){"use strict";angular.module("budgetingTool").controller("CategoryModalCtrl",["$scope","$log","$q","$uibModalInstance","budgetModal","budgetingToolConfig","Category","periodAmount","Profile","siteConfig","categoryModel","masterCategoryModel",function(e,t,n,o,r,a,i,l,s,u,c,d){function g(t){t&&(e.category.Icon.ID=t.ID,e.category.Icon.Filename=t.imageURL.replace(/^\//,""),e.category.Icon.IsCustom=!0);var n=_.findIndex(d.Categories,{ID:e.category.ID});m(),e.category.Cents=f,n===-1?d.Categories.push(e.category):angular.copy(e.category,d.Categories[n]),o.close(d)}null===c&&(c=i.create()),e.category=c,e.category.Period||(e.category.Period=a.BUDGET_PERIODS[a.DEFAULT_BUDGET_PERIOD]),e.initialPeriod=e.category.Period,e.category.Cents||(e.category.Cents=new BigNumber(0)),e.category.newCategoryImage=null,e.category.newCategoryImagePreview=null;var f=_.clone(e.category.Cents);e.periods=a.BUDGET_PERIODS,e.profile=s.get(),e.siteConfig=u,e.placeholder=a.CATEGORY_TITLE_PLACEHOLDER,e.getIconPath=i.getIconPath,e.removeCategory=function(){r.areYouSureModal().then(function(e){e&&(d.Categories.splice(_.findIndex(d.Categories,{ID:c.ID}),1),o.close(d))})};var m=e.$watch("category.Cents",function(t){t&&(f=l.convert(t,e.initialPeriod,e.category.Period))});e.saveCategory=function(){if((!e.category.Cents||e.category.Cents.lessThan(0)||e.category.Cents.greaterThan(Number.MAX_SAFE_INTEGER||a.IE_MAX_SAFE_INTEGER))&&(f=new BigNumber(0)),e.category.newCategoryImage)return s.uploadBudgetImage(e.category.newCategoryImage).then(function(t){return t&&t.data.imageURL?(delete e.category.newCategoryImage,g(t.data),void o.close(d)):n.reject("Can't upload image.")}).catch(function(e){t.error(e)});g(),o.close(d)},e.cancelCategory=function(){o.dismiss("cancel")},e.$watch("category.Period",function(e,t){f=l.convert(f,t,e)})}])}(),function(){"use strict";angular.module("budgetingTool").controller("HeaderModalCtrl",["$location","$scope","$timeout","$uibModalInstance","Budget","budgetingToolConfig","periodAmount","Profile","siteConfig",function(e,t,n,o,r,a,i,l,s){function u(e){return _.reduce(e,function(e,t){return t.Cents?e.plus(t.Cents):e},new BigNumber(0))}t.budget=angular.copy(r.budget),t.initialPeriod=angular.copy(t.budget.Period),t.data={BudgetPeriods:a.BUDGET_PERIODS},t.profile=l.get(),t.siteConfig=s,t.budgetingToolConfig=a,t.addIncomeStream=function(){t.budget.IncomeStreams.length>=a.INCOME_STREAM_MAX||t.budget.IncomeStreams.push({Removeable:!0})},t.removeIncomeStream=function(e){t.budget.IncomeStreams.splice(e,1)},t.saveHeaderModal=function(){var e=angular.copy(t.budget);e.IncomeStreams=_(e.IncomeStreams).filter(function(e){return e.Cents.greaterThan(0)}).map(function(e){return e.Title=e.Title||a.INCOME_STREAM_PLACEHOLDER,e.Cents=i.convert(e.Cents,t.initialPeriod,t.budget.Period),e}).value(),e.Cents=u(e.IncomeStreams),o.close(e)},t.toProfile=function(){return o.dismiss("cancel"),e.path("/profile")},t.cancelHeaderModal=function(){o.dismiss("cancel")},t.getAvailable=function(){var e=i.convert(u(t.budget.IncomeStreams),t.initialPeriod,t.budget.Period);return i.displayDollars(e,t.budget.Period)}}])}(),function(){"use strict";angular.module("budgetingTool").controller("LocationChangeWarningModalCtrl",["$scope","$uibModalInstance",function(e,t){e.locationChangeContinue=function(){t.close(!0)},e.locationChangeCancel=function(){t.close(!1)}}])}(),function(){"use strict";angular.module("budgetingTool").controller("LoginReminderModalCtrl",["$scope","$uibModalInstance",function(e,t){e.reminderModalLogin=function(){t.dismiss("cancel"),angular.element("#login-modal").modal("show")},e.reminderModalSignup=function(){t.dismiss("cancel"),angular.element("#signup-modal").modal("show")},e.cancelLoginReminder=function(){t.dismiss("cancel")}}])}(),function(){"use strict";angular.module("budgetingTool").controller("LogoutWarningModalCtrl",["$scope","$uibModalInstance",function(e,t){e.logoutContinue=function(){t.close(!0)},e.logoutCancel=function(){t.close(!1)}}])}(),function(){"use strict";angular.module("budgetingTool").controller("MasterCategoryModalCtrl",["$scope","$uibModalInstance","Budget","budgetModal","siteConfig","masterCategoryModel",function(e,t,n,o,r,a){e.siteConfig=r,e.masterCategory=a,e.removeMasterCategory=function(e){o.areYouSureModal().then(function(o){o&&(n.deleteMasterCategory(e),t.dismiss("cancel"))})},e.saveMasterCategory=function(){t.close(a)},e.cancelMasterCategory=function(){t.dismiss("cancel")}}])}(),function(){"use strict";angular.module("budgetingTool").controller("OverwriteConfirmModalCtrl",["$scope","$uibModalInstance","existingBudget","siteConfig",function(e,t,n,o){e.siteConfig=o,n.ParsedDate=Date.parse(n.Created),e.existingBudget=n,e.overwriteConfirmYes=function(){t.close(!0)},e.overwriteConfirmNo=function(){t.close(!1)},e.cancelOverwriteConfirm=function(){t.dismiss("cancel")}}])}(),function(){"use strict";angular.module("budgetingTool").controller("safariModalCtrl",["$scope","$uibModalInstance",function(e,t){e.cancelSafariReminder=function(){t.dismiss("cancel")}}])}(),function(){"use strict";angular.module("sorted").directive("calcOutputInvestment",["siteConfig","$http","$q",function(e,t,n){return{templateUrl:e.APP_PATH+"app/pages/tools/investment-planner/calc-output-investment/calc-output-investment.html",restrict:"EA",scope:{model:"=",result:"=",dropdown:"=",resultData:"="},link:function(e){e.$on("save:calc",function(t,n){var o={success:function(){angular.element("#save-as-modal").modal("hide")},error:function(){},silent:!0,parse:!0};e.model.$attributes.Title=n,e.model.save(null,o)})},controller:["$scope",function(o){function r(e){return 200===e.status?e.data:(console.error("unexpected response status",e),!1)}function a(e){return console.error("failure",e),!1}o.quizResult=!1,o.siteConfig=e,o.$watch("result",function(){(o.result||0===o.result)&&(o.currentResult=_.find(o.outputs,{type:o.result}),o.quizResultTitle=o.currentResult.title,o.dropdown.value=o.result.toString(),o.quizResult=!0)}),o.$watch("dropdown.value",function(){if(o.dropdown&&o.dropdown.value){var e=parseInt(o.dropdown.value);o.currentResult=_.find(o.outputs,{type:e})}}),o.loadOutput=function(e){return t({method:"GET",url:e})};var i=o.loadOutput(e.APP_PATH+"/json/investment/aggressive.json"),l=o.loadOutput(e.APP_PATH+"/json/investment/growth.json"),s=o.loadOutput(e.APP_PATH+"/json/investment/balanced.json"),u=o.loadOutput(e.APP_PATH+"/json/investment/conservative.json"),c=o.loadOutput(e.APP_PATH+"/json/investment/defensive.json");n.all([i.then(r,a),l.then(r,a),s.then(r,a),u.then(r,a),c.then(r,a)]).then(function(e){o.outputs=e,o.result?(o.currentResult=_.find(o.outputs,{type:o.result}),o.dropdown.value=o.result.toString()):o.currentResult=_.find(o.outputs,{type:"BALANCED"})})}]}}])}(),function(){"use strict";angular.module("sorted").directive("calcInputKiwisaverFees",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/kiwisaver-fees/calc-input-kiwisaver-fees/calc-input-kiwisaver-fees.html",restrict:"EA",scope:{model:"=",calculator:"="},controller:["$scope","calcStaticValues",function(t,n){t.calcStaticValues=n,t.currentGroup="creditCard",t.currentIndex=0,t.siteConfig=e,t.slider={options:{floor:1,ceil:3e7,showSelectionBar:!0}}}],link:function(e,t){t.on("change","select",function(e){var t=$(e.currentTarget),n=t.find(":selected");"employment"===t.attr("name")&&($(n.data("toggle")).hide(),$(n.data("related")).show())})}}}])}(),function(){"use strict";angular.module("sorted").directive("calcOutputKiwisaverFees",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/kiwisaver-fees/calc-output-kiwisaver-fees/calc-output-kiwisaver-fees.html",restrict:"EA",scope:{model:"="},link:function(e,t){e.directions={fees_till_65_dollars:"NEUTRAL",scheme:"NEUTRAL",active:"NEUTRAL"},e.mobileFilterOptions=[{label:"Highest Fees Until age 65",value:1},{label:"Lowest Fees Until age 65",value:2},{label:"A-Z Scheme Name",value:3},{label:"Z-A Scheme Name",value:4},{label:"Active Fund",value:5},{label:"Passive Fund",value:6}],e.mobileFilter=null,e.$watch("mobileFilter",function(){if(e.mobileFilter)switch(e.mobileFilter){case"1":e.result=_.orderBy(e.result,"fees_till_65_dollars","desc"),e.directions.fees_till_65_dollars="UP";break;case"2":e.result=_.orderBy(e.result,"fees_till_65_dollars","asc"),e.directions.fees_till_65_dollars="DOWN";break;case"3":e.result=_.orderBy(e.result,"scheme","asc"),e.directions.scheme="UP";break;case"4":e.result=_.orderBy(e.result,"scheme","desc"),e.directions.scheme="DOWN";break;case"5":e.result=_.orderBy(e.result,"active","asc"),e.directions.active="UP";break;case"6":e.result=_.orderBy(e.result,"active","desc"),e.directions.active="DOWN"}}),t.on("click",".btn-compare",function(){e.comparing=!e.comparing,e.comparing||e.result.forEach(function(e){e.compare&&(e.compare=0)}),e.$apply(e.comparing)}),t.on("click",".output-ksf-direction",function(t){var n=angular.element(t.currentTarget).attr("data-sort-field"),o="asc",r=e.directions[n];e.directions={fees_till_65_dollars:"NEUTRAL",scheme:"NEUTRAL",active:"NEUTRAL"},"NEUTRAL"===r&&(o="asc",e.directions[n]="UP"),"UP"===r&&(o="desc",e.directions[n]="DOWN"),"DOWN"===r&&(o="asc",e.directions[n]="UP"),e.$apply(e.result=_.orderBy(e.result,n,o))}),e.$on("save:calc",function(t,n){var o={success:function(){angular.element("#save-as-modal").modal("hide")},error:function(){},silent:!0,parse:!0};e.model.$attributes.Title=n,e.model.save(null,o)})},controller:["$scope",function(e){e.comparing=!1,e.result=[],e.$on("output:redraw",function(){var t=1===e.model.$attributes.iac?"todays":"nominal";e.result=e.model.result[t].map(function(e){return e.toJSON()}),e.$emit("cm-spinner.stop"),e.$apply()})}]}}])}(),function(){"use strict";angular.module("sorted").directive("kiwisaverFeesCalcInflation",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/kiwisaver-fees/kiwisaver-fees-calc-inflation/calc-inflation.html",restrict:"EA",scope:{field:"=",model:"="}}}])}(),function(){"use strict";angular.module("sorted").directive("kiwisaverSavingsCalcNudgeSlider",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/kiwisaver-savings-calculator/kiwisaver-savings-calc-nudge-slider/slider.html",restrict:"EA",scope:{model:"=",nudge:"="},link:function(e){e.$watch("model.$attributes",function(){if("kiwisaver_contribs_self"===e.nudge.field){var t=Math.round(e.model.$attributes.salary/e.model.$attributes.contrib_freq*.3);e.nudge.options.ceil=t}},!0),e.$on("slideEnded",function(){var t;t=e.nudgeModel,console.log(t,"new value"),e.$apply(e.model.set(e.nudge.field,t))})},controller:["$scope",function(e){e.nudgeModel=3,console.log(e.nudgeModel,"inital value")}]}}])}(),function(){"use strict";angular.module("sorted").directive("kiwisaverSavingsForm",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/kiwisaver-savings-calculator/kiwisaver-savings-form/index.html",restrict:"EA",scope:!1,link:function(e,t){t.on("click",".calc-heading",function(e){var n=t.find(".calc-input-group.selected"),o=angular.element(e.currentTarget);o.parent().hasClass("selected")||(n.find(".calc-input-container").slideUp(),n.removeClass("selected"),o.parent().find(".calc-input-container").slideDown(),o.parent().addClass("selected"))}),t.on("blur","#earnings",function(){$(".kiwisaver-savings-section.selected").click()})}}}])}(),function(){"use strict";angular.module("sorted").directive("kiwisaverSavingsResult",["siteConfig","Profile",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/kiwisaver-savings-calculator/kiwisaver-savings-result/index.html",restrict:"EA",scope:{calculator:"=",model:"="},link:function(t){t.siteConfig=e,t.lessThanXYears=function(e){if(t.model.$attributes.joined_month&&t.model.$attributes.joined_year){var n=t.model.$attributes.joined_year+"-"+t.model.$attributes.joined_month+"-01",o=moment(n,"YYYY-MM-DD"),r=moment().year(moment().year()).month(moment().month()).date(1);return r.subtract(e,"y"),!(o.diff(r,"y")<0||Object.is(o.diff(r,"y"),-0))}},t.$on("save:calc",function(e,n){var o={success:function(){angular.element("#save-as-modal").modal("hide")},error:function(){},silent:!0,parse:!0};t.model.$attributes.Title=n,t.model.save(null,o)})}}}])}(),function(){"use strict";angular.module("sorted").directive("calcOutputPersonality",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/money-personality/calc-output-personality/calc-output-personality.html",restrict:"EA",scope:{model:"=",result:"=",dropdown:"=",resultData:"="},link:function(e){e.$on("save:calc",function(t,n){var o={success:function(e,t,n){console.info("SUCCESS: ",e,t,n),angular.element("#save-as-modal").modal("hide")},error:function(e,t,n){console.error("ERROR: ",e,t,n)},silent:!0,parse:!0};e.model.$attributes.Title=n,e.model.save(null,o)})},controller:["$scope",function(t){t.siteConfig=e;var n={OImSD:"money-mentor",OImSF:"visual-stylist",OImLD:"financial-controller",OImLF:"entrepreneur",ORSD:"money-organiser",ORSF:"hedonist",ORLD:"money-surgeon",ORLF:"money-maestro",InImSD:"insightful-investor",InImSF:"authentic-dreamer",InImLD:"adviser-speculator",InImLF:"system-innovator",InRSD:"practical-domestic",InRSF:"sensible-drifter",InRLD:"sound-controller",InRLF:"money-mechanic"};t.$watch("result",function(){if(t.result){var e=n[t.result];t.currentResult=_.find(t.resultData,{URLSegment:e}),t.quizResultTitle=t.currentResult.Title,t.quizResult=!0}}),t.$watch("dropdown.value",function(){if(t.dropdown&&t.dropdown.value){var e=t.dropdown.value;t.currentResult=_.find(t.resultData,{URLSegment:e})}})}]}}])}(),function(){"use strict";angular.module("sorted").directive("calcInputNetWorth",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/net-worth-calculator/calc-input-net-worth/calc-input-net-worth.html",restrict:"EA",scope:{calculator:"=",models:"="},link:function(e,t){t.on("click",".calc-input-net-worth-heading",function(e){var n=t.find(".calc-input-net-worth-heading.selected"),o=angular.element(e.currentTarget);if(n[0]!==o[0]){n.parent().find(".calc-input-container").slideToggle(),n.toggleClass("selected"),o.parent().find(".calc-input-container").slideToggle(),o.toggleClass("selected");o.parent().find(".calc-input-net-worth-sub-heading").first().trigger("click")}}),t.on("click",".calc-sub-heading",function(e){var n=t.parent().find(".calc-input-net-worth-sub-heading.selected"),o=angular.element(e.currentTarget);n[0]!==o[0]&&(o.parent().find(".calc-input-container-child").slideToggle(),o.toggleClass("selected"),n.parent().find(".calc-input-container-child").slideToggle(),n.toggleClass("selected"))}),t.on("click",".calc-input-level-heading",function(e){t.parent().find(".second-level-item").toggleClass("_hidden"),angular.element(e.currentTarget).toggleClass("selected")})}}}])}(),function(){"use strict";angular.module("sorted").directive("calcOutputNetWorth",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/net-worth-calculator/calc-output-net-worth/calc-output-net-worth.html",restrict:"EA",scope:{calculator:"=",model:"=",models:"="},link:function(e){e.$on("save:calc",function(t,n){var o={success:function(e,t,n){console.info("SUCCESS: ",e,t,n),angular.element("#save-as-modal").modal("hide")},error:function(e,t,n){console.error("ERROR: ",e,t,n)},silent:!0,parse:!0};e.model.$attributes.Title=n,e.model.save(null,o)})}}}])}(),function(){"use strict";angular.module("sorted").directive("mortgageToolGraphicText",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/mortgage-tool/mortgage-tool-graphic-text/calc-graphic-text.html",restrict:"EA",scope:{model:"=",calculator:"="},controller:["$scope",function(e){e.currentModel=e.model.collection.at(0),e.$on("output:update",function(t,n){function o(){var t=e.currentModel.result.get("total"),n=e.currentModel.result.get("interest"),o=t-n;if(e.factor=(t/o).toFixed(2),isNaN(e.factor))e.showText=!1;else{e.showText=!0,e.wholeNumber=Math.floor(e.factor),e.numIcons=[];for(var r=0;r<e.wholeNumber;r++)e.numIcons.push(r);e.fraction=Math.floor(10*(e.factor-e.wholeNumber)),e.fraction>0&&(e.fractionSrc=e.calculator.graphic.smallIcons[e.fraction])}e.factor<1.2&&(e.showText=!1)}e.currentModel=e.model.collection.at(n),e.currentModel.result.on("change",function(){o()}),o()})}]}}])}(),function(){"use strict";angular.module("sorted").directive("mortgageToolGraphic",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/mortgage-tool/mortgage-tool-graphic/calc-graphic.html",restrict:"EA",scope:{calculator:"=",model:"="},link:function(e,t){e.setHouseHeight=function(){var n=t.find(".graphic-house-dark-img")[0].offsetWidth/390*292,o=n*((100-e.interestPercent)/100);if(t.find(".graphic-house-light").css({height:o+"px"}),e.interestPercent<30)t.find(".graphic-interest").css({top:"-50px"}),t.find(".graphic-interest").removeClass("font-white").addClass("font-purple");else{var r=.4*e.interestPercent;t.find(".graphic-interest").css({top:r+"%"}),t.find(".graphic-interest").removeClass("font-purple").addClass("font-white")}},e.setHouseHeight()},controller:["$scope","$window",function(t,n){t.siteConfig=e,t.currentModel=t.model.collection.at(0),t.$on("output:update",function(e,n){t.currentModel=t.model.collection.at(n),t.currentModel.hasResult()&&(t.currentModel.result.has("interest")&&(t.interest=t.currentModel.result.get("interest"),t.total=t.currentModel.result.get("total"),t.interestPercent=t.interest/t.total*100),t.currentModel.result.has("time")?t.years=t.currentModel.result.get("time"):t.years=25,t.setHouseHeight())}),_.isUndefined(t.interestPercent)&&(t.interestPercent=66),_.isUndefined(t.years=25)&&(t.years=25),angular.element(n).on("resize",t.setHouseHeight)}]}}])}(),function(){"use strict";angular.module("sorted").directive("mortgageToolInput",["siteConfig","$window",function(e,t){return{templateUrl:e.APP_PATH+"app/pages/tools/mortgage-tool/mortgage-tool-input/calc-input.html",restrict:"EA",scope:{calculator:"=",model:"=",validation:"="},link:function(e,n){n.on("click",".calc-heading",function(t){var o=n.find(".calc-input-group.selected"),r=angular.element(t.currentTarget);r.parent().hasClass("selected")||(o.find(".calc-input-container").slideUp(),o.removeClass("selected"),r.parent().find(".calc-input-container").slideDown(),r.parent().addClass("selected"),e.$apply(e.$emit("input:changed",r.data("model-id"))))}),n.on("click",".ui-results-link",function(e){e.preventDefault();var n=angular.element(".calc-output"),o=n.offset().top-80;t.scrollTo(0,o)}),e.currentModel.on("result:change",function(e){var t=["#loan1","#repayments1","#term1"];!e.hasResult()&&e.get("repayments1")>0?t.forEach(function(e){var t=angular.element(e);t.addClass("form-input-error"),t.parent().parent().find("label").addClass("font-red")}):t.forEach(function(e){var t=angular.element(e);t.removeClass("form-input-error"),t.parent().parent().find("label").removeClass("font-red")})}),e.calcTotal=function(){var t=parseInt(e.model.collection.at(0).$attributes.loan1),n=parseInt(e.model.collection.at(1).$attributes.loan1),o=parseInt(e.model.collection.at(2).$attributes.loan1);return isNaN(t)&&(t=0),isNaN(n)&&(n=0),isNaN(o)&&(o=0),t+n+o}},controller:["$scope",function(e){e.currentModel=e.model.collection.at(0),e.$on("output:update",function(t,n){e.currentModel=e.model.collection.at(n)})}]}}])}(),function(){"use strict";angular.module("sorted").directive("mortgageToolOverlay",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/mortgage-tool/mortgage-tool-overlay/overlay.html",restrict:"EA",scope:{model:"=",calculator:"="},controller:["$scope",function(e){e.currentModel=e.model.collection.at(0),e.$on("output:update",function(t,n){e.currentModel=e.model.collection.at(n)})}]}}])}(),function(){"use strict";angular.module("sorted").directive("mortgageToolOutput",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/mortgage-tool/mortgage-tool-output/calc-output.html",restrict:"EA",scope:{calculator:"=",model:"="},link:function(e,t){e.ageFormHidden=!0,t.on("click",".calc-output-birthdate",function(t){t.preventDefault(),e.ageFormHidden=!1,e.$apply()}),e.$on("save:calc",function(t,n){var o={success:function(e,t,n){console.info("SUCCESS: ",e,t,n),angular.element("#save-as-modal").modal("hide")},error:function(e,t,n){console.error("ERROR: ",e,t,n)},wait:!0,parse:!0};e.currentModel.collection.parent.set({Title:n},{silent:!0}),e.currentModel.collection.parent.save(null,o)})},controller:["$scope",function(e){e.currentModel=e.model.collection.at(0),e.nudgeOptions=[{floor:0,ceil:5e5,showSelectionBar:!0},{floor:0,ceil:2e5,showSelectionBar:!0},{floor:0,ceil:1e5,showSelectionBar:!0}],e.nudge=e.calculator.nudge,e.nudge.options=e.nudgeOptions[0],e.$on("output:update",function(t,n){e.currentModel=e.model.collection.at(n),e.nudge.options=e.nudgeOptions[n]}),e.model.collection.on("change",function(t){(t.hasChanged("loan1")||t.hasChanged("interest1")||t.hasChanged("freq1")||t.hasChanged("lump_sum_repayment"))&&(e.nudgeOptions[e.currentModel.id].floor=Math.ceil(e.currentModel.calculateSlider(30)),e.nudgeOptions[e.currentModel.id].ceil=Math.ceil(e.currentModel.calculateSlider(1)))})}]}}])}(),function(){"use strict";angular.module("sorted").filter("withTitle",function(){return function(e){var t=function(e){if(e.Title)return e};return e.filter(t)}})}(),function(){"use strict";angular.module("sorted").directive("calcOutputRetirement",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/retirement-planner/calc-output-retirement/calc-output-retirement.html",restrict:"EA",scope:{model:"=",calculator:"="},link:function(e){e.sliderOptions={floor:0,ceil:1e5,showSelectionBar:!0},e.slider={options:e.sliderOptions},e.getWeekly=function(e,t){return parseInt(e)+parseInt(t)},e.$watch("model.$attributes",function(t,n){t.your_other_schemes===n.your_other_schemes&&(e.sliderOptions.ceil=e.model.result.$attributes.amount_total)},!0),e.$on("save:calc",function(t,n){var o={success:function(){angular.element("#save-as-modal").modal("hide")},error:function(){},silent:!0,parse:!0};e.model.$attributes.Title=n,e.model.save(null,o)})}}}])}(),function(){"use strict";angular.module("sorted").directive("calcInputRetirement",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/retirement-planner/calc-input-retirement/calc-input-retirement.html",restrict:"EA",scope:{calculator:"=",model:"="},link:function(e,t){t.on("click",".calc-heading",function(n){var o=t.find(".calc-input-group.selected"),r=angular.element(n.currentTarget);"whereMoney"===r[0].attributes["data-form-type"].value&&e.$apply(function(){e.model.$attributes.tab_viewed=1}),r.parent().hasClass("selected")||(o.find(".calc-input-container").slideUp(),o.removeClass("selected"),r.parent().find(".calc-input-container").slideDown(),r.parent().addClass("selected"))}),e.partnerSliding=!1,t.on("click",".calc-add-partners",function(){e.partnerSliding===!1&&("none"===t.find(".addPartnerSection").css("display")?(e.partnerSliding=!0,t.find(".addPartnerSection").slideDown(function(){
e.partnerSliding=!1})):(e.partnerSliding=!0,t.find(".addPartnerSection").slideUp(function(){e.partnerSliding=!1})))})}}}])}(),function(){"use strict";angular.module("sorted").directive("calcStackedRetirement",["siteConfig","$window","$filter",function(e,t,n){return{templateUrl:e.APP_PATH+"app/pages/tools/retirement-planner/retirement-planner-stacked/calc-stacked.html",restrict:"EA",scope:{model:"=",calculator:"="},link:function(e){var o=[{gap:.25,name:"NZ Super",data:[220,null,null],color:"#ffd700",overlay:{gradient:"none"}},{gap:.25,name:"KiwiSaver",data:[150,null,null],color:"#ffe140",overlay:{gradient:"none"}},{gap:.25,name:"Other Savings",data:[97,null,null],color:"#ffed8c",overlay:{gradient:"none"}},{gap:.25,name:"Other Income",data:[90,null,null],color:"#fff5bf",overlay:{gradient:"none"}},{gap:.25,name:"Desired retirement income",data:[null,800,null],color:"#cadc3c",overlay:{gradient:"none"}},{gap:.25,name:"Extra savings",data:[null,null,243],color:"#ce0058",overlay:{gradient:"none"}}],r=["You will have\n$557 per week","You will need\n$800 per week","You'll need to save\n$243 per week"];e.chartConfig={transitions:!1,legend:{visible:!1},seriesDefaults:{type:"column",stack:!0},series:o,valueAxis:{labels:{visible:!0},line:{visible:!1},minorGridLines:{visible:!1},title:{text:"Amount ($)"}},categoryAxis:{categories:r,majorGridLines:{visible:!1}},tooltip:{visible:!0,template:"#= series.name #: $#= value #"}},e.$watch("model.result.$attributes",function(){e.model.$attributes&&e.model.result.$attributes&&e.model.hasResult()?e.drawChart(!0):e.drawChart(!1)},!0),e.$watch(function(){return e.model.hasResult()},function(t){t?e.drawChart(!0):e.drawChart(!1)},!0),e.drawChart=function(t){if(t){var a,i=parseInt(e.model.$attributes.lifestyle_freq);switch(i){case 1:a="year";break;case 12:a="month";break;case 26:a="fortnight";break;case 52:a="week"}var l=e.model.result.$attributes.income_nz_superannuation+e.model.result.$attributes.income_kiwisaver_lump_sum+e.model.result.$attributes.income_other_lump_sums+e.model.result.$attributes.income_other_income_sources,s="You will have\n"+n("currency")(l,"$",0)+" per "+a,u="You will need\n"+n("currency")(e.model.result.$attributes.desired_retirement_income,"$",0)+" per "+a,c="You'll need to save\n"+n("currency")(e.model.result.$attributes.deficit_lump_amount,"$",0)+" per "+a;0!==e.model.result.$attributes.deficit_lump_amount&&l<e.model.result.$attributes.desired_retirement_income?(e.chartConfig.categoryAxis.categories=[s,u,c],e.chartConfig.series[0].data=[e.model.result.$attributes.income_nz_superannuation,null,null],e.chartConfig.series[1].data=[e.model.result.$attributes.income_kiwisaver_lump_sum,null,null],e.chartConfig.series[2].data=[e.model.result.$attributes.income_other_lump_sums,null,null],e.chartConfig.series[3].data=[e.model.result.$attributes.income_other_income_sources,null,null],e.chartConfig.series[4].data=[null,e.model.result.$attributes.desired_retirement_income,null],e.chartConfig.series[5].data=[null,null,e.model.result.$attributes.deficit_lump_amount]):(e.chartConfig.categoryAxis.categories=[s,u],e.chartConfig.series[0].data=[e.model.result.$attributes.income_nz_superannuation,null],e.chartConfig.series[1].data=[e.model.result.$attributes.income_kiwisaver_lump_sum,null],e.chartConfig.series[2].data=[e.model.result.$attributes.income_other_lump_sums,null],e.chartConfig.series[3].data=[e.model.result.$attributes.income_other_income_sources,null],e.chartConfig.series[4].data=[null,e.model.result.$attributes.desired_retirement_income],e.chartConfig.series[5].data=[null,null])}else e.chartConfig.categoryAxis.categories=r,e.chartConfig.series=o;angular.element(".calc-stacked-chart").kendoChart(e.chartConfig)},angular.element(t).bind("resize",e.drawChart)}}}])}(),function(){"use strict";angular.module("sorted").directive("savingsCalcIarSelect",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/savings-calculator/savings-calc-iar-select/input.html",restrict:"EA",scope:{field:"=",model:"="},link:function(e,t){t.on("click","button",function(t){var n=angular.element(t.currentTarget);if(n.closest(".btn-container").find("button.active").removeClass("active"),n.addClass("active"),n.data("related")){var o=angular.element(n.data("related"));o.parent().find(n.data("toggle")).addClass("_hidden"),o.removeClass("_hidden")}n.data("result")&&$(n.data("result")).toggleClass("_hidden"),e.$apply(e.model.set(e.field.calcModel,n.data("value")))})}}}])}(),function(){"use strict";angular.module("sorted").directive("savingsCalcNudgeSlider",["siteConfig","moment",function(e,t){return{templateUrl:e.APP_PATH+"app/pages/tools/savings-calculator/savings-calc-nudge-slider/slider.html",restrict:"EA",scope:{model:"=",nudge:"="},link:function(n){n.sliderChange=!1,n.$on("slideEnded",function(){if(n.sliderChange=!0,1===n.model.get("type")){var o=t(Math.abs(n.nudgeModel));n.$apply(n.model.set("ending",o.format(e.DATE_FORMAT)))}else n.$apply(n.model.set("regular_amount",n.nudgeModel));n.sliderChange=!1})},controller:["$scope","$timeout",function(n,o){n.$watch("model.attributes",function(){n.refreshSlider(),!n.model.changed.ending&&!n.model.changed.starting||n.sliderChange||1!==n.model.attributes.type||(n.nudge.options.ceil=t(n.model.$attributes.starting,e.DATE_FORMAT).add(7,"days").valueOf()*-1,n.nudge.options.floor=t(n.model.$attributes.ending,e.DATE_FORMAT).valueOf()*-1,(n.nudgeModel>n.nudge.options.ceil||n.nudgeModel<n.nudge.options.floor)&&(n.nudgeModel=NaN),n.nudge.options.step=t.duration(1,"day").asMilliseconds())},!0),n.refreshSlider=function(){o(function(){n.$broadcast("rzSliderForceRender")})}}]}}])}(),function(){"use strict";angular.module("sorted").directive("savingsCalculatorForm",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/savings-calculator/savings-calculator-form/form.html",restrict:"EA",scope:{models:"=",calculator:"=",nudge:"="},link:function(e,t){t.on("blur","#regularAmount",function(t){var n=parseInt(angular.element(t.currentTarget).val());e.nudge.options.ceil=5*n,e.nudge.options.floor=n}),e.selectedButton=0,t.on("click",".savings-calc-type-selector .input-select-button",function(t){var n=angular.element(t.currentTarget);if(e.$apply(function(){e.selectedButton=parseInt(n.attr("data-value"))}),n.data("related")){var o=angular.element(n.data("related"));o.parent().find(n.data("toggle")).addClass("_hidden"),o.removeClass("_hidden")}0===e.selectedButton?(angular.element("#savingsGoalResult").addClass("_hidden"),angular.element("#regularSavingsResult").removeClass("_hidden")):(angular.element("#savingsGoalResult").removeClass("_hidden"),angular.element("#regularSavingsResult").addClass("_hidden")),e.models&&e.$apply(function(){e.models.currentType=n.data("value")})})},controller:["$scope",function(e){e.getValidation=function(t,n){var o=_.find(e.calculator.models,{id:t});return _.find(o.fields,{id:n}).validation}}]}}])}(),function(){"use strict";angular.module("sorted").filter("ceil",function(){return function(e){return Math.ceil(e)}})}.call(this),function(){"use strict";angular.module("sorted").filter("round",function(){return function(e){return Math.round(e)}})}.call(this),function(){"use strict";angular.module("sorted").directive("savingsCalculatorResult",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/savings-calculator/savings-calculator-result/output.html",restrict:"EA",scope:{model:"=",nudge:"="},controller:["$scope",function(t){t.calcDuration=function(t,n){var o=t||"days",r=moment(n.$attributes.starting,e.DATE_FORMAT);return moment(n.$attributes.ending,e.DATE_FORMAT).diff(r,o)},t.getDurationDesc=function(e){var n=t.calcDuration("days",e);return n>0?moment.duration(n,"days").humanize():"-"},t.hasDuration=function(e){return t.calcDuration("days",e)>0}}]}}])}(),function(){"use strict";angular.module("sorted").filter("toInt",function(){return function(e){return parseInt(e)||0}})}.call(this),function(){"use strict";angular.module("budgetingTool").directive("addMasterCategory",["Budget","budgetingToolConfig","colourGenerator","MasterCategory","siteConfig",function(e,t,n,o,r){return{restrict:"E",templateUrl:r.APP_PATH+"app/pages/tools/budgeting-tool/components/add-master-category/addMasterCategory.html",controller:["$scope",function(e){e.addMasterCategoryPopover=r.APP_PATH+"app/pages/tools/budgeting-tool/components/add-master-category/addMasterCategoryPopover.html",e.masterCategoryPopoverOpen=!1}],link:function(t,n){t.saveMasterCategory=function(){var r=n.find("input")[0].value;if(n.find("input")[0].value.trim()){var a=o.create();a.Title=r,t.budget.MasterCategories.push(a),e.setDirty(),t.masterCategoryPopoverOpen=!1}},t.cancelMasterCategory=function(){t.masterCategoryPopoverOpen=!1}}}}])}(),function(){"use strict";angular.module("budgetingTool").directive("addNewCategory",["siteConfig",function(e){return{restrict:"E",templateUrl:e.APP_PATH+"app/pages/tools/budgeting-tool/components/add-new-category/addNewCategory.html"}}])}(),function(){"use strict";angular.module("budgetingTool").directive("addNewCategoryListview",["siteConfig",function(e){return{restrict:"E",templateUrl:e.APP_PATH+"app/pages/tools/budgeting-tool/components/add-new-category-listview/addNewCategoryListview.html"}}])}(),function(){"use strict";angular.module("budgetingTool").directive("budgetBreakdown",["Budget","budgetingToolConfig","periodAmount","siteConfig",function(e,t,n,o){return{restrict:"E",templateUrl:o.APP_PATH+"app/pages/tools/budgeting-tool/components/budget-breakdown/budgetBreakdown.html",controller:["$scope","totalValues",function(e,o){e.breakdownChartOptions=t.BREAKDOWN_CHART_OPTIONS,e.breakdownChartOptions.dataSource=e.breakdownChartSource,e.breakdownDesktopExpanded=e.budget.BreakdownExpanded,e.breakdownMobileExpanded=e.budget.BreakdownExpanded,e.breakdownToggleDesktop=function(){e.breakdownDesktopExpanded=!e.breakdownDesktopExpanded,e.BreakdownExpanded=!e.BreakdownExpanded},e.breakdownToggleMobile=function(){e.breakdownMobileExpanded=!e.breakdownMobileExpanded,e.BreakdownExpanded=!e.BreakdownExpanded},e.subtotalDisplay=function(){return n.displayDollars(o.getSubtotal())}}]}}])}(),function(){"use strict";angular.module("budgetingTool").directive("budgetCategoryAmountFacade",["siteConfig",function(e){return{restrict:"E",templateUrl:e.APP_PATH+"app/pages/tools/budgeting-tool/components/budget-category-amount-facade/budgetCategoryAmountFacade.html"}}])}(),function(){"use strict";angular.module("budgetingTool").directive("budgetCategoryEditForm",["siteConfig",function(e){return{restrict:"E",templateUrl:e.APP_PATH+"app/pages/tools/budgeting-tool/components/budget-category-edit-form/budgetCategoryEditForm.html"}}])}(),function(){"use strict";angular.module("budgetingTool").directive("budgetCategoryFacade",["siteConfig",function(e){return{restrict:"E",templateUrl:e.APP_PATH+"app/pages/tools/budgeting-tool/components/budget-category-facade/budgetCategoryFacade.html"}}])}(),function(){"use strict";angular.module("budgetingTool").directive("budgetHeader",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/budgeting-tool/components/budget-header/budgetHeader.html",restrict:"E"}}])}(),function(){"use strict";angular.module("budgetingTool").directive("budgetInputAmount",["budgetingToolConfig","siteConfig",function(e,t){return{restrict:"E",scope:{amount:"=",perYear:"=",placeholder:"@",toggleEditable:"&"},templateUrl:t.APP_PATH+"app/pages/tools/budgeting-tool/components/budget-input-amount/budgetInputAmount.html",controller:["$scope",function(t){t.maxInt=Math.floor((Number.MAX_SAFE_INTEGER||e.IE_MAX_SAFE_INTEGER)/100)}],link:function(e,t){t.on("click",function(e){e.stopImmediatePropagation()})}}}])}(),function(){"use strict";angular.module("budgetingTool").directive("budgetMasterCategory",["periodAmount","siteConfig",function(e,t){return{restrict:"E",templateUrl:t.APP_PATH+"app/pages/tools/budgeting-tool/components/budget-master-category/budgetMasterCategory.html",controller:["$scope",function(t){t.masterCategoryDisplayTotal=function(t){return e.displayDollars(t.Cents)}}]}}])}(),function(){"use strict";angular.module("budgetingTool").directive("budgetMasterCategoryListview",["periodAmount","siteConfig",function(e,t){return{restrict:"E",templateUrl:t.APP_PATH+"app/pages/tools/budgeting-tool/components/budget-master-category-listview/budgetMasterCategoryListview.html",controller:["$scope",function(t){t.masterCategoryDisplayTotal=function(t){return e.displayDollars(t.Cents)}}]}}])}(),function(){"use strict";angular.module("budgetingTool").directive("budgetPeriodDropdown",["budgetingToolConfig","periodAmount","siteConfig",function(e,t,n){return{restrict:"E",scope:{amount:"=",model:"="},templateUrl:n.APP_PATH+"app/pages/tools/budgeting-tool/components/budget-period-dropdown/budgetPeriodDropdown.html",controller:["$scope",function(n){n.periods=e.BUDGET_PERIODS,n.setPeriod=function(e,o){void 0===n.amount||n.amount.eq(0)||angular.copy(t.convert(n.amount,e,o),n.amount),angular.copy(o,n.model)}}]}}])}(),function(){"use strict";angular.module("budgetingTool").directive("budgetSectionHeading",["siteConfig",function(e){return{restrict:"E",templateUrl:e.APP_PATH+"app/pages/tools/budgeting-tool/components/budget-section-heading/budgetSectionHeading.html"}}])}(),function(){"use strict";angular.module("budgetingTool").directive("budgetViewChooser",["budgetingToolConfig","budgetView","siteConfig","$analytics",function(e,t,n,o){return{restrict:"E",templateUrl:n.APP_PATH+"app/pages/tools/budgeting-tool/components/budget-view-chooser/budgetViewChooser.html",scope:!0,controller:["$scope",function(r){r.viewTemplates=e.VIEW_TEMPLATES,r.setView=function(e){o.pageTrack("/tools/budgeting-tool/"+e),t.set(e)},r.getTemplateIconPath=function(t){return n.APP_PATH+e.BUDGETING_TOOL_IMAGE_PATH+"/"+t},r.isViewSelected=function(e){return e===t.get()}}]}}])}(),function(){"use strict";angular.module("budgetingTool").directive("categoryPeriodDropdown",["siteConfig",function(e){return{restrict:"E",scope:!1,templateUrl:e.APP_PATH+"app/pages/tools/budgeting-tool/components/category-period-dropdown/categoryPeriodDropdown.html",link:function(e){e.setPeriod=function(t){e.category.Period=t}}}}])}(),function(){"use strict";angular.module("budgetingTool").directive("displayDollars",["categoryValidator",function(e){return{restrict:"A",require:"ngModel",scope:{perYear:"="},link:function(t,n,o,r){var a=t.perYear||1;r.$parsers.push(function(t){if(e.cents(t))return new BigNumber(t).times(100).times(a)}),r.$formatters.push(function(e){return e?e.equals(0)?o.Placeholder:e.div(100).div(a).toNumber():o.Placeholder})}}}])}(),function(){"use strict";angular.module("budgetingTool").directive("focusInput",["$timeout",function(e){return{restrict:"A",link:function(t,n){e(function(){n[0].focus()},0)}}}])}(),function(){"use strict";angular.module("budgetingTool").directive("guaranteeViewport",["$timeout","$window","budgetingToolConfig",function(e,t,n){return{restrict:"A",link:function(o,r){function a(e){return e.bottom>0&&e.right>0&&e.left<(t.innerWidth||document.documentElement.clientWidth)&&e.top<(t.innerHeight||document.documentElement.clientHeight)}r.on("focus",function(){var o=r[0].getBoundingClientRect();t.innerWidth<n.TABLET_VIEWPORT_WIDTH&&(a(o)||e(function(){angular.element(r).parents(".budget-category-copy-container")[0].scrollIntoView()},0),angular.element("navigation").hide())}),r.on("blur",function(){t.innerWidth<n.TABLET_VIEWPORT_WIDTH&&angular.element("navigation").show()})}}}])}(),function(){"use strict";angular.module("budgetingTool").directive("incomeStream",["siteConfig",function(e){return{restrict:"E",scope:{placeholder:"@",stream:"=model",period:"=",removeStream:"&"},templateUrl:e.APP_PATH+"app/pages/tools/budgeting-tool/components/income-stream/incomeStream.html"}}])}(),function(){"use strict";angular.module("budgetingTool").directive("inlineEditableAmount",["$timeout","siteConfig",function(e,t){return{restrict:"E",templateUrl:t.APP_PATH+"app/pages/tools/budgeting-tool/components/inline-editable-amount/inlineEditableAmount.html",controller:["$scope","Budget","budgetingToolConfig",function(e,t,n){e.toggleEditable=function(o){o.editing?(void 0===e.inlineEditValue||e.inlineEditValue.lessThan(0)||!e.inlineEditValue.lessThan(Number.MAX_SAFE_INTEGER||n.IE_MAX_SAFE_INTEGER)||e.inlineEditValue.eq(o.Cents)||(angular.copy(e.inlineEditValue,o.Cents),t.setDirty()),e.inlineEditValue=new BigNumber(0)):angular.copy(o.Cents,e.inlineEditValue),o.editing=!o.editing}}]}}])}(),function(){"use strict";angular.module("budgetingTool").directive("inlineEditableCategory",["$document","$rootScope","Budget","budgetModal","budgetingToolConfig","categoryValidator","periodAmount","siteConfig",function(e,t,n,o,r,a,i,l){return{restrict:"E",templateUrl:l.APP_PATH+"app/pages/tools/budgeting-tool/components/inline-editable-category/inlineEditableCategory.html",link:function(a){function l(e){if(void 0!==a.inlineEditCategory.Cents&&(a.inlineEditCategory.Cents.eq(e.Cents)||(angular.copy(a.inlineEditCategory.Cents,e.Cents),n.setDirty())),void 0!==a.inlineEditCategory.Title&&a.inlineEditCategory.Title!==e.Title&&(e.Title=a.inlineEditCategory.Title.substring(0,r.MAX_CATEGORY_TITLE_FIELD),n.setDirty()),a.inlineEditCategory.Period.PerYear!==e.Period.PerYear){var t=i.convert(a.inlineEditCategory.Cents,e.Period,a.inlineEditCategory.Period);angular.copy(t,e.Cents),angular.copy(a.inlineEditCategory.Period,e.Period),n.setDirty()}e.editing=!1}function s(){return _.reject(_.map(n.budget.MasterCategories,function(e){return _.find(e.Categories,{editing:!0})}),_.isUndefined)}function u(n){angular.element(n.target).parents("inline-editable-category").length||"dropdown-backdrop"===n.target.className||(_.forEach(s(),function(e){t.$apply(l(e))}),n.stopImmediatePropagation(),e.off("click",u))}a.openCategoryEditForm=function(){_.forEach(s(),function(e){l(e)}),angular.copy(a.category,a.inlineEditCategory),a.category.editing=!0,e.on("click",u)},a.getCategoryAmount=function(){return i.displayDollars(a.category.Cents,a.category.Period)},a.removeCategory=function(e){o.areYouSureModal().then(function(t){t&&(a.mc.Categories.splice(e,1),n.setDirty())})}}}}])}(),function(){"use strict";angular.module("budgetingTool").directive("introHeader",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/budgeting-tool/components/intro-header/introHeader.html",restrict:"E",scope:!1}}])}(),function(){"use strict";angular.module("budgetingTool").directive("mobileSave",["siteConfig",function(e){return{restrict:"E",templateUrl:e.APP_PATH+"app/pages/tools/budgeting-tool/components/mobile-save/mobileSave.html"}}])}(),function(){"use strict";angular.module("budgetingTool").directive("printView",["siteConfig",function(e){return{restrict:"E",templateUrl:e.APP_PATH+"app/pages/tools/budgeting-tool/components/print-view/printView.html"}}])}(),function(){"use strict";angular.module("budgetingTool").directive("saveToHome",["$document","$window","deviceDetector","siteConfig",function(e,t,n,o){return{templateUrl:o.APP_PATH+"app/pages/tools/budgeting-tool/components/save-to-home/saveToHome.html",restrict:"E",controller:["$scope",function(e){e.saveToHomePopover=o.APP_PATH+"app/pages/tools/budgeting-tool/components/save-to-home/saveToHomePopover.html",e.saveToHomePopoverOpen=!1}],link:function(e){e.isMobile=function(){switch(n.device){case"iphone":case"ipad":case"android":case"windows-phone":return!0;default:return!1}},e.isIOS=function(){return"iphone"===n.device||"ipad"===n.device},e.isAndroid=function(){return"android"===n.device},e.isWindowsPhone=function(){return"windows-phone"===n.device},e.isSafari=function(){return"safari"===n.browser},e.isUnknown=function(){return!(e.isIOS()||e.isSafari()||e.isAndroid()||e.isWindowsPhone())},e.closeSaveToHome=function(){e.saveToHomePopoverOpen=!1}}}}])}(),function(){"use strict";angular.module("budgetingTool").filter("truncate",function(){return function(e,t){return e.length<t?e:e.substring(0,t-3)+"..."}})}(),function(){"use strict";angular.module("budgetingTool").controller("BudgetTemplateCtrl",["$scope","Budget","siteConfig","viewModel",function(e,t,n,o){e.siteConfig=n,e.data=o.data,e.budget=t.get()}])}(),function(){"use strict";function e(e){return e()}e.$inject=["budgetTemplateResolver"],angular.module("budgetingTool").config(["$routeProvider","siteConfig",function(t,n){t.when("/tools/budgeting-tool/budget-template",{templateUrl:n.APP_PATH+"app/pages/tools/budgeting-tool/views/budget-template/budgetTemplate.html",controller:"BudgetTemplateCtrl",resolve:{viewModel:e}})}])}(),function(){"use strict";angular.module("budgetingTool").controller("WelcomeCtrl",["$location","$scope","$window","Budget","budgetingToolConfig","periodAmount","siteConfig","viewModel",function(e,t,n,o,r,a,i,l){function s(){o.clear(),o.get().then(function(t){if(!_.isEmpty(t))return e.path(r.BUDGETING_TOOL_PATH)})}t.siteConfig=i,t.data=l.toolPage,t.data.BudgetPeriods=r.BUDGET_PERIODS,t.initialPeriod=r.BUDGET_PERIODS[r.DEFAULT_BUDGET_PERIOD],t.isLoggedIn=l.isLoggedIn,t.budget=angular.copy(o.create()),l.salary&&(t.budget.Cents=l.salary),t.next=function(){if(console.log(t.budget.Cents),t.budgetAmountForm.$valid){var n=angular.copy(a.convert(t.budget.Cents,t.initialPeriod,t.budget.Period));return t.budget.IncomeStreams=[{Title:"My income",Cents:n,Removeable:!1}],angular.copy(t.budget,o.budget),e.path(r.BUDGETING_TOOL_PATH+"/budget-template")}},angular.element(n).on("hidden.bs.modal",s),t.$on("$destroy",function(){angular.element(n).off("hidden.bs.modal",s)})}])}(),function(){"use strict";function e(e){return e()}e.$inject=["welcomeResolver"],angular.module("budgetingTool").config(["$routeProvider","siteConfig",function(t,n){t.when("/tools/budgeting-tool/welcome",{templateUrl:n.APP_PATH+"app/pages/tools/budgeting-tool/views/welcome/welcome.html",controller:"WelcomeCtrl",resolve:{viewModel:e}})}])}(),function(){"use strict";angular.module("sorted").controller("ModalInstanceAdd",["$scope","$uibModalInstance","planningData",function(e,t,n){e.random=function(){return Math.round(6*Math.random()+1)},e.newGoal={},e.ok=function(){var o={Title:e.newGoal.name,Type:"",Price:e.newGoal.amount,Draggable:"true",Color:"color-"+e.random()};n.goals.allGoals.GoalList.push(o),t.close()},e.cancel=function(){t.dismiss("cancel")}}])}(),function(){"use strict";angular.module("sorted").controller("ModalInstanceDelete",["$scope","$uibModalInstance",function(e,t){e.ok=function(){t.close()},e.cancel=function(){t.dismiss("cancel")}}])}(),function(){"use strict";angular.module("sorted").controller("ModalInstanceEdit",["$scope","$uibModalInstance","planningData",function(e,t,n){e.name=n.tempItem.Title,isNaN(n.tempItem.Price)?e.price="":e.price=n.tempItem.Price,e.ok=function(){n.tempItem.Title=e.name,n.tempItem.Price=e.price,n.goals[n.tempCategory].GoalList.push(n.tempItem),n.goalEditable=[],t.close()},e.cancel=function(){t.dismiss("cancel")}}])}(),function(){"use strict";angular.module("sorted").directive("goalDraggable",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/planning-tool/components/goal-draggable/goalDraggable.html",restrict:"E",scope:{data:"="},controller:["$scope","planningData",function(t,n){t.siteConfig=e,t.test=function(e,t,o,r){n.tempCategory=o.Category,n.tempItem=r}}]}}])}(),function(){"use strict";angular.module("sorted").directive("goalDroppable",["siteConfig","$uibModal",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/planning-tool/components/goal-droppable/goalDroppable.html",restrict:"E",scope:{data:"="},controller:["$scope",function(t){t.siteConfig=e,t.over=function(){},t.overdose=function(){}}]}}])}(),function(){"use strict";angular.module("sorted").controller("GoalWelcomeController",["$scope","pageData","siteConfig",function(e,t,n){e.appPath=n.APP_PATH,e.data=t.data[0],e.data.Link="/tools/goal-planner/welcome"}])}(),function(){"use strict";angular.module("sorted").controller("PlanningResultsController",["$scope","planningData","$uibModal","siteConfig","profileApi","$rootScope",function(e,t,n,o,r,a){var i=!1;e.goals=t.goals,e.data={Link:"/tools/goal-planner/welcome",Title:"Goal Planner",ThumbnailImage:{Filename:"assets/Uploads/goal-planner.png"}},console.log(e.data);var l=function(){return n.open({templateUrl:o.APP_PATH+"app/pages/tools/planning-tool/components/save-resolve/saveResolve.html",controller:"ModalInstanceSaveResolve"}).result},s=function(){l().then(function(){a.userLogged&&t.id?t.update(e.goals,t.id):t.save(e.goals),i=!1})};e.saveGoals=function(){i=!0,r.isLoggedIn().then(function(e){e?s():$("#login-modal").modal("show")})},e.short=e.goals.short,e.medium=e.goals.medium,e.long=e.goals.long,e.shortBase={BaseName:"short",Title:"My short-term goals (0-3 years)",Copy:"Smaller, short-term goals are quick wins. They can help us get ahead and move us towards the bigger goals for the long term.",Placeholder:"Add your short-term goals to see them here",Links:[{icon:"themes/sorted/assets/images/filters/all-tools.svg",title:"Tools to try",links:[{title:"Budgeting tool",url:"tools/budgeting-tool/welcome"},{title:"Savings calculator",url:"tools/savings-calculator"},{title:"Debt calculator",url:"tools/debt-calculator"}]},{icon:"themes/sorted/assets/images/filters/filters-latest.svg",title:"Guides to read",links:[{title:"Budget  dont fudge it",url:"guides/budget-dont-fudge-it"},{title:"Saving  paying ourselves first",url:"guides/saving-paying-ourselves-first"},{title:"Get out of debt fast",url:"guides/get-out-of-debt-fast"}]}]},e.mediumBase={BaseName:"medium",Title:"My medium-term goals (4-9 years)",Copy:"Medium-term goals are a bit further off, but we also have more time to work up to them gradually, reducing our need for debt.",Placeholder:"Add your medium-term goals to see them here",Links:[{icon:"themes/sorted/assets/images/filters/all-tools.svg",title:"Tools to try",links:[{title:"Savings calculator",url:"tools/savings-calculator"},{title:"Net worth calculator ",url:"tools/net-worth-calculator"},{title:"Mortgage calculator ",url:"tools/mortgage-calculator"}]},{icon:"themes/sorted/assets/images/filters/filters-latest.svg",title:"Guides to read",links:[{title:"Buying a first home",url:"guides/buying-a-first-home"},{title:"Managing a mortgage",url:"guides/managing-a-mortgage"},{title:"Assets  protecting whats important",url:"guides/asset-protection"}]}]},e.longBase={BaseName:"long",Title:"My long-term goals (10+ years)",Copy:"The earlier we start saving and investing for long-term goals, the better. Time is on our side, and its surprising how much we can achieve in the long run.",Placeholder:"Add your long-term goals to see them here",Links:[{icon:"themes/sorted/assets/images/filters/all-tools.svg",title:"Tools to try",links:[{title:"Retirement planner",url:"tools/retirement-planner"},{title:"KiwiSaver savings calculator",url:"tools/kiwisaver-savings-calculator"},{title:"Investor kickstarter",url:"tools/investor-kickstarter"}]},{icon:"themes/sorted/assets/images/filters/filters-latest.svg",title:"Guides to read",links:[{title:"Planning for retirement",url:"guides/planning-for-retirement"},{title:"Investing questions",url:"guides/investing-questions"},{title:"KiwiSaver  looking after it",url:"guides/kiwisaver-looking-after-it"}]}]}}])}(),function(){"use strict";angular.module("sorted").directive("integer",function(){return{require:"ngModel",link:function(e,t,n,o){o.$validators.integer=function(e,t){var n=/^\-?\d+$/;return!!o.$isEmpty(e)||!!n.test(t)}}}})}(),function(){"use strict";angular.module("sorted").directive("linkBox",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/planning-tool/components/link-box/linkBox.html",restrict:"E",scope:{data:"="}}}])}(),function(){"use strict";angular.module("sorted").controller("ModalInstanceOverdose",["$scope","$uibModalInstance",function(e,t){e.ok=function(){t.close()},e.cancel=function(){t.dismiss("cancel")}}])}(),function(){"use strict";angular.module("sorted").directive("resultCollapse",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/planning-tool/components/result-collapse/resultCollapse.html",restrict:"E",scope:{data:"=",base:"="}}}])}(),function(){"use strict";angular.module("sorted").controller("ModalInstanceSaveResolve",["$scope","$uibModalInstance","planningData",function(e,t,n){e.title="",e.ok=function(){n.setTitle(e.title),t.close()},e.cancel=function(){t.dismiss("cancel")}}])}(),function(){"use strict";angular.module("sorted").directive("welcomeHeader",["siteConfig",function(e){return{templateUrl:e.APP_PATH+"app/pages/tools/planning-tool/components/welcome-header/welcomeHeader.html",restrict:"E",scope:{data:"="},controller:["$scope","$rootScope",function(t,n){t.breadcrumbs=[{title:"tools",path:"tools"},{title:"Goal planner",path:"tools/goal-planner/welcome"}],t.siteConfig=e,void 0!==t.data&&n.$emit("newPageLoaded",{title:t.data.Title,description:t.data.MetaDescription})}]}}])}(),function(){"use strict";angular.module("budgetingTool").directive("budgetBreakdownLegend",["siteConfig",function(e){return{restrict:"E",templateUrl:e.APP_PATH+"app/pages/tools/budgeting-tool/components/budget-breakdown/budget-breakdown-legend/budgetBreakdownLegend.html",controller:["$scope","totalValues",function(e,t){e.getLegendAmount=function(e){var n=t.getSubtotal();return e.div(n).times(100).toNumber()}}]}}])}(),function(){"use strict";angular.module("budgetingTool").directive("budgetCategory",["budgetingToolConfig","periodAmount","siteConfig",function(e,t,n){return{restrict:"E",templateUrl:n.APP_PATH+"app/pages/tools/budgeting-tool/components/budget-master-category/budget-category/budgetCategory.html",controller:["$scope",function(n){n.getCategoryAmount=function(e){return t.displayDollars(e.Cents,e.Period)},n.MAX_CATEGORY_TITLE=e.MAX_CATEGORY_TITLE}]}}])}(),function(){"use strict";angular.module("budgetingTool").factory("budgetTemplateResolver",["$http","$location","$log","$q","$resource","Budget","budgetingToolConfig","siteConfig",function(e,t,n,o,r,a,i,l){return function(){var s=e({method:"GET",url:l.API_PREFIX+"/page/get/budgeting-tool"}).then(function(e){return e.data[0]},function(e){return n.error(e),null}),u=r(l.APP_PATH+"/json/budget-master-categories.json").get().$promise;return o.all([s,u,a.get()]).then(function(e){if(_.isEmpty(e[2]))return t.path(i.BUDGETING_TOOL_PATH+"/welcome"),o.reject("User needs to visit welcome page first.");if(e[2].hasOwnProperty("MasterCategories"))return t.path(i.BUDGETING_TOOL_PATH),o.reject("User already has a budget");var n=e[1];return e[0]&&(n.BackgroundImage=e[0].BackgroundImage?e[0].BackgroundImage:n.BackgroundImage,n.ForegroundImage=e[0].ForegroundImage?e[0].ForegroundImage:null),{data:n}})}}])}(),function(){"use strict";angular.module("budgetingTool").directive("budgetingQuestions",["$location","Budget","budgetingToolConfig","masterCategoryCompiler","siteConfig",function(e,t,n,o,r){return{templateUrl:r.APP_PATH+"app/pages/tools/budgeting-tool/views/budget-template/budgeting-questions/budgetingQuestions.html",restrict:"E",scope:!1,link:function(t){t.togglePresetSelect=function(e){e.Selected?t.budget.Categories=_.difference(t.budget.Categories,e.Categories):t.budget.Categories=_.union(t.budget.Categories,e.Categories),e.Selected=!e.Selected},t.submitForm=function(r){return t.budget.Categories=r?[]:t.budget.Categories,t.budget.Categories=_.flatMap(t.data.MasterCategories,function(e){return _.filter(e.Categories,function(e){return _.includes(t.budget.Categories,e.ID)})}),t.budget.MasterCategories=o.compile(_.union(t.budget.Categories,_.flatMap(t.data.MasterCategories,function(e){return _.filter(e.Categories,{Default:!0})})),t.data.MasterCategories),delete t.budget.Categories,e.path(n.BUDGETING_TOOL_PATH)}}}}])}(),function(){"use strict";angular.module("budgetingTool").directive("budgetAmountForm",["$location","siteConfig",function(e,t){return{templateUrl:t.APP_PATH+"app/pages/tools/budgeting-tool/views/welcome/budget-amount-form/budgetAmountForm.html",
restrict:"E"}}])}(),function(){"use strict";angular.module("budgetingTool").factory("welcomeResolver",["$http","$location","$log","$q","Budget","budgetingToolConfig","Profile","siteConfig",function(e,t,n,o,r,a,i,l){return function(){var s=e({method:"GET",url:l.API_PREFIX+"/page/get/budgeting-tool"}).then(function(e){return e.data[0]},function(e){return n.error(e),null});return o.all([s,i.get(!0),r.get()]).then(function(e){if(!_.isEmpty(e[2])&&e[2].hasOwnProperty("MasterCategories"))return t.path(a.BUDGETING_TOOL_PATH),o.reject("User already has a budget");var n=null;return t.search().hasOwnProperty("salary")&&(n=100*parseInt(t.search().salary,10))>0&&n<(Number.MAX_SAFE_INTEGER||a.IE_MAX_SAFE_INTEGER)&&(n=new BigNumber(n).times(a.BUDGET_PERIODS[a.DEFAULT_BUDGET_PERIOD].PerYear)),{toolPage:e[0],isLoggedIn:!!e[1].ID,salary:n}})}}])}(),function(){"use strict";angular.module("budgetingTool").directive("budgetPreset",["colourGenerator","siteConfig",function(e,t){return{restrict:"E",templateUrl:t.APP_PATH+"app/pages/tools/budgeting-tool/views/budget-template/budgeting-questions/budget-preset/budgetPreset.html",link:function(t){t.getPresetBackground=function(t,n){return t.Selected?e.hexToRgba(n,.2):null}}}}])}();!function(){"use strict";angular.module("budgetingTool").directive("budgetViewPlate",["siteConfig","budgetView","budgetingToolConfig",function(e,t,n){return{restrict:"E",templateUrl:e.APP_PATH+"app/pages/tools/budgeting-tool/views/budget-template/budgeting-questions/budget-view/budgetViewPlate.html",link:function(){},controller:["$scope",function(o){o.viewTemplates=n.VIEW_TEMPLATES,o.setView=t.set,o.getTemplateIconPath=function(t){return e.APP_PATH+n.BUDGETING_TOOL_IMAGE_PATH+"/"+t},o.isViewSelected=function(e){return e===t.get()}}]}}])}();