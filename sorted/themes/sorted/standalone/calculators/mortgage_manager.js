var SortedCalculator_Mortgage_Manager=SortedCalculator.extend({init:function(){"use strict";this._super()},calculate:function(e,t){"use strict";this._super(),console.debug=!1,t===!0&&(console.debug=!0),e={freq1:isNaN(parseInt(e.freq1,10))?null:parseInt(e.freq1,10),freq2:isNaN(parseInt(e.freq2,10))?null:parseInt(e.freq2,10),freq3:isNaN(parseInt(e.freq3,10))?null:parseInt(e.freq3,10),interest1:isNaN(parseFloat(e.interest1,10))?null:parseFloat(e.interest1,10),interest2:isNaN(parseFloat(e.interest2,10))?null:parseFloat(e.interest2,10),interest3:isNaN(parseFloat(e.interest3,10))?null:parseFloat(e.interest3,10),loan1:isNaN(parseInt(e.loan1,10))?null:parseInt(e.loan1,10),loan2:isNaN(parseInt(e.loan2,10))?null:parseInt(e.loan2,10),loan3:isNaN(parseInt(e.loan3,10))?null:parseInt(e.loan3,10),lump_sum1:isNaN(parseInt(e.lump_sum1,10))?null:parseInt(e.lump_sum1,10),lump_sum2:isNaN(parseInt(e.lump_sum2,10))?null:parseInt(e.lump_sum2,10),lump_sum3:isNaN(parseInt(e.lump_sum3,10))?null:parseInt(e.lump_sum3,10),repayments1:isNaN(parseInt(e.repayments1,10))?null:parseInt(e.repayments1,10),repayments2:isNaN(parseInt(e.repayments2,10))?null:parseInt(e.repayments2,10),repayments3:isNaN(parseInt(e.repayments3,10))?null:parseInt(e.repayments3,10),type1:isNaN(parseInt(e.type1,10))?null:parseInt(e.type1,10),type2:isNaN(parseInt(e.type2,10))?null:parseInt(e.type2,10),type3:isNaN(parseInt(e.type3,10))?null:parseInt(e.type3,10),month_born1:isNaN(parseInt(e.month_born1,10))?null:parseInt(e.month_born1,10),year_born1:isNaN(parseInt(e.year_born1,10))?null:parseInt(e.year_born1,10),month_born2:isNaN(parseInt(e.month_born2,10))?null:parseInt(e.month_born2,10),year_born2:isNaN(parseInt(e.year_born2,10))?null:parseInt(e.year_born2,10),month_born3:isNaN(parseInt(e.month_born3,10))?null:parseInt(e.month_born3,10),year_born3:isNaN(parseInt(e.year_born3,10))?null:parseInt(e.year_born3,10)};var n={};return n.mortgage1=this.real_calc(e,1),n.mortgage2=this.real_calc(e,2),n.mortgage3=this.real_calc(e,3),n.mortgage1.warning&&this.add_error("repayment_impossible_1"),n.mortgage2.warning&&this.add_error("repayment_impossible_2"),n.mortgage3.warning&&this.add_error("repayment_impossible_3"),delete n.mortgage1.warning,delete n.mortgage2.warning,delete n.mortgage3.warning,n},real_calc:function(e,t){"use strict";var n,r={},a={};return r.b8=Number(e["loan"+t]),r.d8=Number(e["interest"+t]/100),r.b12=Number(e["repayments"+t]),r.d12=Number(e["lump_sum"+t]),r.l7=Number(e["freq"+t]),r.j22=r.d8/r.l7,r.j24=r.b8,r.j25=r.b8-r.d12,r.j22>0?r.j28=-Math.log(1-r.j25/r.b12*r.j22)/Math.log(1+r.j22)/r.l7:r.j28=r.j25/r.b12/r.l7,r.c25=r.j28,r.i7=e["month_born"+t],r.c18=e["year_born"+t],r.d25=null,null!==r.i7&&null!==r.c18&&(n=new TimeSpan(Date.today()-Date.parse("15/"+r.i7+"/"+r.c18)),r.d25=this.trunc(n.getDays()/365.25+r.j28)),r.c22=r.b12*r.l7*r.j28+r.d12,r.b25=r.c22-r.j24,r.b12/r.b8<=r.j22?r.warning=1:r.warning=0,a.total=this.round(r.c22,0),a.interest=this.round(r.b25,0),a.time=r.c25,a.age=r.d25,a.warning=r.warning,console.debug===!0&&(1===a.warning?$("#warning"+t).html("<h3 style='color:#f00'>you will see carousel before the end of this mortgage!</h3>"):$("#warning"+t).html(""),$("#total"+t).html(a.total),$("#interest"+t).html(a.interest),$("#repaytime"+t).html(a.time),$("#agerepaid"+t).html(a.age)),a}}),testmode=!1,testObj={loan1:3e5,type1:1,interest1:7.5,repayments1:2e3,freq1:12,lump_sum1:1e4,loan2:2e5,type2:1,interest2:6.5,repayments2:1e3,freq2:12,lump_sum2:2e4,loan3:1e5,type3:2,interest3:3.5,repayments3:400,freq3:12,lump_sum3:0,month_born:9,year_born:1977};testmode===!0&&function(e){"use strict";function t(){var e=new SortedCalculator_Mortgage_Manager,t=e.calculate(testObj,!0);console.log("><><><><> INPUT <><><><><"),console.dir(testObj),console.log("><><><><> OUTPUT <><><><><"),console.dir(t)}e(document).ready(function(){e("html").append("<h1>TESTMODE</h1>").append("<input id='calculate-test' type='button' value='test calc' />")}),e("#calculate-test").live("click",function(){t()})}(jQuery);