console.debug=!1;var SortedCalculator_KiwiSaver=SortedCalculator.extend({init:function(){"use strict";debug&&console.log("SortedCalculator_KiwiSaver.init"),this._super()},debug_mode:!1,check_vars:function(e,t){"use strict";var r;for(r=0;r<e.length;r+=1)if(null===e[r]||void 0===e[r])return debug&&console.log(t+") found null or undefined in key ["+r+"]",e),!1;return!0},epic:function(e){"use strict";var t,r,i,s,o,_,a,n,l,u,h,c,m={};if(m.a_year=null,null!==this.work.e11&&(m.a_year=this.roundUP(e/this.work.e11)),m.b_period=Number(e),t=null,null!==this.work.dob){var k;k=((new Date).getTime()-this.work.dob.getTime())/1e3/60/60/24,m.period_age=(k+365.25/this.work.e37*(m.b_period-1))/365.25,t=!(m.period_age<18),m.over18=t}m.c_year2=null,null!==m.b_period&&null!==this.work.e31&&null!==this.work.e11&&0!==this.work.e11&&null!==t&&(m.c_year2=t?Math.max(0,this.roundUP((m.b_period-this.work.e31)/this.work.e11)):"under 18"),m.d_salary=null,null!==this.work.e11&&null!==this.work.e8&&null!==m.a_year&&null!==this.work.e11&&0!==this.work.e11&&(m.d_salary=this.work.e10*Math.pow(1+this.work.e8,m.a_year-1)/this.work.e37),m.e_starting_value=this.work.kiwisaver_start_value,m.b_period>1&&this.check_vars([this.table[m.b_period-1].m_end_value],"m_end_value not defined yet :77")&&(m.e_starting_value=this.table[m.b_period-1].m_end_value),m.f_add_interest=null,null!==m.e_starting_value&&null!==this.work.e7&&null!==this.work.e11&&0!==this.work.e11&&(m.f_add_interest=m.e_starting_value*Math.pow(1+this.work.e7,1/this.work.e11)),m.g_govt_kick_start=0,m.h_employee=null,2===this.work.e39?(n=e>=this.work.e21?Math.max(.03,this.work.e12):this.work.e12,m.h_employee=m.d_salary*n):null!==this.work.e17&&null!==this.work.e15&&null!==this.work.e16&&null!==this.work.e11&&0!==this.work.e11&&null!==this.work.e6&&null!==m.a_year&&(r=0,"yes"===this.work.e17&&(r=1),m.h_employee=this.work.e15*(this.work.e16/this.work.e37)*Math.pow(1+this.work.e6,r*(m.a_year-1))),i=0,0===this.work.e14?1===e&&(i=this.work.e13):(l=this.work.e13*Math.max(1,this.work.e14/this.work.e37),u=e%Math.max(1,this.trunc(this.work.e37/this.work.e14))==0?1:0,i=l*u),null!==m.h_employee&&null!==i&&(m.h_employee=m.h_employee+i),m.i_employer_notax=null,"under 18"===m.c_year2||1===Number(this.work.e39)||3===Number(this.work.e39)?m.i_employer_notax=0:null!==m.b_period&&null!==this.work.e20&&null!==m.d_salary&&null!==this.work.e19&&(m.i_employer_notax=0,m.b_period<this.work.e20&&(m.i_employer_notax=m.d_salary*this.work.e19)),s=null,m.j_employer_tax=null,"under 18"===m.c_year2||1===Number(this.work.e39)||3===Number(this.work.e39)?m.j_employer_tax=0:null!==m.b_period&&null!==this.work.e20&&(s=0,m.b_period<this.work.e20?null!==this.work.f19&&null!==this.work.e19&&(s=Math.max(0,this.work.f19-this.work.e19)):null!==this.work.f19&&null!==this.work.e21&&(s=m.b_period>=this.work.e21?Math.max(.03,this.work.f19)*(1-this.work.f41):this.work.f19*(1-this.work.e41)),null!==s&&null!==m.d_salary&&null!==this.work.e41&&(m.j_employer_tax=m.d_salary*s)),m.k_tax_credit=0;if(m.last_tax_credit_period=1,1===e?m.last_tax_credit_period=1:(m.last_tax_credit_period,this.table[e-1].c_year2<m.c_year2?m.last_tax_credit_period=e:this.check_vars([this.table[e-1].last_tax_credit_period],"epicObj.last_tax_credit_period")&&(m.last_tax_credit_period=this.table[e-1].last_tax_credit_period)),o=1!==m.last_tax_credit_period?e+1-m.last_tax_credit_period:e,h={},h.total=0,e===this.work.j5){for(this.check_vars([o,this.work.e37,this.work.e33],"part_a.a1")&&(h.a1=this.work.e33),_=0,a=e-o;a<e;a+=1)a>0&&this.check_vars([this.table[a].h_employee],"tax credit current_employee_total")&&(_+=this.table[a].h_employee);1===m.last_tax_credit_period&&(_+=m.h_employee),h.a2=_/2,h.total=Math.min(h.a1,h.a2)}if(c={},c.total=0,e>1){if(o=null!==this.table[e-1].last_tax_credit_period?e-this.table[e-1].last_tax_credit_period:e,c.b1=Math.min(1,o/this.work.e37),this.table[e-1].c_year2<m.c_year2){for(_=0,a=this.table[e-1].last_tax_credit_period-1;a<e-1;a+=1)this.table[a+1].over18&&(_+=this.table[a+1].h_employee);c.b2=_/2,c.total=Math.min(this.work.e33,c.b2)}}else c.b2=0;return m.k_tax_credit=h.total+c.total,m.k_tax_credit_b2=c.b2,m.l_total=null,null!==m.g_govt_kick_start&&null!==m.h_employee&&null!==m.i_employer_notax&&null!==m.j_employer_tax&&null!==m.k_tax_credit&&(m.l_total=Number(m.g_govt_kick_start)+Number(m.h_employee)+Number(m.i_employer_notax)+Number(m.j_employer_tax)+Number(m.k_tax_credit)),m.m_end_value=null,this.check_vars([m.l_total,m.f_add_interest],"epicObj.m_end_value: ~255")&&(m.m_end_value=m.l_total+m.f_add_interest),m.o_todays_dollars=null,this.check_vars([m.m_end_value,this.work.f6],"epicObj.o_todays_dollars:~262")&&0!==Math.pow(1+this.work.f6,e)&&(m.o_todays_dollars=m.m_end_value/Math.pow(1+this.work.f6,e)),m.p_interest=null,null!==m.f_add_interest&&null!==m.e_starting_value&&(m.p_interest=m.f_add_interest-m.e_starting_value),m},work:{},table:{},calculate:function(e,t){"use strict";try{this._super(),console.debug=this.debug_mode;var r,i,s,o,_,a,n,l,u,h,c="",m="",k="",w={},p=new Date;if(debug&&console.log("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX "+p.toString("HH:mm:ss")),debug&&console.log("______________Incoming Input Object______________________"),debug&&console.dir(e),this.table={},e={contrib_freq:isNaN(parseInt(e.contrib_freq,10))?null:parseInt(e.contrib_freq,10),salary:isNaN(parseInt(e.salary,10))?null:parseInt(e.salary,10),life_expectancy:isNaN(parseInt(e.life_expectancy,10))?null:parseInt(e.life_expectancy,10),kiwisaver_contribs:isNaN(parseInt(e.kiwisaver_contribs,10))?null:parseInt(e.kiwisaver_contribs,10),lump_sum_contrib:isNaN(parseInt(e.lump_sum_contrib,10))?0:parseInt(e.lump_sum_contrib,10),lump_sum_freq:isNaN(parseInt(e.lump_sum_freq,10))?null:parseInt(e.lump_sum_freq,10),kiwisaver_contribs_self:isNaN(parseInt(e.kiwisaver_contribs_self,10))?null:parseInt(e.kiwisaver_contribs_self,10),employer_contrib:isNaN(parseFloat(e.employer_contrib,10))?null:parseFloat(e.employer_contrib,10),kiwisaver_value:isNaN(parseFloat(e.kiwisaver_value,10))?0:parseFloat(e.kiwisaver_value,10),has_kiwisaver:1===parseInt(e.has_kiwisaver,10),joined_month:isNaN(parseInt(e.joined_month,10))?null:parseInt(e.joined_month,10),joined_year:isNaN(parseInt(e.joined_year,10))?null:parseInt(e.joined_year,10),month_born:isNaN(parseInt(e.monthborn,10))?null:parseInt(e.monthborn,10),year_born:isNaN(parseInt(e.year_born,10))?null:parseInt(e.year_born,10),employment_status:isNaN(parseInt(e.employment_status,10))?null:parseInt(e.employment_status,10),iar:1===parseInt(e.iar,10),result_income_freq:isNaN(parseInt(e.result_income_freq,10))?null:parseInt(e.result_income_freq,10)},null!==e.has_kiwisaver&&null!==e.kiwisaver_value&&e.has_kiwisaver===!1&&(e.kiwisaver_value=0),debug&&console.log("______________Cleaned Input Object______________________"),debug&&console.dir(e),this.work.life_expectancy=null,null!==e.life_expectancy&&(this.work.life_expectancy=e.life_expectancy),this.work.dob=null,null!==e.month_born&&null!==e.year_born&&(this.work.dob=Date.parse(e.year_born+"-"+e.month_born+"-01")),this.work.kiwisaver_start_value=0,null!==e.kiwisaver_value&&(this.work.kiwisaver_start_value=e.kiwisaver_value),this.work.e5=Date.today().toString("dd-MM-yyyy"),this.work.e6=constants.inflation_rate,this.work.f6=null,0!==e.contrib_freq&&null!==e.contrib_freq&&(this.work.f6=Math.pow(1+this.work.e6,1/e.contrib_freq)-1),e.salary<=14e3?this.work.e7=Number(constants.pir_lookup.over0k.net_return)+Number(constants.inflation_rate):e.salary>14e3&&e.salary<=48e3?this.work.e7=Number(constants.pir_lookup.over14k.net_return)+Number(constants.inflation_rate):this.work.e7=Number(constants.pir_lookup.over48k.net_return)+Number(constants.inflation_rate),this.work.e7=this.round(this.work.e7,3),this.work.e8=constants.salary_inflation_pa,this.work.e9=constants.retire_age,this.work.e10=null,null!==e.salary&&(this.work.e10=e.salary),this.work.e11=null,null!==e.contrib_freq&&(this.work.e11=e.contrib_freq),this.work.e12=0,null!==e.kiwisaver_contribs&&(this.work.e12=e.kiwisaver_contribs/100),this.work.e13=e.lump_sum_contrib,this.work.e14=e.lump_sum_freq,this.work.e15=null,null!==e.kiwisaver_contribs_self&&(this.work.e15=e.kiwisaver_contribs_self),this.work.e16=e.contrib_freq,this.work.e17=constants.inflation_adjusted_contrib_for_self_employed,this.work.e19=constants.employer_contribution_rate,null!==e.employer_contrib&&1!==e.employer_contrib||(e.employer_contrib=.02),this.work.f19=e.employer_contrib/100,u=Date.parse(constants.employer_tax_break_ends),h=Date.today(),u.setHours(0,0,0),h.setHours(0,0,0),c=new TimeSpan(u-h),this.work.e20=null,null!==this.work.e11&&(this.work.e20=c.getDays()/365.25*this.work.e11),this.work.f21=Date.parse(constants.kiwisaver_3percent_contributions_start),this.work.e37=this.work.e11,h=Date.today(),c=new TimeSpan(this.work.f21-h),this.work.e21=null,0===e.employer_contrib?this.work.e21=999999:this.work.e21=c.getDays()/365.25*this.work.e37,this.work.e23=e.has_kiwisaver,this.work.e24=this.work.e5,this.work.e23&&(null!==e.joined_year&&e.joined_year<100&&(e.joined_year=2e3+e.joined_year),this.work.e24="01-"+("0"+e.joined_month).slice(-2)+"-"+e.joined_year),this.work.e26=null,null!==Date.parse(this.work.e24)&&(this.work.e26=Date.parse(this.work.e24).add(3).months().toString("dd-MM-yyyy")),this.work.e27=null,null!==this.work.e11&&null!==this.work.e26&&(u=Date.parse(this.work.e26).add(1).days(),h=Date.today(),u.setHours(0,0,0),h.setHours(0,0,0),c=new TimeSpan(u-h),this.work.e27=Math.max(0,this.roundUP(c.getDays()/365.25*this.work.e37))),this.work.e28=constants.govt_kiwisaver_kick_start_amount,this.work.e30=null,null!==Date.parse(this.work.e24)&&(m=Date.parse(this.work.e24).toString("MM"),this.work.e30="30-06-"+Date.parse(this.work.e24).toString("yyyy"),m>="06"&&(this.work.e30=Date.parse(this.work.e30).addYears(1).toString("dd-MM-yyyy"))),this.work.e31=null,null!==this.work.e11&&null!==Date.parse(this.work.e30)&&(u=Date.parse(this.work.e30),c=new TimeSpan(h-u),this.work.e31=this.roundUP(-(c.getDays()/365.25*this.work.e11))),this.work.e33=constants.govt_kiwisaver_tax_credit_full/2,this.work.e34=null,null!==e.month_born&&null!==e.year_born&&(this.work.e34=this.date_of_retirement("01-"+e.month_born+"-"+e.year_born)),this.a=null,this.b=null,this.a=Date.parse(this.work.e24),this.b=Date.parse(this.work.e34),null!==this.a&&null!==this.b&&this.b-this.a<=0&&this.add_error("retire_before_start"),this.work.e39=e.employment_status,this.work.e35=null,this.check_vars([this.work.e11,Date.parse(this.work.e34)],"this.work.e35: ~546")&&!this.has_error("retire_before_start")&&(this.a=Date.parse(this.work.e34),this.b=Date.today(),this.n=Date.parse(this.work.e5),this.m=Date.parse(this.work.e24),this.span=new TimeSpan(this.a-this.m),this.span2=new TimeSpan(this.a-this.b),this.span24=new TimeSpan(this.n-this.m),this.work.e23?this.work.e35=this.trunc((Math.max(5,this.span.getDays()/365.25)-this.span24.getDays()/365.25)*this.work.e37):this.work.e35=this.trunc(Math.max(5,this.span2.getDays()/365.25)*this.work.e37)),this.work.e35<0)return!1;if(this.work.e41=null,null!==this.work.e10&&null!==this.work.f19&&(k=this.work.e10*(1+this.work.f19),this.work.e41=k>84e3?.33:k>57600?.3:k>16800?.175:.105),this.work.f41=null,this.check_vars([this.work.e10,this.work.f19],"this.work.f41: ~589")&&(this.work.e10*(1+Math.max(.03,this.work.f19))>84e3?this.work.f41=.33:this.work.e10*(1+Math.max(.03,this.work.f19))>57600?this.work.f41=.3:this.work.e10*(1+Math.max(.03,this.work.f19))>16800?this.work.f41=.175:this.work.f41=.105),this.work.i7=null,null!==this.work.e11&&null!==Date.parse(this.work.e24)&&(u=Date.parse(this.work.e24).addYears(3),h=Date.today(),u.setHours(0,0,0),h.setHours(0,0,0),c=new TimeSpan(u-h),this.work.i7=this.trunc(c.getDays()/365.25*this.work.e37)),this.work.i8=null,null!==this.work.e24&&null!==Date.parse(this.work.e24)&&(u=Date.parse(this.work.e24).addMonths(60),h=Date.today(),u.setHours(0,0,0),h.setHours(0,0,0),c=new TimeSpan(u-h),this.work.i8=this.trunc(c.getDays()/365.25*this.work.e37)),e.work=this.work,e.table=this.table,e.results={},this.check_vars([this.work.e35],"js: ~604")&&(this.work.j5=this.work.e35),null!==this.work.dob&&null!==this.work.e35)for({},debug&&console.log("----------- Loop Below, beware! loops "+this.work.e35+" times---------"),r=1;r<=this.work.e35;r+=1)this.table[r]=this.epic(r);if(this.work.j7=null,null!==Date.parse(this.work.e24)&&void 0!==e.table[1])if(u=Date.parse(this.work.e24).add(3).years(),h=Date.today(),u.setHours(0,0,0),h.setHours(0,0,0),c=new TimeSpan(u-h),c.getDays()/365.25<0)this.work.j7=!1;else if(this.check_vars([this.work.e11],"j7:650")&&this.check_vars([e.table[this.work.i7+1].m_end_value],"m_end_value:~648")){for(i=e.table[this.work.i7].m_end_value,s=0,r=1;r<=this.work.i7;r+=1)this.check_vars([e.table[r],e.table[r].g_govt_kick_start],"this.work.j7 sum 1")&&(s+=Number(e.table[r].g_govt_kick_start));o=0,u=Date.parse(this.work.e24).add(3).months(),h=Date.today(),u.setHours(0,0,0),h.setHours(0,0,0),c=new TimeSpan(u-h).days,this.work.j7=c<0?i-s-o-this.work.e28:i-s-o}if(this.work.j8=null,null!==Date.parse(this.work.e24)&&void 0!==Date.parse(this.work.e24))if(u=Date.parse(this.work.e24).add(5).years(),h=Date.today(),u.setHours(0,0,0),h.setHours(0,0,0),(c=new TimeSpan(u-h).days)/365.25<0)this.work.j8=!1;else if(null!==this.work.e11&&this.check_vars([e.table[this.work.i8]],"this.work.j8:695")){for(this.work.j8=e.table[this.work.i8].m_end_value,i=e.table[this.work.i8].m_end_value,s=0,r=1;r<=this.work.i8;r+=1)s+=e.table[r].g_govt_kick_start;o=0,u=Date.parse(this.work.e26),h=Date.today(),u.setHours(0,0,0),h.setHours(0,0,0),c=new TimeSpan(u-h).days,this.work.j8=c<0?i-s-o-this.work.e28:i-s-o}return this.work.j10=null,null!==e.table[this.work.e35]&&void 0!==e.table[this.work.e35]&&(this.work.j10=e.table[this.work.e35].o_todays_dollars),this.work.j11=null,this.check_vars([e.table[this.work.e35].m_end_value],"j11:731")&&(this.work.j11=e.table[this.work.e35].m_end_value),this.work.j13=null,this.check_vars([this.work.e7,this.work.e6,this.work.life_expectancy,this.work.e9,e.result_income_freq],"j13")&&(_=this.work.e7-this.work.e6+1,a=this.work.life_expectancy-this.work.e9,n=1-Math.pow(_,-a),0!==(l=Math.pow(this.work.e7-this.work.e6+1,1/e.result_income_freq)-1)&&(this.work.j13=n/l)),this.work.j16=null,null!==this.work.j10&&null!==this.work.j13&&0!==this.work.j13&&(this.work.j16=this.work.j10/this.work.j13),this.work.j17=null,null!==this.work.j11&&null!==this.work.j13&&0!==this.work.j13&&(this.work.j17=this.work.j11/this.work.j13),debug&&console.dir(e.table),w={},e.iar===!1?(this.work.retirement_lump_sum=this.work.j11,this.work.retirement_income=this.work.j17):(this.work.retirement_lump_sum=this.work.j10,this.work.retirement_income=this.work.j16),this.work.retirement_lump_sum=null===this.work.retirement_lump_sum?null:this.round(this.work.retirement_lump_sum,0),this.work.retirement_income=null===this.work.retirement_income?null:this.round(this.work.retirement_income,0),this.work.years_3=null===this.work.j7?null:this.round(this.work.j7,0),this.work.years_5=null===this.work.j8?null:this.round(this.work.j8,0),w.retirement_lump_sum=this.work.retirement_lump_sum,w.retirement_income=this.work.retirement_income,w.super_age=this.work.e9,w.life_expectancy=e.life_expectancy,w.years_3=this.work.years_3,w.years_5=this.work.years_5,this.results=e.results,this.debug(),debug&&console.log("______________Returned Output Object______________________"),debug&&console.dir(this.results),w}catch(e){debug&&console.log("///\\///\\///\\ CAUGHT ERROR in Calculate: "+e),debug&&console.dir(e)}},debug:function(){"use strict";debug&&console.log("Working data: "),debug&&console.log(this.work)}}),testObj1={year_born:"1980",monthborn:"10",gender:"2",life_expectancy:"83",employment_status:"2",salary:"50000",has_kiwisaver:1,joined_year:"2010",joined_month:"3",kiwisaver_contribs_self:"",contrib_freq:"12",lump_sum_contrib:"1000",lump_sum_freq:"0",kiwisaver_contribs:"4",employer_contrib:"3",kiwisaver_value:"10000",iar:1,result_income_freq:1,expected:{life_expectancy:83,retirement_income:19570,retirement_lump_sum:266894,super_age:65,years_3:12232,years_5:20720}},testObj2={year_born:1980,monthborn:10,gender:2,life_expectancy:83,employment_status:1,salary:5e4,has_kiwisaver:1,joined_year:2007,joined_month:3,kiwisaver_contribs_self:500,contrib_freq:12,lump_sum_contrib:1e3,lump_sum_freq:0,kiwisaver_value:1e4,kiwisaver_contribs:4,employer_contrib:3,iar:0,result_income_freq:1,expected:{life_expectancy:83,retirement_income:52857,retirement_lump_sum:720859,super_age:65,years_3:14991,years_5:29629}},testObj3={monthborn:"12",year_born:"1950",life_expectancy:"82",employment_status:"1",salary:"20000",has_kiwisaver:"0",joined_month:"12",joined_year:"1998",kiwisaver_contribs_self:"10",contrib_freq:"52",lump_sum_contrib:"0",lump_sum_freq:"0",kiwisaver_contribs:"3",employer_contrib:"2",kiwisaver_value:"0",iar:"1",result_income_freq:1,expected:{life_expectancy:82,retirement_income:426,retirement_lump_sum:5353,super_age:65,years_3:1917,years_5:3535}},testObj4={year_born:"1958",monthborn:"1",life_expectancy:"85",employment_status:"1",salary:"40000",has_kiwisaver:"0",joined_year:"",joined_month:"_none",kiwisaver_contribs_self:"0",contrib_freq:"1",lump_sum_contrib:"0",kiwisaver_value:"0",kiwisaver_contribs:"_none",employer_contrib:"_none",iar:"",lump_sum_freq:"0",result_income_freq:1,expected:{life_expectancy:85,retirement_income:110,retirement_lump_sum:1546,super_age:65,years_3:115,years_5:146}},testObj5={monthborn:"2",year_born:"1968",life_expectancy:"85",employment_status:"2",salary:"80000",has_kiwisaver:"1",joined_month:"6",joined_year:"2000",kiwisaver_contribs_self:"50",contrib_freq:"52",lump_sum_contrib:"100",lump_sum_freq:"26",kiwisaver_contribs:"3",employer_contrib:"3",kiwisaver_value:"4000",iar:"1",result_income_freq:1,expected:{life_expectancy:85,retirement_income:13821,retirement_lump_sum:203740,super_age:65,years_3:!1,years_5:!1}},testObj6={year_born:"1968",monthborn:"2",life_expectancy:"85",employment_status:"1",salary:"80000",has_kiwisaver:"1",joined_year:"2000",joined_month:"6",kiwisaver_contribs_self:"50",contrib_freq:"52",lump_sum_contrib:"100",lump_sum_freq:"0",kiwisaver_value:"4000",kiwisaver_contribs:"3",employer_contrib:"3",iar:"1",result_income_freq:1,expected:{life_expectancy:85,retirement_income:6060,retirement_lump_sum:89335,super_age:65,years_3:!1,years_5:!1}},testObj7={monthborn:"2",year_born:"1968",life_expectancy:"85",employment_status:"1",salary:"80000",has_kiwisaver:"1",joined_year:"2000",joined_month:"6",kiwisaver_contribs_self:"50",contrib_freq:"52",lump_sum_contrib:"100",lump_sum_freq:"52",kiwisaver_value:"4000",kiwisaver_contribs:"3",employer_contrib:"3",iar:"1",result_income_freq:1,expected:{life_expectancy:85,retirement_income:14150,retirement_lump_sum:208588,super_age:65,years_3:!1,years_5:!1}},testObj8={year_born:"1968",monthborn:"2",life_expectancy:"85",employment_status:"2",salary:"80000",has_kiwisaver:"1",joined_month:"6",joined_year:"2000",kiwisaver_contribs_self:"50",contrib_freq:"52",lump_sum_contrib:"100",lump_sum_freq:"0",kiwisaver_value:"4000",kiwisaver_contribs:"3",employer_contrib:"3",iar:"1",result_income_freq:1,expected:{life_expectancy:85,retirement_income:9787,retirement_lump_sum:144266,super_age:65,years_3:!1,years_5:!1}},testObj9={year_born:"1969",monthborn:"2",life_expectancy:"85",employment_status:"2",salary:"16153",has_kiwisaver:"0",joined_year:"",joined_month:"_none",kiwisaver_contribs_self:"0",contrib_freq:"52",lump_sum_contrib:"208",lump_sum_freq:"0",kiwisaver_value:"0",kiwisaver_contribs:"2",employer_contrib:"2",iar:"1",result_income_freq:1,expected:{life_expectancy:85,retirement_income:3031,retirement_lump_sum:42687,super_age:65,years_3:3277,years_5:6061}},testObj10={monthborn:"10",year_born:"1980",life_expectancy:"82",employment_status:"2",salary:"50000",has_kiwisaver:"0",joined_year:"",joined_month:"_none",kiwisaver_contribs_self:"0",contrib_freq:"52",lump_sum_contrib:"20",lump_sum_freq:"52",kiwisaver_value:"0",kiwisaver_contribs:"8",employer_contrib:"4",iar:"1",result_income_freq:1,expected:{life_expectancy:82,retirement_income:34208,retirement_lump_sum:446780,super_age:65,years_3:22326,years_5:40522}},testObj11={year_born:"1990",monthborn:"7",life_expectancy:"79",employment_status:"2",salary:"50000",has_kiwisaver:"0",joined_year:"",joined_month:"_none",kiwisaver_contribs_self:"99999",contrib_freq:"12",lump_sum_contrib:"10",lump_sum_freq:"52",kiwisaver_value:"0",kiwisaver_contribs:"3",employer_contrib:"0",iar:"1",result_income_freq:1,expected:{life_expectancy:79,retirement_income:20550,retirement_lump_sum:230563,super_age:65,years_3:6693,years_5:12309}},testObj12={year_born:"1944",monthborn:"4",life_expectancy:"85",employment_status:"2",salary:"25000",has_kiwisaver:"1",joined_year:"2007",joined_month:"11",kiwisaver_contribs_self:"0",contrib_freq:"26",lump_sum_contrib:"0",lump_sum_freq:"0",kiwisaver_value:"12000",kiwisaver_contribs:"4",employer_contrib:"2",iar:"1",result_income_freq:1,expected:{life_expectancy:void 0,retirement_income:void 0,retirement_lump_sum:void 0,super_age:void 0,years_3:void 0,years_5:void 0}},testObj13={year_born:"1946",monthborn:"4",life_expectancy:"85",employment_status:"2",salary:"25000",has_kiwisaver:"1",joined_year:"2007",joined_month:"11",kiwisaver_contribs_self:"0",contrib_freq:"26",lump_sum_contrib:"0",lump_sum_freq:"0",kiwisaver_value:"12000",kiwisaver_contribs:"4",employer_contrib:"2",iar:"1",result_income_freq:1,expected:{life_expectancy:void 0,retirement_income:void 0,retirement_lump_sum:void 0,super_age:void 0,years_3:void 0,years_5:void 0}},testObj14={year_born:"1952",monthborn:"4",life_expectancy:"85",employment_status:"2",salary:"25000",has_kiwisaver:"1",joined_year:"2007",joined_month:"11",kiwisaver_contribs_self:"0",contrib_freq:"26",lump_sum_contrib:"0",lump_sum_freq:"0",kiwisaver_value:"12000",kiwisaver_contribs:"4",employer_contrib:"2",iar:"1",result_income_freq:1,expected:{life_expectancy:85,retirement_income:1639,retirement_lump_sum:23089,super_age:65,years_3:!1,years_5:!1}},testmode=!1,i;testmode===!0&&function(e){"use strict";function t(){var t,r,i,s=new SortedCalculator_KiwiSaver,o={};if("one"==="all")t=testObj1,o=s.calculate(t,!0),console.debug=!0,debug&&console.log("><><><><> INPUT <><><><><"),debug&&console.dir(t),debug&&console.log("><><><><> OUTPUT <><><><><"),debug&&console.dir(o),console.debug=!1;else{for(r=1;r<=14;r+=1)t=window["testObj"+r],o[r]=s.calculate(t,!0),i="<div style='padding: 40px; background: #eee; color:#333; font-family: verdana;'><a name='testresults"+r+"'></a><h2>Test Case "+r+"</h2>",o[r].life_expectancy===t.expected.life_expectancy?i+="<p>Life Expectancy: <span style='color:green'>PASS</span> "+t.expected.life_expectancy+"</p>":i+="<p>Life Expectancy: <span style='color:red'>FAIL</span> "+o[r].life_expectancy+" != "+t.expected.life_expectancy+"</p>",o[r].retirement_lump_sum===t.expected.retirement_lump_sum?i+="<p>Retirement Lump Sum: <span style='color:green'>PASS</span> "+t.expected.retirement_lump_sum+"</p>":i+="<p>Retirement Lump Sum: <span style='color:red'>FAIL</span> "+o[r].retirement_lump_sum+" != "+t.expected.retirement_lump_sum+"</p>",o[r].retirement_income===t.expected.retirement_income?i+="<p>Retirement Income: <span style='color:green'>PASS</span> "+t.expected.retirement_income+"</p>":i+="<p>Retirement Income: <span style='color:red'>FAIL</span> "+o[r].retirement_income+" != "+t.expected.retirement_income+"</p>",i+="</div>",e("html").append(i),console.debug=!0,debug&&console.log("><><><><> INPUT "+r+" <><><><><"),debug&&console.dir(t),debug&&console.log("><><><><> OUTPUT "+r+" <><><><><"),debug&&console.dir(o),console.debug=!1;window.location=window.location+"#testresults"+(r-1)}}e(document).ready(function(){e("html").append("<h1>TESTMODE</h1>").append("<input id='calculate-test' type='button' value='test calc' />")}),e("#calculate-test").live("click",function(){t()})}(jQuery);