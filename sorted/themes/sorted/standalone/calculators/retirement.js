var SortedCalculator_Retirement=SortedCalculator.extend({init:function(){"use strict";this._super()},ppy:function(e){"use strict";if(parseInt(e,10)){if(5===e)return 0;if(4===e)return 1;if(3===e)return 12;if(2===e)return 26;if(1===e)return 52}return!1},test_mode:!1,calculate:function(e){"use strict";this.test_mode;var r,n,_,l,t={},o={};new Date;return e={iar:isNaN(parseInt(e.iar,10))?0:parseInt(e.iar,10),live_on:isNaN(parseInt(e.live_on,10))?null:parseInt(e.live_on,10),lifestyle_freq:isNaN(parseInt(e.lifestyle_freq,10))?null:parseInt(e.lifestyle_freq,10),partner:isNaN(parseInt(e.partner,10))?0:parseInt(e.partner,10),partner_ks:isNaN(parseInt(e.partner_ks,10))?0:parseInt(e.partner_ks,10),partner_life_expectancy:isNaN(parseInt(e.partner_life_expectancy,10))?null:parseInt(e.partner_life_expectancy,10),partner_other_income:isNaN(parseInt(e.partner_other_income,10))?0:parseInt(e.partner_other_income,10),partner_other_schemes:isNaN(parseInt(e.partner_other_schemes,10))?0:parseInt(e.partner_other_schemes,10),partner_retire_age:isNaN(parseInt(e.partner_retire_age,10))?null:parseInt(e.partner_retire_age,10),partner_gender:isNaN(parseInt(e.partner_gender,10))?null:parseInt(e.partner_gender,10),partner_month_born:isNaN(parseInt(e.partner_month_born,10))?null:parseInt(e.partner_month_born,10),partner_super:isNaN(parseInt(e.partner_super,10))?0:parseInt(e.partner_super,10),partner_year_born:isNaN(parseInt(e.partner_year_born,10))?null:parseInt(e.partner_year_born,10),your_gender:isNaN(parseInt(e.your_gender,10))?null:parseInt(e.your_gender,10),your_ks:isNaN(parseInt(e.your_ks,10))?0:parseInt(e.your_ks,10),your_life_expectancy:isNaN(parseInt(e.your_life_expectancy,10))?null:parseInt(e.your_life_expectancy,10),your_month_born:isNaN(parseInt(e.your_month_born,10))?null:parseInt(e.your_month_born,10),your_other_income:isNaN(parseInt(e.your_other_income,10))?0:parseInt(e.your_other_income,10),your_other_schemes:isNaN(parseInt(e.your_other_schemes,10))?0:parseInt(e.your_other_schemes,10),your_retire_age:isNaN(parseInt(e.your_retire_age,10))?null:parseInt(e.your_retire_age,10),your_super:isNaN(parseInt(e.your_super,10))?0:parseInt(e.your_super,10),your_year_born:isNaN(parseInt(e.your_year_born,10))?null:parseInt(e.your_year_born,10),required_savings_freq:isNaN(parseInt(e.required_savings_freq,10))?null:parseInt(e.required_savings_freq,10)},t.i10=.024,t.i11=constants.inflation_rate,t.a3=e.partner,t.your_dob=null,null!==e.your_month_born&&null!==e.your_year_born&&(t.your_dob=Date.parse("15-"+e.your_month_born+"-"+e.your_year_born),null!==t.your_dob&&t.your_dob.setHours(0,0,0)),t.partner_dob=null,1===e.partner&&null!==e.partner_month_born&&e.partner_year_born&&(t.partner_dob=Date.parse("15-"+e.partner_month_born+"-"+e.partner_year_born),null!==t.partner_dob&&t.partner_dob.setHours(0,0,0)),t.your_age=null,null!==t.your_dob&&(n=Date.today(),n.setHours(0,0,0),l=new TimeSpan(n-t.your_dob),t.your_age=l.getDays()/365.25),t.partner_age=null,null!==t.partner_dob&&(n=Date.today(),n.setHours(0,0,0),l=new TimeSpan(n-t.partner_dob),t.partner_age=l.getDays()/365.25),t.your_retire_age=e.your_retire_age,t.your_life_expectancy=e.your_life_expectancy,t.h33=null,null!==t.your_age&&(t.h33=65-t.your_age),t.h34=null,null!==t.your_retire_age&&null!==t.your_age&&(t.h34=Math.max(0,t.your_retire_age-t.your_age)),t.h35=null,null!==t.your_life_expectancy&&null!==t.your_age&&(t.h35=t.your_life_expectancy-t.your_age),1===e.partner?1===e.your_super&&1===e.partner_super?(t.c13=2*constants.nz_super_married/e.lifestyle_freq,t.h39=constants.nz_super_married/e.lifestyle_freq,t.i39=constants.nz_super_married/e.lifestyle_freq):1===e.your_super?(t.c13=constants.nz_super_ineligible_partner/e.lifestyle_freq,t.h39=constants.nz_super_ineligible_partner/e.lifestyle_freq,t.i39=0):1===e.partner_super?(t.c13=constants.nz_super_ineligible_partner/e.lifestyle_freq,t.h39=0,t.i39=constants.nz_super_ineligible_partner/e.lifestyle_freq):(t.c13=0,t.h39=0,t.i39=0):1===e.your_super?(t.c13=constants.nz_super_single/e.lifestyle_freq,t.h39=constants.nz_super_single/e.lifestyle_freq,t.i39=0):(t.c13=0,t.h39=0,t.i39=0),t.your_other_income=e.your_other_income,t.total_super=t.h39,t.total_kiwisaver=t.your_kiwisaver,t.total_other_schemes=t.h41,t.total_other_income=t.your_other_income,t.i33=null,1===t.a3&&(null!==t.partner_age&&(t.i33=65-t.partner_age),t.partner_retire_age=e.your_retire_age,t.partner_life_expectancy=e.partner_life_expectancy,t.i34=null,null!==t.partner_age&&null!==e.partner_Retire_age&&(t.i34=e.partner_retire_age-t.partner_age),t.i35=null,null!==t.i33&&(t.i35=t.partner_life_expectancy-t.partner_age),t.partner_kiwisaver=e.partner_ks,t.total_kiwisaver=null,null!==t.your_kiwisaver&&null!==t.partner_kiwisaver&&(t.total_kiwisaver=Number(t.your_kiwisaver)+Number(t.partner_kiwisaver)),t.partner_other_schemes=Number(e.partner_other_schemes),t.total_other_schemes=null,null!==t.h41&&null!==t.partner_other_schemes&&(t.total_other_schemes=t.h41+t.partner_other_schemes),t.partner_other_income=e.partner_other_income,t.total_other_income=null,null!==t.your_other_income&&null!==t.partner_other_income&&(t.total_other_income=Number(t.your_other_income)+Number(t.partner_other_income))),t.d41=null,r=0===t.partner_age||null===t.partner_age?65:t.partner_age,65-t.your_age<65-r?t.d41=1:t.d41=2,t.c12=null,null!==e.live_on&&null!==t.c13&&(t.c12=Math.max(e.live_on,t.c13)),t.other_sources=null,null!==t.c12&&null!==t.h39&&(t.other_sources=t.c12-t.h39),t.c18=constants.desired_nz_super_freq,t.c18ppy=this.ppy(t.c18),t.c20=constants.expected_kiwisaver_freq,t.c21=constants.expected_kiwisaver_freq,t.c23=constants.your_expected_other_schemes_freq,t.c23ppy=this.ppy(t.c23),t.c24=constants.partners_expected_other_schemes_freq,t.c24ppy=this.ppy(t.c24),t.c26=constants.your_expected_other_income_freq,t.c26ppy=this.ppy(t.c26),t.c27=constants.partners_expected_other_income_freq,t.c27ppy=this.ppy(t.c27),t.d48=e.iar,t.c33=0,t.c34=null,null!==t.h33&&null!==t.h34&&(t.c34=Math.max(0,t.h33-t.h34)),t.c35=null,null!==t.h35&&null!==t.h34&&null!==t.c34&&(t.c35=Math.max(0,t.h35-t.h34-t.c34)),1===t.a3&&(null!==t.your_age&&null!==t.i33&&null!==t.your_retire_age&&null!==t.partner_retire_age&&(t.c33=Math.max(0,Math.min(65-t.your_age,65-t.i33)-Math.min(t.your_retire_age-t.your_age,t.partner_retire_age-t.i33))),null!==t.h33&&null!==t.i33&&null!==t.h34&&null!==t.i34&&null!==t.c33&&(t.c34=Math.max(0,Math.max(t.h33,t.i33)-Math.min(t.h34,t.i34))-t.c33),null!==t.h35&&null!==t.i35&&null!==t.h34&&null!==t.i34&&null!==t.c33&&null!==t.c34&&(t.c35=Math.max(t.h35,t.i35)-Math.min(t.h34,t.i34)-(t.c33+t.c34))),t.c36=null,null!==t.c33&&null!==t.c34&&null!==t.c35&&(t.c36=t.c33+t.c34+t.c35),t.e20=null,null!==t.h35&&null!==t.h33&&null!==t.h34&&(t.e20=t.h35-Math.max(t.h33,t.h34)),t.e21=null,1===t.a3&&(t.e20=null,null!==t.h35&&null!==t.i35&&null!==t.h33&&null!==t.h34&&(t.e20=Math.max(t.h35,t.i35)-Math.max(t.h33,t.h34)),t.e21=null,null!==t.h35&&null!==t.i35&&null!==t.i33&&null!==t.i34&&(t.e21=Math.max(t.h35,t.i35)-Math.max(t.i33,t.i34))),t.d20=null,5===t.c20?(r=null,n=null,_=null,null!==t.i10&&null!==t.e20&&(r=1-Math.pow(1+t.i10,-t.e20)),null!==t.i10&&null!==e.lifestyle_freq&&(n=Math.pow(1+t.i10,1/e.lifestyle_freq)-1),null!==r&&null!==n&&0!==n&&(_=r/n),t.d20=null,null!==_&&0!==_&&(t.d20=1/_)):t.d20=t.c20,t.d21=null,1===t.a3&&(r=null,n=null,_=null,5===Number(t.c21)?(null!==t.i10&&null!==t.e21&&(r=1-Math.pow(1+t.i10,-t.e21)),null!==t.i10&&null!==e.lifestyle_freq&&(n=Math.pow(1+t.i10,1/e.lifestyle_freq)-1),null!==r&&null!==n&&0!==n&&(_=r/n),null!==_&&0!==_&&(t.d21=1/_)):t.d21=t.c20),t.d23=null,5===t.c23?(r=null,n=null,_=null,null!==t.i10&&null!==t.c36&&(r=1-Math.pow(1+t.i10,-t.c36)),null!==t.i10&&null!==e.lifestyle_freq&&(n=Math.pow(1+t.i10,1/e.lifestyle_freq)-1),null!==r&&null!==n&&0!==n&&(_=r/n),null!==_&&0!==_&&(t.d23=1/_)):null!==t.c23ppy&&null!==e.lifestyle_freq&&(t.d23=t.c23ppy/e.lifestyle_freq),t.d24=null,5===t.c24?(r=null,n=null,_=null,null!==t.i10&&null!==t.c36&&(r=1-Math.pow(1+t.i10,-t.c36)),null!==t.i10&&null!==e.lifestyle_freq&&(n=Math.pow(1+t.i10,1/e.lifestyle_freq)-1),null!==r&&null!==n&&0!==n&&(_=r/n),null!==_&&0!==_&&(t.d24=1/_)):null!==t.c24ppy&&null!==e.lifestyle_freq&&(t.d24=t.c24ppy/e.lifestyle_freq),t.d26=null,5===t.c26?(r=null,n=null,_=null,null!==t.i10&&null!==t.c36&&(r=1-Math.pow(1+t.i10,-t.c36)),null!==t.i10&&null!==e.lifestyle_freq&&(n=Math.pow(1+t.i10,1/e.lifestyle_freq)-1),null!==r&&null!==n&&0!==n&&(_=r/n),null!==_&&0!==_&&(t.d26=1/_)):null!==t.c26ppy&&null!==e.lifestyle_freq&&(t.d26=t.c26ppy/e.lifestyle_freq),t.d27=null,5===t.c27?(r=null,n=null,_=null,null!==t.i10&&null!==t.c36&&(r=1-Math.pow(1+t.i10,-t.c36)),null!==t.i10&&null!==e.lifestyle_freq&&(n=Math.pow(1+t.i10,1/e.lifestyle_freq)-1),null!==r&&null!==n&&0!==n&&(_=r/n),null!==_&&0!==_&&(t.d27=1/_)):null!==t.c27ppy&&null!==e.lifestyle_freq&&(t.d27=t.c27ppy/e.lifestyle_freq),t.h40=null,null!==e.your_ks&&null!==t.d20&&(t.h40=e.your_ks*t.d20),t.h41=null,null!==e.your_other_schemes&&null!==t.d23&&(t.h41=e.your_other_schemes*t.d23),t.h42=null,null!==e.your_other_income&&null!==t.d26&&(t.h42=e.your_other_income*t.d26),t.i40=0,null!==e.partner_ks&&null!==t.d21&&null!==t.a3&&(t.i40=e.partner_ks*t.d21*t.a3),t.i41=null,null!==e.partner_other_schemes&&null!==t.d24&&null!==t.a3&&(t.i41=e.partner_other_schemes*t.d24*t.a3),t.i42=null,null!==e.partner_other_income&&null!==t.d27&&null!==t.a3&&(t.i42=e.partner_other_income*t.d27*t.a3),t.j39=null,null!==t.h39&&null!==t.i39&&(t.j39=t.h39+t.i39),t.j40=null,null!==t.h40&&null!==t.i40&&(t.j40=t.h40+t.i40),t.j41=null,null!==t.h41&&null!==t.i41&&(t.j41=t.h41+t.i41),t.j42=null,null!==t.h42&&null!==t.i42&&(t.j42=t.h42+t.i42),t.c40=0,null!==t.c33&&t.c33>0&&null!==t.c12&&null!==t.j41&&null!==t.j42&&(t.c40=t.c12-(t.j41+t.j42)),t.c41=null,null!==t.c34&&(0===t.c34?t.c41=0:(r=null,1===t.d41?null!==t.h39&&null!==t.h40&&(r=t.h39+t.h40):null!==t.i39&&null!==t.i40&&(r=t.i39+t.i40),t.c41=null,null!==t.c34&&t.c34>0&&null!==e.live_on&&null!==t.j41&&null!==t.j42&&null!==r&&(t.c41=e.live_on-(t.j41+t.j42+r)))),t.c42=null,null!==t.c35&&(0===t.c35?t.c42=0:null!==e.live_on&&null!==t.j39&&null!==t.j40&&null!==t.j41&&null!==t.j42&&(t.c42=e.live_on-this.sum_array([t.j39,t.j40,t.j41,t.j42]))),t.c44=null,null!==t.i10&&null!==t.c33&&null!==t.i10&&null!==t.c40&&0!==t.i10&&(t.c44=(1-Math.pow(1+t.i10,-t.c33))/(Math.pow(1+t.i10,1/e.lifestyle_freq)-1)*t.c40),t.c45=null,null!==t.i10&&null!==t.c34&&null!==t.i10&&null!==t.c41&&null!==t.c33&&0!==t.i10&&0!==Math.pow(1+t.i10,t.c33)&&(t.c45=(1-Math.pow(1+t.i10,-t.c34))/(Math.pow(1+t.i10,1/e.lifestyle_freq)-1)*t.c41/Math.pow(1+t.i10,t.c33)),t.c46=null,null!==t.i10&&null!==t.c35&&null!==t.c42&&null!==t.c33&&null!==t.c34&&0!==t.i10&&0!==Math.pow(1+t.i10,t.c33+t.c34)&&(t.c46=(1-Math.pow(1+t.i10,-t.c35))/(Math.pow(1+t.i10,1/e.lifestyle_freq)-1)*t.c42/Math.pow(1+t.i10,t.c33+t.c34)),t.c47=null,null!==t.c44&&null!==t.c45&&null!==t.c46&&(t.c47=Math.max(0,t.c44)+Math.max(0,t.c45)+Math.max(0,t.c46)),t.c50=t.h34,1===t.a3&&null!==t.h34&&null!==t.i34&&(t.c50=Math.min(t.h34,t.i34)),t.c48=null,null!==t.c47&&null!==t.i11&&null!==t.c50&&(t.c48=t.c47*Math.pow(1+t.i11,t.c50)),t.c51=1,null!==e.required_savings_freq&&(t.c51=e.required_savings_freq),t.c52=null,null!==t.c48&&null!==t.i10&&null!==t.i11&&null!==t.c50&&null!==t.c51&&t.c50>0&&(t.c52=t.c48/((Math.pow(1+t.i10+t.i11,t.c50)-1)/(Math.pow(1+t.i10+t.i11,1/t.c51)-1))),t.difference=t.c48,1===t.d48&&(t.difference=t.c47),t.shortfall_under_65=null,0===t.a3?0===t.c34?null!==t.c42&&(t.shortfall_under_65=0,t.shortfall_over_65=-t.c42):null!==t.c41&&null!==t.c41&&(t.shortfall_under_65=-t.c41,t.shortfall_over_65=-t.c42):0===t.c33&&0===t.c34?null!==t.c42&&(t.shortfall_under_65=0,t.shortfall_over_65=-t.c42):t.c33>0&&t.c34>0?null!==t.c40&&(t.shortfall_under_65=-t.c40,t.shortfall_over_65=-t.c42):t.c33>0&&0===t.c34?null!==t.c40&&(t.shortfall_under_65=-t.c41,t.shortfall_over_65=-t.c42):null!==t.c41&&(t.shortfall_under_65=-t.c41,t.shortfall_over_65=-t.c42),t.c14=null,null!==t.c12&&null!==t.c13&&(t.c14=t.c12-t.c13),o.shortfall_pre_65=null,null!==t.shortfall_under_65&&(o.shortfall_pre_65=this.round(t.shortfall_under_65,0)),o.shortfall_post_65=null,null!==t.shortfall_over_65&&(o.shortfall_post_65=this.round(t.shortfall_over_65,0)),o.amount_total=null,null!==t.difference&&(o.amount_total=this.round(t.difference,0)),o.deficit_lump_amount=null,null!==t.c52&&(o.deficit_lump_amount=this.round(t.c52,0)),o.retirement_income=null,null!==t.j39&&null!==t.j40&&null!==t.j41&&null!==t.j42&&(o.retirement_income=this.round(this.sum_array([t.j39,t.j40,t.j41,t.j42]),0)),o.desired_retirement_income=null,null!==e.live_on&&(o.desired_retirement_income=this.round(e.live_on,0)),o.income_nz_superannuation=null,null!==t.j39&&(o.income_nz_superannuation=this.round(t.j39,0)),o.income_kiwisaver_lump_sum=null,null!==t.j40&&(o.income_kiwisaver_lump_sum=this.round(t.j40,0)),o.income_other_lump_sums=null,null!==t.j41&&(o.income_other_lump_sums=this.round(t.j41,0)),o.income_other_income_sources=null,null!==t.j42&&(o.income_other_income_sources=this.round(t.j42,0)),o.years_till_retire=null,(t.i34||t.h34)&&(t.i34&&t.h34?o.years_till_retire=Math.min(t.i34,t.h34):t.i34?o.years_till_retire=t.i34:t.h34&&(o.years_till_retire=t.h34)),o.deficit_lump_backup=o.deficit_lump_amount,o}}),testmode=!1,testObj1={your_gender:2,your_month_born:6,your_year_born:1977,your_retire_age:62,your_life_expectancy:85,live_on:48e3,partner:1,partner_gender:1,partner_month_born:6,partner_year_born:1977,partner_retire_age:62,partner_life_expectancy:90,your_super:1,your_ks:1e4,your_other_schemes:2e4,your_other_income:1e4,partner_super:1,partner_ks:3e5,partner_other_schemes:23,partner_other_income:1222,iar:0,bridge_freq:52,lifestyle_freq:1,required_savings_freq:52,expected:{shortfall_post_65:10217,shortfall_pre_65:0,amount_total:171964,deficit_lump_amount:58,desired_retirement_income:48e3,retirement_income:58217,income_nz_superannuation:27914,income_kiwisaver_lump_sum:18002,income_other_lump_sums:1080,income_other_income_sources:11222}},testObj2={your_gender:2,your_month_born:6,your_year_born:1977,your_retire_age:62,your_life_expectancy:85,live_on:48e3,partner:0,partner_ks:"",partner_life_expectancy:"",partner_other_income:"",partner_other_schemes:"",partner_retire_age:"",partner_gender:"",partner_month_born:"",partner_super:"",partner_year_born:"",your_ks:1e4,your_other_income:1e4,your_other_schemes:2e4,your_super:1,iar:1,required_savings_freq:52,lifestyle_freq:1,bridge_freq:52,expected:{amount_total:345236,deficit_lump_amount:199,desired_retirement_income:48e3,income_kiwisaver_lump_sum:678,income_nz_superannuation:18144,income_other_income_sources:1e4,income_other_lump_sums:1229,retirement_income:30051,shortfall_post_65:-17949,shortfall_pre_65:-36771}},testObj3={live_on:2e4,your_life_expectancy:85,your_gender:2,your_month_born:6,your_year_born:1977,your_retire_age:62,partner:0,partner_ks:"",partner_life_expectancy:"",partner_other_income:"",partner_other_schemes:"",partner_retire_age:"",partner_gender:"",partner_month_born:"",partner_super:"",partner_year_born:"",your_ks:1e4,your_other_income:1e4,your_other_schemes:2e4,your_super:1,iar:1,required_savings_freq:52,lifestyle_freq:1,bridge_freq:12,expected:{amount_total:24762,deficit_lump_amount:14,desired_retirement_income:2e4,income_kiwisaver_lump_sum:678,income_nz_superannuation:18144,income_other_income_sources:1e4,income_other_lump_sums:1229,retirement_income:30051,shortfall_post_65:10051,shortfall_pre_65:-8771}},testObj4={your_gender:2,your_month_born:6,your_year_born:1947,your_retire_age:65,your_life_expectancy:82,live_on:20800,partner:0,partner_gender:"",partner_month_born:"",partner_year_born:"",partner_retire_age:"",partner_life_expectancy:"",your_super:1,your_ks:0,your_other_schemes:0,your_other_income:0,partner_super:"",partner_ks:"",partner_other_schemes:"",partner_other_income:"",iar:1,bridge_freq:12,lifestyle_freq:1,required_savings_freq:52,expected:{shortfall_post_65:-2656,shortfall_pre_65:0,amount_total:34663,deficit_lump_amount:null,desired_retirement_income:20800,retirement_income:18144,income_nz_superannuation:18144,income_kiwisaver_lump_sum:0,income_other_income_sources:0,income_other_lump_sums:0}},testObj5={your_gender:2,your_month_born:6,your_year_born:1947,your_retire_age:65,your_life_expectancy:82,live_on:20800,partner:0,partner_gender:"",partner_month_born:"",partner_year_born:"",partner_ks:"",partner_life_expectancy:"",partner_other_income:"",partner_other_schemes:"",partner_retire_age:"",partner_super:"",your_super:1,your_ks:0,your_other_schemes:0,your_other_income:0,iar:1,bridge_freq:12,lifestyle_freq:1,required_savings_freq:1,expected:{shortfall_post_65:-2656,shortfall_pre_65:0,amount_total:34663,deficit_lump_amount:null,desired_retirement_income:20800,income_kiwisaver_lump_sum:0,income_nz_superannuation:18144,income_other_income_sources:0,income_other_lump_sums:0,retirement_income:18144}},testObj6={your_gender:2,your_month_born:6,your_year_born:1947,your_retire_age:35,your_life_expectancy:82,live_on:20800,partner:0,partner_ks:"",partner_life_expectancy:"",partner_other_income:"",partner_other_schemes:"",partner_retire_age:"",partner_gender:"",partner_month_born:"",partner_super:"",partner_year_born:"",your_super:1,your_ks:0,your_other_schemes:0,your_other_income:0,iar:1,bridge_freq:12,lifestyle_freq:1,required_savings_freq:1,expected:{shortfall_pre_65:0,shortfall_post_65:-2656,amount_total:34663,deficit_lump_amount:null,desired_retirement_income:20800,retirement_income:18144,income_nz_superannuation:18144,income_kiwisaver_lump_sum:0,income_other_income_sources:0,income_other_lump_sums:0}},testObj7={your_gender:2,your_month_born:6,your_year_born:1947,your_retire_age:35,your_life_expectancy:82,live_on:4e4,partner:0,partner_ks:"",partner_life_expectancy:"",partner_other_income:"",partner_other_schemes:"",partner_retire_age:"",partner_gender:"",partner_month_born:"",partner_super:"",partner_year_born:"",your_super:1,your_ks:0,your_other_schemes:0,your_other_income:0,iar:1,bridge_freq:12,lifestyle_freq:1,required_savings_freq:1,expected:{shortfall_pre_65:0,shortfall_post_65:-21856,amount_total:285221,deficit_lump_amount:null,desired_retirement_income:4e4,retirement_income:18144,income_nz_superannuation:18144,income_kiwisaver_lump_sum:0,income_other_income_sources:0,income_other_lump_sums:0}},testObj8={your_gender:2,your_month_born:10,your_year_born:1980,your_retire_age:60,your_life_expectancy:82,live_on:4e4,partner:1,partner_gender:"1",partner_month_born:"1",partner_year_born:"1985",partner_retire_age:"60",partner_life_expectancy:"85",your_super:1,your_ks:0,your_other_schemes:0,your_other_income:0,partner_super:"1",partner_ks:"",partner_other_schemes:"",partner_other_income:"",iar:1,bridge_freq:1,lifestyle_freq:1,required_savings_freq:1,expected:{shortfall_pre_65:-4e4,shortfall_post_65:-12086,amount_total:404782,deficit_lump_amount:11704,desired_retirement_income:4e4,retirement_income:27914,income_nz_superannuation:27914,income_kiwisaver_lump_sum:0,income_other_income_sources:0,income_other_lump_sums:0}},testObj9={your_gender:2,your_month_born:10,your_year_born:1980,your_retire_age:60,your_life_expectancy:82,live_on:4e4,partner:1,partner_gender:"1",partner_month_born:"1",partner_year_born:"1985",partner_retire_age:"65",partner_life_expectancy:"85",your_super:1,your_ks:0,your_other_schemes:0,your_other_income:0,partner_super:"0",partner_ks:"",partner_other_schemes:"",partner_other_income:"",iar:1,bridge_freq:1,lifestyle_freq:1,required_savings_freq:1,expected:{shortfall_pre_65:-4e4,shortfall_post_65:-13471,amount_total:377783,deficit_lump_amount:10924,desired_retirement_income:4e4,retirement_income:26529,income_nz_superannuation:26529,income_kiwisaver_lump_sum:0,income_other_income_sources:0,income_other_lump_sums:0}};testmode===!0&&function(e){"use strict";function r(){var r,n,_,l,t=new SortedCalculator_Retirement;if("one"==="all")r=testObj4,l=t.calculate(r);else{for(l={},n=1;n<=9;n+=1)r=window["testObj"+n],l[n]=t.calculate(r),_="<div style='padding: 40px; background: #eee; color:#333; font-family: verdana;'><a name='testresults"+n+"'></a><h2>Test Case "+n+"</h2>",l[n].amount_total===r.expected.amount_total?_+="<p>amount_total: <span style='color:green'>PASS</span></p>":_+="<p>amount_total: <span style='color:red'>FAIL</span> "+l[n].amount_total+" != "+r.expected.amount_total+"</p>",l[n].deficit_lump_amount===r.expected.deficit_lump_amount?_+="<p>deficit_lump_amount: <span style='color:green'>PASS</span></p>":_+="<p>deficit_lump_amount: <span style='color:red'>FAIL</span> "+l[n].deficit_lump_amount+" != "+r.expected.deficit_lump_amount+"</p>",l[n].desired_retirement_income===r.expected.desired_retirement_income?_+="<p>desired_retirement_income: <span style='color:green'>PASS</span></p>":_+="<p>desired_retirement_income: <span style='color:red'>FAIL</span> "+l[n].desired_retirement_income+" != "+r.expected.desired_retirement_income+"</p>",l[n].income_kiwisaver_lump_sum===r.expected.income_kiwisaver_lump_sum?_+="<p>income_kiwisaver_lump_sum: <span style='color:green'>PASS</span></p>":_+="<p>income_kiwisaver_lump_sum: <span style='color:red'>FAIL</span> "+l[n].income_kiwisaver_lump_sum+" != "+r.expected.income_kiwisaver_lump_sum+"</p>",l[n].income_nz_superannuation===r.expected.income_nz_superannuation?_+="<p>income_nz_superannuation: <span style='color:green'>PASS</span></p>":_+="<p>income_nz_superannuation: <span style='color:red'>FAIL</span> "+l[n].income_nz_superannuation+" != "+r.expected.income_nz_superannuation+"</p>",l[n].income_other_income_sources===r.expected.income_other_income_sources?_+="<p>income_other_income_sources: <span style='color:green'>PASS</span></p>":_+="<p>income_other_income_sources: <span style='color:red'>FAIL</span> "+l[n].income_other_income_sources+" != "+r.expected.income_other_income_sources+"</p>",l[n].income_other_lump_sums===r.expected.income_other_lump_sums?_+="<p>income_other_lump_sums: <span style='color:green'>PASS</span></p>":_+="<p>income_other_lump_sums: <span style='color:red'>FAIL</span> "+l[n].income_other_lump_sums+" != "+r.expected.income_other_lump_sums+"</p>",l[n].retirement_income===r.expected.retirement_income?_+="<p>retirement_income: <span style='color:green'>PASS</span></p>":_+="<p>retirement_income: <span style='color:red'>FAIL</span> "+l[n].retirement_income+" != "+r.expected.retirement_income+"</p>",l[n].shortfall_post_65===r.expected.shortfall_post_65?_+="<p>shortfall_post_65: <span style='color:green'>PASS</span></p>":_+="<p>shortfall_post_65: <span style='color:red'>FAIL</span> "+l[n].shortfall_post_65+" != "+r.expected.shortfall_post_65+"</p>",l[n].shortfall_pre_65===r.expected.shortfall_pre_65?_+="<p>shortfall_pre_65: <span style='color:green'>PASS</span></p>":_+="<p>shortfall_pre_65: <span style='color:red'>FAIL</span> "+l[n].shortfall_pre_65+" != "+r.expected.shortfall_pre_65+"</p>",_+="</div>",e("html").append(_);window.location=window.location+"#testresults"+(n-1)}}e(document).ready(function(){e("html").append("<h1>TESTMODE</h1>").append("<input id='calculate-test' type='button' value='test calc' />")}),e("#calculate-test").live("click",function(){r()})}(jQuery);