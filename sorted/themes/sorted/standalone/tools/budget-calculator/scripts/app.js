function Budget(e){var t=this;t.colourGenerator=e}!function(){"use strict";angular.module("sortedBudgetingTool",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ngRoute","ui.bootstrap","toastr","ngFileUpload","kendo.directives"])}(),function(){"use strict";function e(e,t,o){function a(e){var t={welcome:{Header:{Title:e.welcome.Header.Title}},"budget-template":o.parsePageData(e["budget-template"]),"budgeting-tool":{}};return t}var n={fromDatabase:a};return n}e.$inject=["$log","toastr","BudgetTemplateParser"],angular.module("sortedBudgetingTool").service("PagedataParser",e)}(),function(){"use strict";function e(e,t){function o(e){for(var t={Header:{Title:e.Header.Title,Content:e.Header.Content},Questions:{List:[]},MasterCategories:[]},o=0;o<e.Questions.List.length;o++){var n=e.Questions.List[o];t.Questions.List.push(r(n))}for(var o=0;o<e.MasterCategories.length;o++)t.MasterCategories.push(a(e.MasterCategories[o]));return t}function a(e){var t={ID:e.ID,Title:e.Title,Color:e.Color,Categories:[]};e.Icon&&(t.Icon={Filename:e.Icon.Filename});for(var o=0;o<e.Categories.length;o++)t.Categories.push(n(e.Categories[o]));return t}function n(e){var t={Default:e.Default,ID:e.ID,Title:e.Title};return e.Icon&&(t.Icon={Filename:e.Icon.Filename}),t}function r(e){var t={Question:e.Title,TemplateColor:e.TemplateColor,Color:e.Color,Buttons:[]};e.ButtonOptions?t.ButtonOptions={Toggle:e.ButtonOptions.Toggle,ToggleSelectDefault:e.ButtonOptions.ToggleSelectDefault}:t.ButtonOptions={Toggle:!1};for(var o=0;o<e.Buttons.length;o++){var a=e.Buttons[o];t.Buttons.push({CategoryId:a.CategoryId,Title:a.Title,Icon:a.Icon,Categories:a.Categories})}return t}function l(e){for(var t=[],o=0;o<e.length;o++)for(var a=e[o],n=0;n<a.Categories.length;n++){var r=a.Categories[n];r.Default&&t.push(r.ID)}return t}function i(e,t,o){for(var a=e,n={},r=0;r<a.length;r++)for(var l=0;l<t.length;l++)for(var i=t[l],s=0;s<i.Categories.length;s++){var c=i.Categories[s];if(c.ID==a[r]){void 0==n[i.ID]&&(n[i.ID]={ID:i.ID,Title:i.Title,Icon:i.Icon.Filename,Color:i.Color,PieValuePercent:0,ValueCents:0,ValueFormattedString:"$0.00",DisplayOpen:!1,SubCategories:[]});var d={ID:c.ID,MasterCategoryID:i.ID,Title:c.Title,Image:c.Icon.Filename,ValueCents:0,ValueFormattedString:"0.00"};void 0!=o&&(d.Period=o),n[i.ID].SubCategories.push(d)}}var u=[];return angular.forEach(n,function(e,t){u.push(e)}),console.log(u),u}var s={parseQuestion:r,parsePageData:o,getDefaultSubCategories:l,associateCategoriesWithMasterCategories:i};return s}e.$inject=["$log","toastr"],angular.module("sortedBudgetingTool").service("BudgetTemplateParser",e)}(),function(){"use strict";function e(e,t,o,a){var n={current:new Budget(a)};return n}e.$inject=["$log","$http","$location","colourGenerator"],angular.module("sortedBudgetingTool").factory("BudgetCalculator",e)}(),Budget.prototype.instance,Budget.prototype.changeSinceSave=!0,Budget.prototype.create=function(e){return e=void 0!=e?e:"",this.instance={Income:{Streams:[],TotalCents:0,Title:e}},this.instance},Budget.prototype.updateBudgetPeriod=function(e){return this.instance.Income.Period=e,this.instance},Budget.prototype.addIncomeStream=function(e,t,o,a){var n=this.centsToValueFormattedString(t);this.instance.Income.Streams.push({Title:e,Cents:t,CentsFormattedString:n,Period:o,Removable:a});for(var r=0,l=0;l<this.instance.Income.Streams.length;l++){var t=parseInt(this.instance.Income.Streams[l].Cents);r+=t}this.instance.Income.TotalCents=parseInt(r),this.instance.Income.TotalFormattedString=this.centsToValueFormattedString(r),this.instance.Income.Period=o},Budget.prototype.deleteIncomeStream=function(e){return this.instance.Income.Streams.splice(e,1),this.instance.Income.Streams},Budget.prototype.strDollarsToCents=function(e){var t=100*parseFloat(e.replace(/,/g,""));return t},Budget.prototype.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},Budget.prototype.centsToValueFormattedString=function(e,t){var o=parseFloat(Math.round(e/100*100)/100).toFixed(2);t&&(o=parseInt(Math.round(o)));var a=o.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");return a},Budget.prototype.addInitialCategories=function(e){this.instance.MasterCategories=e},Budget.prototype.addNewMasterCategory=function(e){var t={ID:this.guid(),Title:e,Icon:"",Color:this.colourGenerator.getNextColour(),ValueCents:0,ValueFormattedString:"$0",PieValuePercent:0,DisplayOpen:!1,SubCategories:[]};return this.instance.MasterCategories.push(t),this.instance.MasterCategories},Budget.prototype.getCategories=function(){return this.instance.MasterCategories},Budget.prototype.deleteSubCategoryByIndex=function(e,t){return this.instance.MasterCategories[e].SubCategories.splice(t,1),this.calculateValues(),this.instance.MasterCategories},Budget.prototype.addNewSubCategoryToMasterCategory=function(e,t,o,a,n,r){var l=angular.copy(this.instance);void 0===n&&(n=l.Income.Period),void 0===a&&(a=0);var i=this.centsToValueFormattedString(a),s={ID:this.guid(),MasterCategoryID:t,Title:o,Image:r,ValueCents:a,ValueFormattedString:i,Period:n};return this.instance.MasterCategories[e].SubCategories.push(s),this.calculateValues(),this.instance.MasterCategories[e].SubCategories},Budget.prototype.updateSubCategoryByIndex=function(e,t,o,a,n,r){void 0===n&&(n=tempObj.Income.Period),void 0===a&&(a=0);var l=this.centsToValueFormattedString(a),i=this.instance.MasterCategories[e].SubCategories[t];return i.Title=o,i.ValueCents=a,i.Period=n,i.ValueFormattedString=l,i.Image=r,this.calculateValues(),this.instance.MasterCategories},Budget.prototype.setBudgetView=function(e){this.instance.PreferredView=e},Budget.prototype.getBudgetView=function(){return this.instance.PreferredView},Budget.prototype.parseForUpload=function(){var e=JSON.parse(JSON.stringify(this.instance));return e},Budget.prototype.deleteMasterCategotyByID=function(e){for(var t,o=0;o<this.instance.MasterCategories.length;o++)this.instance.MasterCategories[o].ID===e&&(t=o);return void 0!==t&&this.instance.MasterCategories.splice(t,1),this.calculateValues(),this.instance.MasterCategories},Budget.prototype.updateMasterCategoryTitle=function(e,t){var o=this.getMasterCategoryById(e);return o&&(o.Title=t),this.instance.MasterCategories},Budget.prototype.getMasterCategoryById=function(e){for(var t,o=0;o<this.instance.MasterCategories.length;o++)this.instance.MasterCategories[o].ID===e&&(t=this.instance.MasterCategories[o]);return t},Budget.prototype.calculateValues=function(){var e=angular.copy(this.instance);console.log(e);for(var t,o,a=e.Income,n=a.Streams,r=(a.TotalCents,a.Period.PerYear),l=0,i=0;i<n.length;i++){var s=n[i];t=s.Cents,l+=t}o=this.centsToValueFormattedString(l);for(var c,d=0,u=e.MasterCategories,i=0;i<u.length;i++){for(var g=u[i],p=0,m=0;m<g.SubCategories.length;m++){var v=g.SubCategories[m];t=v.ValueCents;var b=v.Period.PerYear,f=t*b,y=f/r;p+=y}e.MasterCategories[i].ValueCents=p,e.MasterCategories[i].ValueFormattedString="$"+this.centsToValueFormattedString(p,!0),d+=p}c=parseFloat(d/100).toFixed(2).toString();for(var i=0;i<e.MasterCategories.length;i++){var h=parseInt(e.MasterCategories[i].ValueCents),C=parseFloat(h/d*100).toFixed(0);e.MasterCategories[i].PieValuePercent=C}this.instance.Income.TotalCents=l,this.instance.Income.TotalFormattedString=o,this.instance.MasterCategoriesTotalCents=d,this.instance.MasterCategoriesTotalFormattedString=c,this.instance.Income.LeftToBudget=parseFloat((l-d)/100).toFixed(2).toString();for(var i=0;i<e.MasterCategories.length;i++)this.instance.MasterCategories[i].ValueCents=e.MasterCategories[i].ValueCents,this.instance.MasterCategories[i].ValueFormattedString=e.MasterCategories[i].ValueFormattedString,this.instance.MasterCategories[i].PieValuePercent=isNaN(e.MasterCategories[i].PieValuePercent)?0:e.MasterCategories[i].PieValuePercent;return this.instance.changeSinceSave=!0,this.instance},Budget.math={convert:function(e,t,o){return e.eq(0)?e:e.div(t.PerYear).times(o.PerYear)},displayDollars:function(e,t){if("undefined"==typeof e)return e;if(e.eq(0))return e.toNumber();var o=t?t.PerYear:Budget.budget.Period.PerYear;return e.div(100).div(o).round(2).toNumber()},displayCategoryDollars:function(e){return"undefined"==typeof e?e:e.eq(0)?e.toNumber():e.div(100).round(2).toNumber()}},function(){"use strict";function e(e){function t(t,o,a,n,r,l){var i=this;i.TOOL_ASSETS=e.TOOL_ASSETS,i.Api=l,i.profileApi=a,i.imagepath,r.$watch("userLogged",function(){r.userLogged&&a.isLoggedIn().then(function(e){a.getProfile()&&(console.log("set user image",a.getProfile().Image.Filename),0!=a.getProfile().Image.ID&&(i.imagepath="./"+a.getProfile().Image.Filename))})}),n.$watch("imagepath",function(e){e&&(i.imagepath=e)}),i.onSave_clickHandler=function(e){e.preventDefault();var t=o.current.parseForUpload();l.saveBudget(t)},i.isLoggedIn=function(){return i.profileApi.getProfile()?!0:!1}}t.$inject=["$uibModal","BudgetCalculator","profileApi","$scope","$rootScope","Api"];var o={restrict:"E",templateUrl:"app/components/toolHeader/toolHeader.html",scope:{data:"=",profiledata:"=",budgetdata:"=",breadcrumbs:"=",imagepath:"="},controller:t,controllerAs:"vm"};return o}e.$inject=["siteConfig"],angular.module("sortedBudgetingTool").directive("toolHeader",e)}(),function(){"use strict";function e(e,t,o,a,n,r,l,i){function s(){console.log("TimeoutModalController : activate")}var c=this;c.categoryData=l.categoryData,c.onCancel_clickHandler=function(e){e&&e.preventDefault(),r.close()},s()}e.$inject=["profileApi","siteConfig","SiteData","Api","$scope","$uibModalInstance","categoryData","BudgetCalculator"],angular.module("sortedBudgetingTool").controller("TimeoutModalController",e)}(),function(){"use strict";function e(e,t,o,a,n,r,l){function i(){console.log("MultiBudgetModalController : activate")}var s=this;s.Api=a,s.editDate=s.Api.getLastEditDate(),s.onCancel_clickHandler=function(e){e&&e.preventDefault(),r.close()},s.onOverWrite_clickHandler=function(e){e&&e.preventDefault();var t=l.current.parseForUpload();a.saveBudget(t,!0),r.close()},i()}e.$inject=["profileApi","siteConfig","SiteData","Api","$scope","$uibModalInstance","BudgetCalculator"],angular.module("sortedBudgetingTool").controller("MultiBudgetModalController",e)}(),function(){"use strict";function e(e,t,o){function a(a,n,r,l){function i(){switch(a.modalType){case e.EDIT_BUDGET:n.addClass("pointer"),n.on("click",u);break;case e.DELETE_SUBCATEGORY:n.addClass("pointer"),n.on("click",d);break;case e.ADD_SUBCATEGORY:n.addClass("pointer"),n.on("click",c);break;case e.EDIT_MASTER_CATEGORY:n.addClass("pointer"),n.on("click",g);break;case e.DELETE_MASTER_CATEGORY:n.addClass("pointer"),n.on("click",p)}}function s(){i()}var c=function(e){e.preventDefault();var o,a,r=n.attr("data-mastercategory"),l=n.attr("data-subcategory");if(angular.isDefined(r)){o={};var i=JSON.parse(r),s=parseInt(i.ID),c=parseInt(n.attr("data-mastercatindex"));o.masterCategoryID=s,o.masterCategoryIndex=c}angular.isDefined(l)&&(a={},a=JSON.parse(l));var d;angular.isDefined(n.attr("data-catindex"))&&(d=parseInt(n.attr("data-catindex")));var c;angular.isDefined(n.attr("data-mastercatindex"))&&(c=parseInt(n.attr("data-mastercatindex")));t.open({templateUrl:"app/components/modals/addEditSubCategoryModal.html",controller:"AddEditSubCategoryController",controllerAs:"$ctrl",size:"lg",resolve:{mastercategoryData:function(){return o},subcategoryData:function(){return a},masterCategoryIndex:function(){return c},categoryIndex:function(){return d}}})},d=function(e){e.preventDefault();var o=JSON.parse(n.attr("data-subcategory")),a=parseInt(o.ID),r=parseInt(o.MasterCategoryID),l=o.Title,i=parseInt(n.attr("data-catindex")),s=parseInt(n.attr("data-mastercatindex"));t.open({templateUrl:"app/components/modals/deleteSubCategoryModal.html",controller:"DeleteSubCategoryController",controllerAs:"$ctrl",size:"md",resolve:{categoryData:function(){return{masterCategoryID:r,subCategoryId:a,categoryTitle:l,categoryIndex:i,masterCategoryIndex:s}}}})},u=function(e){e.preventDefault();var a=t.open({templateUrl:"app/components/modals/editBudgetModal.html",controller:"EditBudgetModalController",controllerAs:"$ctrl",size:"lg"});a.result.then(function(){},function(){console.log("dismiss"),o.$broadcast("resetBudget")})},g=function(e){e.preventDefault();var o=JSON.parse(n.attr("data-mastercategory"));t.open({templateUrl:"app/components/modals/editMasterCatModal.html",controller:"EditMasterCatModalController",controllerAs:"$ctrl",size:"md",resolve:{categoryData:function(){return{categoryData:o}}}})},p=function(e){e.preventDefault();var o=JSON.parse(n.attr("data-mastercategory"));t.open({templateUrl:"app/components/modals/deleteMasterCategoryModal.html",controller:"DeleteMasterCategoryController",controllerAs:"$ctrl",size:"md",resolve:{categoryData:function(){return{categoryData:o}}}})};s(),a.$on("$destroy",function(){})}function n(e){}n.$inject=["$scope"];var r={restrict:"A",scope:{modalType:"@"},link:a,controller:n,controllerAs:"vm"};return r}e.$inject=["ModalType","$uibModal","$rootScope"],angular.module("sortedBudgetingTool").directive("modalActivator",e)}(),function(){"use strict";function e(e,t,o,a,n,r,l,i,s,c){function d(){console.log("EditMasterCatModalController : activate"),console.log()}var u=this;u.siteConfig=t,u.TOOL_ASSETS=t.TOOL_ASSETS,u.categoryData=l.categoryData,u.categoryTitle=u.categoryData.Title,u.iconSrc=u.TOOL_ASSETS+u.categoryData.Icon,u.catColor=u.categoryData.Color,u.catId=u.categoryData.ID,u.icon=u.categoryData.Icon,console.log(l),u.onOk_clickHandler=function(e){e.preventDefault(),console.log("on click"),console.log(e),s.current.updateMasterCategoryTitle(u.categoryData.ID,u.categoryTitle),i.close()},u.onDelete_clickHandler=function(e){e.preventDefault(),s.current.deleteMasterCategotyByID(u.categoryData.ID),s.current.calculateValues(),r.$broadcast("chartRefresh")},u.onCancel_clickHandler=function(e){e.preventDefault(),i.close()},d()}e.$inject=["profileApi","siteConfig","SiteData","Api","$scope","$rootScope","categoryData","$uibModalInstance","BudgetCalculator","budgetingToolConfig"],angular.module("sortedBudgetingTool").controller("EditMasterCatModalController",e)}(),function(){"use strict";function e(e,t,o,a,n,r,l,i,s){function c(){console.log("EditBudgetModalController : activate"),d.isLoggedIn=!1,d.userProfileData={Profile:{ImageSource:d.TOOL_ASSETS+"assets/images/user-icon.svg"}},console.log(e.getProfile()),console.log("11111111111111111111111111111111111111111"),e.getProfile()&&(d.isLoggedIn=!0,0!=e.getProfile().Image.ID&&(d.userProfileData={Profile:{ImageSource:"./"+e.getProfile().Image.Filename}}))}var d=this;d.startCalc=angular.copy(i.current.instance),d.budgetCalculator=i.current.instance,d.budgetPeriods=s.BUDGET_PERIODS,d.TOOL_ASSETS=t.TOOL_ASSETS,d.isLoggedIn,d.userProfileData,d.onRemoveIncome_clickHandler=function(e,t,o){i.current.deleteIncomeStream(o),i.current.calculateValues(),r.$broadcast("chartRefresh")},d.onAddIncome_clickHandler=function(e){e.preventDefault();var t=angular.copy(i.current.instance.Income.Period);console.log(t),i.current.addIncomeStream("",0,t,!0)},d.onOk_clickHandler=function(e){e.preventDefault(),console.log("on click"),console.log(e),i.current.calculateValues(),r.$broadcast("chartRefresh"),l.close()},d.onUpdateStream_blurHandler=function(e,t){var o=angular.copy(t.CentsFormattedString);t.Cents=i.current.strDollarsToCents(o),i.current.calculateValues(),r.$broadcast("chartRefresh")},d.onSetBudgetPeriod_clickHandler=function(e,t){t=angular.copy(t),i.current.updateBudgetPeriod(t)},d.onCancel_clickHandler=function(e){e.preventDefault(),d.budgetCalculator.Income.Title=d.startCalc.Income.Title,d.budgetCalculator.Income.Period.Title=d.startCalc.Income.Period.Title,d.budgetCalculator.Income.Streams=d.startCalc.Income.Streams,i.current.calculateValues(),r.$broadcast("chartRefresh"),l.close()},n.$on("resetBudget",function(e,t){d.budgetCalculator.Income.Title=d.startCalc.Income.Title,d.budgetCalculator.Income.Period.Title=d.startCalc.Income.Period.Title,d.budgetCalculator.Income.Streams=d.startCalc.Income.Streams,i.current.calculateValues(),r.$broadcast("chartRefresh")}),c()}e.$inject=["profileApi","siteConfig","SiteData","Api","$scope","$rootScope","$uibModalInstance","BudgetCalculator","budgetingToolConfig"],angular.module("sortedBudgetingTool").controller("EditBudgetModalController",e)}(),function(){"use strict";function e(e,t,o,a,n,r,l,i,s,c){function d(){console.log("DeleteSubCategoryController : activate")}var u=this;u.subCategoryTitle=s.categoryTitle,u.onDelete_clickHandler=function(e){e.preventDefault();var t=s.masterCategoryIndex,o=s.categoryIndex;c.current.deleteSubCategoryByIndex(t,o),r.$broadcast("chartRefresh"),i.dismissAll("close")},u.onCancel_clickHandler=function(e){e.preventDefault(),l.close()},d()}e.$inject=["profileApi","siteConfig","SiteData","Api","$scope","$rootScope","$uibModalInstance","$uibModalStack","categoryData","BudgetCalculator"],angular.module("sortedBudgetingTool").controller("DeleteSubCategoryController",e)}(),function(){"use strict";function e(e,t,o,a,n,r,l,i,s,c){function d(){console.log("DeleteMasterCategoryController : activate")}var u=this;u.categoryData=s.categoryData,u.onDelete_clickHandler=function(e){e.preventDefault(),c.current.deleteMasterCategotyByID(u.categoryData.ID),c.current.calculateValues(),r.$broadcast("chartRefresh"),i.dismissAll("close"),l.close()},u.onCancel_clickHandler=function(e){e.preventDefault(),l.close()},d()}e.$inject=["profileApi","siteConfig","SiteData","Api","$scope","$rootScope","$uibModalInstance","$uibModalStack","categoryData","BudgetCalculator"],angular.module("sortedBudgetingTool").controller("DeleteMasterCategoryController",e)}(),function(){"use strict";function e(e,t,o,a,n,r,l,i,s,c,d,u,g,p,m){function v(){console.log("AddSubCategoryController : activate")}var b=this;b.title="Add Category",b.profileApi=e,b.mastercategoryData=d,b.categoryIndex=m,b.masterCategoryIndex=p,b.initialPeriod=c.BUDGET_PERIODS[c.DEFAULT_BUDGET_PERIOD],b.budgetPeriods=c.BUDGET_PERIODS,b.budget="0.0",b.uploadProgress=0,b.isUploading=!1,b.period=angular.copy(b.initialPeriod),b.isEdit=!1,b.newCategory={Title:""},b.isLoggedIn=!1,e.isLoggedIn().then(function(e){b.isLoggedIn=e}),g&&(console.log(g),b.title="Edit Category",b.initialPeriod=g.Period,b.budget=g.ValueFormattedString,b.newCategory.Title=g.Title,b.newCategory.File=g.Image,b.subcategoryData=g,b.isEdit=!0);r.$watch("$ctrl.files",function(){r.upload(b.files)}),r.$watch("$ctrl.file",function(){null!=r.file&&(b.files=[b.file])}),r.upload=function(e){var t=b.profileApi.getUploadURL();console.log(t),e&&(e.$error||s.upload({url:t,data:{Image:e}}).then(function(e){b.isUploading=!1,b.newCategory.File="."+e.data.data.imageURL,n(function(){b.isUploading=!1,b.newCategory.File="."+e.data.data.imageURL})},null,function(e){b.isUploading=!0;var t=parseInt(100*e.loaded/e.total);console.log("P"),console.log(t),console.log(e),b.uploadProgress=t}))},b.onSetPeriod_clickHandler=function(e,t){var o=angular.copy(t);b.period=o},b.createCategory=function(){var e=angular.copy(b.newCategory),t=0,o=1;e.Title.length>=0&&t++,t==o&&(u.current.addNewSubCategoryToMasterCategory(d.masterCategoryIndex,d.masterCategoryID,e.Title,u.current.strDollarsToCents(b.budget),b.period,b.newCategory.File),l.$broadcast("chartRefresh"),i.close())},b.updateCategory=function(){i.close();var e=angular.copy(b.newCategory);u.current.updateSubCategoryByIndex(p,m,e.Title,u.current.strDollarsToCents(b.budget),b.period,b.newCategory.File),l.$broadcast("chartRefresh")},b.onCategoryName_keyUpHandler=function(e){if(!e.defaultPrevented){var t,o=!1;void 0!==e.key?t=e.which:void 0!==e.keyIdentifier?t=e.keyIdentifier:void 0!==e.keyCode&&(t=e.keyCode),o&&e.preventDefault(),13==t&&(b.isEdit?b.updateCategory():b.createCategory())}},b.onOk_clickHandler=function(e){e.preventDefault(),b.isEdit?b.updateCategory():b.createCategory()},b.onCancel_clickHandler=function(e){e.preventDefault(),i.close()},v()}e.$inject=["profileApi","siteConfig","SiteData","Api","$timeout","$scope","$rootScope","$uibModalInstance","Upload","budgetingToolConfig","mastercategoryData","BudgetCalculator","subcategoryData","masterCategoryIndex","categoryIndex"],angular.module("sortedBudgetingTool").controller("AddEditSubCategoryController",e)}(),function(){"use strict";function e(e){function t(t){var o=this;o.TOOL_ASSETS=e.TOOL_ASSETS}t.$inject=["moment"];var o={restrict:"E",templateUrl:"app/components/intro-header/introHeader.html",scope:{data:"=",breadcrumbs:"="},controller:t,controllerAs:"vm"};return o}e.$inject=["siteConfig"],angular.module("sortedBudgetingTool").directive("introHeader",e)}(),function(){"use strict";function e(e,t){function o(e,t,o,a){}function a(e){}a.$inject=["moment"];var n={restrict:"E",templateUrl:"app/components/breadcrumbs/breadcrumbs.html",scope:{breadcrumbs:"="},link:o,controller:a,controllerAs:"vm"};return n}e.$inject=["budgetingToolConfig","siteConfig"],angular.module("sortedBudgetingTool").directive("breadcrumbs",e)}(),function(){"use strict";function e(e,t,o,a,n,r,l,i,s,c){function d(){}var u=this;u.siteConfig=o,u.TOOL_ASSETS=o.TOOL_ASSETS,u.Api=s,u.profileApi=c,u.breadcrumbs=[{path:"/tool",title:"Tools"},{path:"/tool/budgeting-tool#/welcome",title:"Budgeting Tool"},{path:"/tool/budgeting-tool#/welcome",title:"Welcome"}],u.data,u.isLoggedIn=!1,u.budget={Cents:t.search().salary,Period:a.BUDGET_PERIODS[a.DEFAULT_BUDGET_PERIOD]},u.initialPeriod=a.BUDGET_PERIODS[a.DEFAULT_BUDGET_PERIOD],u.budgetPeriods=a.BUDGET_PERIODS,i.$on("$viewContentLoaded",function(){r.get("welcome").then(function(e){u.data=e}),c.isLoggedIn().then(function(e){u.isLoggedIn=e},function(e){u.isLoggedIn=!1})}),d(),u.onSetPeriod_clickHandler=function(e,t){var o=angular.copy(t);u.budget.Period=o},u.next=function(){if(u.Api.setIsNewBudget(!0),i.budgetAmountForm["amount-to-budget"].$valid?angular.element("#amount-to-budget").parent().removeClass("input-invalid"):angular.element("#amount-to-budget").parent().addClass("input-invalid"),i.budgetAmountForm.$valid){var e=angular.copy(u.budget.Cents);e=n.current.strDollarsToCents(e);var o=angular.copy(u.budget.Period);return n.current.create("Your budget"),n.current.addIncomeStream("My income",e,o,!1),t.path("/budget-template")}}}e.$inject=["$timeout","$location","siteConfig","budgetingToolConfig","BudgetCalculator","SiteData","$log","$scope","Api","profileApi"],angular.module("sortedBudgetingTool").controller("WelcomeController",e)}(),function(){"use strict";function e(e,t,o,a,n,r,l,i,s,c,d,u,g){function p(){for(var e=[],o=angular.copy(t.current.getCategories()),a=!0,n=0;n<o.length;n++)o[n].ValueCents>0&&a&&(a=!1);if(a)for(var n=0;n<o.length;n++){var r=tinycolor(o[n].Color);r.setAlpha(.5),e.push({category:o[n].Title,dollars:.25,color:r.toRgbString()})}else for(var n=0;n<o.length;n++)e.push({category:o[n].Title,dollars:o[n].ValueCents/100,color:o[n].Color});v.chartOptions.dataSource=new kendo.data.DataSource({data:e})}function m(){}var v=this;v.siteConfig=o,v.TOOL_ASSETS=o.TOOL_ASSETS,v.Api=n,v.profileApi=e,v.salary,v.breadcrumbs=[{path:"/tool",title:"Tool"},{path:"/tool/budgeting-tool#/",title:"Budgeting Tool"}],v.budgetPeriods=g.BUDGET_PERIODS,v.chartOptions=g.BREAKDOWN_CHART_OPTIONS,v.data,v.imagePath=v.TOOL_ASSETS+"assets/images/user-icon.svg",v.currentBudget,v.viewState,v.breakdownCollapse=!1,v.isLoggedIn=!1,v.isReady=!1,v.showMobileBudget=!1,l.$watch("userLogged",function(){if(console.log("watch triggered"),l.userLogged){console.log("user now logged in"),l.userLogged=!1;var o=!1;console.log("init budget test",t.current.instance),void 0!==t.current.instance?v.Api.getIsNewBudget()&&(o=!0):console.log("old budget maybe?"),e.isLoggedIn().then(function(e){v.isLoggedIn=e,v.Api.loadBudget().then(function(e){if(v.Api.getBudgetData())if(t.current.instance){if(console.log("We already have a budget set"),o){v.Api.setIsNewBudget(!0);var a=t.current.parseForUpload();v.Api.saveBudget(a)}}else console.log("Loading Budget"),t.current.instance=v.Api.getBudgetData(),s.path("/");else{v.Api.setIsNewBudget(!0),console.log("now save");var a=t.current.parseForUpload();v.Api.saveBudget(a)}})})}}),r.$on("chartRefresh",function(e,t){p()}),l.$watch("chartRefresh",function(e){console.log("chart refresh",e),e&&(p(),v.chartRefresh=!1,console.log("ran and set to",v.chartRefresh))}),v.onToggleMobileBudget_clickHandler=function(e){e&&e.preventDefault(),v.showMobileBudget=!v.showMobileBudget},v.onSetPeriod_clickHandler=function(e,o,a){e.preventDefault(),a.Period=angular.copy(o),t.current.calculateValues(),p()},v.newMasterCategory={Title:"",PopoverOpen:!1,SubCategories:void 0},v.onMasterCategoryCancel_clickHandler=function(e){v.newMasterCategory.PopoverOpen=!1,v.newMasterCategory.Title=""},v.onMasterCategoryInput_keyUpHandler=function(e){if(!e.defaultPrevented){var o,a=!1;if(void 0!==e.key?o=e.which:void 0!==e.keyIdentifier?o=e.keyIdentifier:void 0!==e.keyCode&&(o=e.keyCode),a&&e.preventDefault(),13==o){var n=angular.copy(v.newMasterCategory);t.current.addNewMasterCategory(n.Title),v.newMasterCategory.Title="",v.newMasterCategory.PopoverOpen=!1}}},v.onMaterCategoryEdit_clickHandler=function(e){e.preventDefault(),console.log("onMaterCategoryEdit_clickHandler")},v.onMasterCategorySave_clickHandler=function(e){e.preventDefault(),v.newMasterCategory.PopoverOpen=!1;var o=angular.copy(v.newMasterCategory);t.current.addNewMasterCategory(o.Title),v.newMasterCategory.Title=""},v.onViewToggle_clickHandler=function(e,o){e.preventDefault(),o!=v.viewState&&(v.viewState=o,t.current.setBudgetView(o))},v.onMasterCategory_clickHandler=function(e,t){e.preventDefault(),t.DisplayOpen=!t.DisplayOpen},v.onBreakdownToggle_clickHandler=function(e){e.preventDefault(),v.breakdownCollapse=!v.breakdownCollapse},v.onSubCategoryTitle_focusInHandler=function(e,t){e.preventDefault(),t.stateEdit=!0},v.onSubCategoryTitle_focusOutHandler=function(e,t){e.preventDefault(),console.log(e),t.stateEdit=!1},v.onSubCategoryValue_focusInHandler=function(e,t){e.preventDefault(),t.stateEdit=!0;var o=angular.copy(t.ValueFormattedString),a=parseFloat(o),n=isNaN(a);(0==a||n)&&(t.ValueFormattedString="")},v.onSubCategoryValue_focusOutHandler=function(e,o){e.preventDefault(),o.stateEdit=!1;var a=angular.copy(o.ValueFormattedString),n=parseFloat(a);isNaN(n)&&(o.ValueFormattedString="0.00"),a=angular.copy(o.ValueFormattedString);var r=t.current.strDollarsToCents(a);o.ValueCents=r,t.current.calculateValues(),console.log("bam!"),p()},v.onSubCategoryTitle_keyUpHandler=function(e){return 13==e.keyCode?(e.preventDefault(),void angular.element(e.currentTarget).blur()):void 0},v.onSave_clickHandler=function(e){e.preventDefault();var o=t.current.parseForUpload();n.saveBudget(o),n.loadBudget()},m(),v.showSaveWaring=function(){console.log("check"),e.isLoggedIn().then(function(e){if(v.isLoggedIn=e,!v.isLoggedIn){u.open({templateUrl:"app/components/modals/timeoutModal.html",controller:"EditBudgetModalController",controllerAs:"$ctrl",size:"md"})}})},r.onExit=function(e){return t.current.changeSinceSave?"You're working on a budget that hasn't been saved.":void 0},r.$on("$viewContentLoaded",function(){try{document.getElementsByClassName("ToolBudgetCalculatorPage")[0].scrollIntoView()}catch(o){}e.isLoggedIn().then(function(o){v.isLoggedIn=o,e.getProfile()&&(console.log("set user image",e.getProfile().Image.Filename),0!=e.getProfile().Image.ID&&(v.imagePath="./"+e.getProfile().Image.Filename)),v.Api.loadBudget().then(function(e){v.Api.getBudgetData()&&(t.current.instance?console.log("We already have a budget set"):t.current.instance=v.Api.getBudgetData(),v.startApp()),v.startApp()},function(e){v.startApp()})},function(e){v.startApp(),v.isLoggedIn=!1}),t.current.instance&&v.startApp()}),v.startApp=function(){if(void 0==t.current.instance)return void s.path("/welcome");n.hasAccessedTool||(e.getProfile()||d(v.showSaveWaring,3e5),i.onbeforeunload=r.onExit),n.hasAccessedTool=!0,a.get("budgeting-tool").then(function(e){v.data=e}),v.currentBudget=t.current.instance,v.budgetData={MasterCategories:t.current.getCategories()};var o=t.current.getBudgetView();v.viewState=o,t.current.calculateValues(),v.isReady=!0,d(p,1)}}e.$inject=["profileApi","BudgetCalculator","siteConfig","SiteData","Api","$scope","$rootScope","$window","$location","BudgetView","$timeout","$uibModal","budgetingToolConfig"],angular.module("sortedBudgetingTool").controller("ToolController",e)}(),function(){"use strict";function e(e,t,o,a,n,r){function l(){return g}function i(){var e;switch(console.log(n.host()),n.host()){case"localhost":e="http://localhost";break;default:e=""}return e}function s(){return console.log(m+"get"),a({method:"GET",url:m+"get"}).then(function(e){return"false"===e.data.success?o.reject():(console.log(g),g=e.data,e.data)},function(e){return o.reject(e)})}function c(){return s().then(function(){return!0})["catch"](function(){return!1})}function d(){return m+"custom"}function u(e){var t="POST",o=m+"custom",n=new FormData;return n.append("Image",e),a({data:n,method:t,url:o,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(e){return e.data},function(){return null})}var g,p=i(),m=p+r.API_PREFIX+"/profile/";return{get:s,uploadBudgetImage:u,isLoggedIn:c,getUploadURL:d,getProfile:l}}e.$inject=["$log","$cookies","$q","$http","$location","siteConfig"],angular.module("sortedBudgetingTool").service("profileApi",e)}(),function(){"use strict";function e(e,t,o,a,n,r,l,i){function s(){return y}function c(){return k}function d(e){k=e}function u(){return f}function g(){var e;switch(console.log(r.host()),r.host()){case"localhost":e="http://localhost/";break;default:e=""}return e}function p(){console.log("Api : loadBudget");var e=C+"api/v0.1/calculator/get/2";return a.get(e).then(function(e){var t=e.data;if(console.log("HAS DATA",t),t.length>0){try{f=angular.copy(JSON.parse(t[t.length-1].Data))}catch(o){f=angular.copy(t[t.length-1].Data)}y=new Date.parse(t[t.length-1].LastEdited),h=t[t.length-1].ID,k=!1,console.log(t[t.length-1]),console.log(f),console.log(y)}return f})}function m(e,t){if(u()&&c()&&!t)return void v();var o;o=c()&&u()?C+"api/v0.1/calculator/update/"+h:c()?C+"api/v0.1/calculator/save":C+"api/v0.1/calculator/update/"+h;var n=angular.copy(e),r={Data:n,CalcID:2};l.current.changeSinceSave=!1,a.post(o,r,{headers:{"Content-Type":"application/json"}}).then(function(e){i.success("Budget saved successfully"),k=!1;var t=e.data;return"success"==t.status&&(h=t.data),!0})["catch"](function(e){return i.error("Please check your login and try again","Budget not saved!"),!1})}function v(){n.open({templateUrl:"app/components/modals/multiBudgetModal.html",controller:"MultiBudgetModalController",controllerAs:"$ctrl",size:"lg"})}function b(){var e=C+"themes/sorted/json/budget-tool-v2/budget-tool-data.json";return a({url:e,headers:{"Content-Type":"application/json"}})}var f,y,h,C=g(),T=!1,k=!0,S={get_SiteData:b,getIsNewBudget:c,getLastEditDate:s,setIsNewBudget:d,saveBudget:m,loadBudget:p,getBudgetData:u,hasAccessedTool:T};return S}e.$inject=["$log","$cookies","$q","$http","$uibModal","$location","BudgetCalculator","toastr"],angular.module("sortedBudgetingTool").service("Api",e)}(),function(){"use strict";function e(){function e(e,t,o){function a(e){if(!e.defaultPrevented){var t,o=!1;return void 0!==e.key?t=e.which:void 0!==e.keyIdentifier?t=e.keyIdentifier:void 0!==e.keyCode&&(t=e.keyCode),o&&e.preventDefault(),13==t?(e.preventDefault(),void angular.element(e.currentTarget).blur()):49!=t&&50!=t&&51!=t&&52!=t&&53!=t&&54!=t&&55!=t&&56!=t&&57!=t&&48!=t&&44!=t&&46!=t&&8!=t&&0!=t?void e.preventDefault():void 0}}function n(e){}function r(e){var t=this.value;t=t.replace(/,/g,"");var o=parseFloat(t).toFixed(2);isNaN(o)?this.value="0.00":this.value=o.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");var a=$(this);a.trigger("input"),a.trigger("change")}function l(e){var t=this.value;(parseFloat(t)<=0||isNaN(parseFloat(t)))&&(this.value="")}t.on("keypress",a),t.on("keyup",n),
t.on("blur",r),t.on("focus",l),e.$on("$destroy",function(){})}var t={restrict:"A",link:e};return t}angular.module("sortedBudgetingTool").directive("restrictCurrency",e)}(),function(){"use strict";function e(){function e(e,t,o){function a(e){this.className+=" font-prevent-zoom",this.classList.remove("font-prevent-zoom")}t.on("focus",a),e.$on("$destroy",function(){})}var t={link:e};return t}angular.module("sortedBudgetingTool").directive("preventInputZoom",e)}(),function(){"use strict";function e(e,t,o){var a={APP_NAME:"Sorted",APP_VERSION:"0.1",APP_PATH:"",DATE_FORMAT:"DD/MM/YYYY",API_PREFIX:"/api/v0.1",GTM_PAGEVIEW_VARIABLE:"vPageUrl",GTM_CUSTOM_EVENT_NAME:"VirtualPageView",TOOL_ASSETS:"themes/sorted/standalone/tools/budget-calculator/"};return a}e.$inject=["$log","$http","$location"],angular.module("sortedBudgetingTool").factory("siteConfig",e)}(),function(){"use strict";function e(e){function t(e,t){if(t>=1)return e;var o=e.match(/[a-f\d]{2}/gi);return"#"+_.map(o,function(e){var o=Math.floor(parseInt(e,16)*t),a=Math.floor(255*(1-t));return(o+a).toString(16)}).join("")}function o(e,t){var o=e.match(/[a-f\d]{2}/gi);return"rgba("+_.map(o,function(e){return parseInt(e,16)}).join(",")+","+t+")"}function a(){return l>=e.COLOUR_SET.length&&(l=0,r++),r>=e.COLOUR_GRADIENTS.length&&(r=0),t(e.COLOUR_SET[l++],e.COLOUR_GRADIENTS[r])}function n(e){return t(e,.5)}var r=0,l=0;return{getNextColour:a,getStartColour:n,hexToRgba:o}}e.$inject=["Colors"],angular.module("sortedBudgetingTool").factory("colourGenerator",e)}(),function(){"use strict";function e(e,t,o,a,n,r){function l(e){var t=n.defer();return i?e?t.resolve(i[e]):t.resolve(i):(console.log("Get data"),console.log("page = "+e),r.get_SiteData().then(function(o){console.log(o),i=a.fromDatabase(o.data),e?t.resolve(i[e]):t.resolve(i)},function(e){console.log(e),t.reject("Something bad happened")})),t.promise}var i,s={get:l};return s}e.$inject=["$log","$http","$location","PagedataParser","$q","Api"],angular.module("sortedBudgetingTool").factory("SiteData",e)}(),function(){"use strict";angular.module("sortedBudgetingTool").constant("budgetingToolConfig",{ALERT_TIMEOUT:2500,BREAKDOWN_CHART_OPTIONS:{chartArea:{height:300,width:300,margin:0,padding:0},transitions:!1,legend:{visible:!1},series:[{field:"dollars",overlay:{gradient:"none"},padding:10}],seriesDefaults:{type:"donut",startAngle:90},legendItemClick:function(e){e.preventDefault()},legendItemHover:function(e){e.preventDefault()},tooltip:{animation:{duration:0},template:"#= category #: #= kendo.format('{0:C}',value > 0.25 ? value : 0)  #",visible:!0}},BREAKDOWN_CHART_SPACER:.003,BROWSER_CLOSE_WARNING:"You're working on a budget that hasn't been saved.",BUDGET_PERIODS:[{Shortname:"weekly",Title:"Weekly",PerYear:52},{Shortname:"fortnightly",Title:"Fortnightly",PerYear:26},{Shortname:"fourweekly",Title:"4 Weekly",PerYear:13},{Shortname:"monthly",Title:"Monthly",PerYear:12},{Shortname:"yearly",Title:"Yearly",PerYear:1}],BUDGETING_TOOL_PREFIX:"app/pages",BUDGETING_TOOL_PATH:"/tools/budgeting-tool",BUDGETING_TOOL_IMAGE_PATH:"assets/images/tools/budgeting-tool",CALC_ID:"2",CATEGORY_IMAGE_TYPES:["image/gif","image/jpeg","image/png"],CATEGORY_TITLE_PLACEHOLDER:"Name your category",COLOUR_GRADIENTS:[.66,.33],COLOUR_SET:["#ce0058","#704c99","#cadc3c","#00afff","#006e96","#ffd700","#20d4af","#e18cc8"],DEFAULT_BUDGET_TITLE:"Your budget",DEFAULT_BUDGET_PERIOD:3,DEFAULT_BUDGET_VIEW:"list",IE_MAX_SAFE_INTEGER:9e12,INCOME_STREAM_PLACEHOLDER:"Income source",LOGIN_REMINDER_TIMEOUT:3e5,MAX_CATEGORY_TITLE:24,MAX_CATEGORY_TITLE_FIELD:50,MAX_STREAMS:5,VIEW_TEMPLATES:{grid:{title:"Grid View",plateTitle:"Visual with Images",icon:"grid.svg",plateIcon:"gridPlate.svg",url:"gridView.html"},list:{title:"List View",plateTitle:"List View",icon:"list.svg",plateIcon:"listPlate.svg",url:"listView.html"}}})}(),function(){"use strict";function e(e,t,o,a,n,r,l,i,s){function c(){}function d(e){for(var t=0;t<e.Questions.List.length;t++){var o=e.Questions.List[t];o.ButtonOptions&&o.ButtonOptions.Toggle&&(o.Buttons[o.ButtonOptions.ToggleSelectDefault].isSelected=!0)}return e}var u=this;u.siteConfig=t,u.TOOL_ASSETS=t.TOOL_ASSETS,u.breadcrumbs=[{path:"/tool",title:"Tools"},{path:"/tool/budgeting-tool#/welcome",title:"Budgeting Tool"},{path:"/tool/budgeting-tool#/budget-template",title:"Budget Template"}],u.data,u.TOOL_ASSETS=t.TOOL_ASSETS,c(),u.onSkip_clickHandler=function(e){e.preventDefault(),u.submitForm(!0)},u.submitForm=function(e){e=void 0!=e?e:!1;var t,o=[],a=0,n=angular.copy(u.data.MasterCategories),c=l.getDefaultSubCategories(n),d=angular.copy(u.data);if(e)a=1;else for(var g=0;g<d.Questions.List.length;g++)for(var p=d.Questions.List[g],m=0;m<p.Buttons.length;m++){var v=p.Buttons[m];v.isSelected&&(o=o.concat(v.Categories)),g==d.Questions.List.length-1&&v.isSelected&&(a=m)}switch(parseInt(a)){case 0:t=s.GRID;break;case 1:t=s.LIST}o=o.concat(c);var b=o.filter(function(e,t){return o.indexOf(e)==t}),f=i.current.instance.Income.Period,y=l.associateCategoriesWithMasterCategories(b,n,f);return i.current.setBudgetView(t),i.current.addInitialCategories(y),i.current.calculateValues(),r.path("/")},u.onQuestion_clickHandler=function(e,t,o,a){if(e.preventDefault(),a.ButtonOptions)if(a.ButtonOptions.Toggle)for(var n=0;n<a.Buttons.length;n++)n==o?a.Buttons[n].isSelected=!0:a.Buttons[n].isSelected=!1;else t.isSelected=!t.isSelected},n.$on("$viewContentLoaded",function(){try{document.getElementsByClassName("ToolBudgetCalculatorPage")[0].scrollIntoView()}catch(t){}return void 0==i.current.instance?void r.path("/welcome"):(o.get("budget-template").then(function(e){u.data=d(e)}),void e.isLoggedIn().then(function(e){u.isLoggedIn=e},function(e){u.isLoggedIn=!1}))})}e.$inject=["profileApi","siteConfig","SiteData","Api","$scope","$location","BudgetTemplateParser","BudgetCalculator","BudgetView"],angular.module("sortedBudgetingTool").controller("BudgettemplateController",e)}(),function(){"use strict";function e(e){}e.$inject=["$log"],angular.module("sortedBudgetingTool").run(e)}(),function(){"use strict";function e(e){e.when("/",{templateUrl:"app/tool/tool.html",controller:"ToolController",controllerAs:"tool"}).when("/welcome",{templateUrl:"app/welcome/welcome.html",controller:"WelcomeController",controllerAs:"welcome"}).when("/budget-template",{templateUrl:"app/budgettemplate/budgettemplate.html",controller:"BudgettemplateController",controllerAs:"btemplate"}).otherwise({redirectTo:"/welcome"})}e.$inject=["$routeProvider"],angular.module("sortedBudgetingTool").config(e)}(),function(){"use strict";angular.module("sortedBudgetingTool").constant("malarkey",malarkey).constant("_",_).constant("BudgetView",{LIST:"list",GRID:"grid"}).constant("ModalType",{EDIT_BUDGET:"edit_budget",DELETE_SUBCATEGORY:"delete_subcategory",ADD_SUBCATEGORY:"add_subcategory",EDIT_MASTER_CATEGORY:"edit_master_category",DELETE_MASTER_CATEGORY:"delete_master_category",LOGIN:"login"}).constant("Colors",{COLOUR_SET:["#ce0058","#704c99","#cadc3c","#00afff","#006e96","#ffd700","#20d4af","#e18cc8"],COLOUR_GRADIENTS:[.66,.33]}).constant("moment",moment)}(),function(){"use strict";function e(e,t){t.allowHtml=!0,t.timeOut=5e3,t.positionClass="toast-top-right",t.preventDuplicates=!1,t.progressBar=!0}e.$inject=["$logProvider","toastrConfig"],angular.module("sortedBudgetingTool").config(e)}(),angular.module("sortedBudgetingTool").run(["$templateCache",function(e){e.put("app/budgettemplate/budgettemplate.html",'<intro-header data=btemplate.data.Header breadcrumbs=btemplate.breadcrumbs></intro-header><div class=container><div class=budgeting-questions><form name=budgetTemplateQuestions ng-submit=btemplate.submitForm()><div class=row><div class=budget-skip-link-top><a class=font-orange ng-click=btemplate.onSkip_clickHandler($event)>SKIP <i class="fa fa-chevron-right font-xs"></i></a><br></div></div><div class="budget-template-question text-center" ng-repeat="question in btemplate.data.Questions.List"><div class="row text-center budget-question"><h5>{{$index+1}}. {{question.Question}}</h5></div><div class="row preset-container text-center"><div class=budget-preset ng-repeat="preset in question.Buttons"><div class="preset-icon col-xs-6" ng-style="preset.isSelected ? {\'background-color\':\'{{question.TemplateColor}}\'} : {\'background-color\':\'transparent\'}"><!-- <button class="preset-button" ng-click="btemplate.onQuestion_clickHandler($event, preset, $index, question)" ng-class="{active:preset.isSelected}">\n                <div class="preset-icon-image">\n                  <img src="{{btemplate.TOOL_ASSETS + preset.Icon}}" class="preset-image">\n                </div>\n                <span class="preset-label">{{preset.Title}}</span>\n              </button> --> <button class="preset-button tools-icon _inline-block" ng-click="btemplate.onQuestion_clickHandler($event, preset, $index, question)" ng-class={active:preset.isSelected}><div class=tools-icon-container><img ng-src="{{btemplate.TOOL_ASSETS + preset.Icon}}" class="tools-icon-image _absolute"></div><span class=preset-label>{{preset.Title}}</span></button></div></div></div></div><div class="row text-center"><div class="col-sm-4 col-sm-offset-4 budget-template-create"><button class="btn btn-primary btn-xs-fullwidth" type=submit>Create template</button></div><div class="col-sm-4 budget-skip-link"><a class=font-orange ng-click=btemplate.onSkip_clickHandler($event)>SKIP <i class="fa fa-chevron-right font-xs"></i></a><br></div></div></form></div></div>'),e.put("app/tool/tool.html",'<div ng-if=!tool.isReady><div class=layout-header-small><div class=header-small-container><div class=header-background style="background-image: url(themes/sorted/standalone/tools/budget-calculator/assets/images/header-background-tools.jpg)"><div class=header-small-opacity></div></div><div style="position: relative; top:96px; z-index: 1000; width: 100%"><div style="display: flex; justify-content: center; margin-top: 50px"><img class=img-responsive src=themes/sorted/standalone/tools/budget-calculator/assets/images/Eclipse.svg></div><div class=text-center>loading data</div></div></div></div></div><div ng-if=tool.isReady><tool-header breadcrumbs=tool.breadcrumbs profiledata=tool.userProfileData imagepath=tool.imagePath budgetdata=tool.currentBudget></tool-header><print-view><div class="budget-breakdown-wrap breakdown-vertical" style="position: relative !important"><div class=budget-graph-wrap><div class=budget-breakdown-chart kendo-chart k-options=tool.chartOptions k-rebind=tool.chartOptions></div><div class=budget-breakdown-readable><div class=budget-breakdown-titles><h3 class=subtotal ng-bind-html="tool.currentBudget.MasterCategoriesTotalFormattedString | currency"></h3><h5 class=subtotal-copy>Total budgeted</h5><p class=subtotal-period ng-bind-html=tool.currentBudget.Income.Period.Title></p></div><div class=budget-breakdown-legend><ul class=breakdown-master-categories><li ng-repeat="masterCategory in tool.currentBudget.MasterCategories"><div class=inner-legend style="background-color:{{masterCategory.Color}} !important; -webkit-print-color-adjust: exact"></div><div class="legend-label font-medium" ng-bind-html=masterCategory.Title></div><div class="legend-amount font-medium">{{masterCategory.PieValuePercent}}%</div></li></ul></div></div></div></div><div class="container-fluid budget-tool-container view-list" ng-class="{\'breakdown-reduce\':tool.breakdownCollapse}"><div class=budget-items-form-wrap><div class=budget-tool-rows><!-- NgRepeat a Master Category --><div class=budget-tool-row ng-repeat="masterCategory in tool.budgetData.MasterCategories"><div class=budget-tool-master-category ng-class="{\'master-category-open\':masterCategory.DisplayOpen}"><div class=budget-tool-master-category-inner><div class="master-category-icon pointer" ng-click="tool.onMasterCategory_clickHandler($event, masterCategory)"><img ng-if="masterCategory.Icon != \'\'" ng-src="{{tool.TOOL_ASSETS + masterCategory.Icon}}"><div style="display: flex; justify-content: center" ng-if="masterCategory.Icon == \'\'"><span style="background-color: {{masterCategory.Color}} !important; \n                                    width: 30px;\n                                    height: 30px;\n                                    display: inline-block;\n                                    border-radius: 50%;\n                                    margin-top: 11px;\n                                    -webkit-print-color-adjust: exact !important"></span></div></div><div class=master-category-title modal-activator modal-type=edit_master_category data-mastercategory={{masterCategory}}><input modal-activator modal-type=edit_master_category type=text ng-model=masterCategory.Title readonly onfocus=this.blur()></div><div class="master-category-value pointer" ng-click="tool.onMasterCategory_clickHandler($event, masterCategory)"><input type=text ng-model=masterCategory.ValueFormattedString class=pointer readonly onfocus=this.blur()></div><div class="master-category-view-toggle pointer" ng-click="tool.onMasterCategory_clickHandler($event, masterCategory)"></div></div><!-- NgRepeat the Sub categories within this Master Category --><div class=categories-list-items><div ng-repeat="subCategory in masterCategory.SubCategories" class=sub-category-item ng-class="{\'category-state-edit\':subCategory.stateEdit}"><div class=cat-section-left><div class=sub-category-image modal-activator modal-type=add_subcategory data-subcategory={{subCategory}} data-mastercatindex={{$parent.$index}} data-catindex={{$index}} ng-style="{\'background-image\':\'url(./\'+ subCategory.Image+\')\'}"><img class=orange-edit ng-src="{{tool.TOOL_ASSETS + \'assets/images/edit-orange.svg\'}}"></div><div class=sub-category-title><input type=text ng-model=subCategory.Title ng-focus="tool.onSubCategoryTitle_focusInHandler($event, subCategory)" ng-blur="tool.onSubCategoryTitle_focusOutHandler($event, subCategory)" ng-keyup=tool.onSubCategoryTitle_keyUpHandler($event) prevent-input-zoom></div><div class=sub-category-value><input type=text ng-model=subCategory.ValueFormattedString ng-focus="tool.onSubCategoryValue_focusInHandler($event, subCategory)" ng-blur="tool.onSubCategoryValue_focusOutHandler($event, subCategory)" restrict-currency prevent-input-zoom></div><div class="sub-category-period budget-period"><div class=dropdown uib-dropdown><button class="btn btn-default dropdown-toggle form-control" type=button uib-dropdown-toggle aria-haspopup=true aria-expanded=true><span>{{subCategory.Period.Title}}</span> <i class=icon-chevron-down aria-hidden=true></i></button><ul class=dropdown-menu><li ng-repeat="period in tool.budgetPeriods"><a class=dropdown-link ng-click="tool.onSetPeriod_clickHandler($event, period, subCategory)">{{period.Title}}</a></li></ul></div></div></div><div class=cat-section-right><div class=sub-category-view-toggle><button class=btn-delete-category modal-activator modal-type=delete_subcategory data-subcategory={{subCategory}} data-mastercatindex={{$parent.$index}} data-catindex={{$index}}></button></div></div></div><!-- Add new sub category row --><div class=sub-category-item><button class=btn-sub-category-add modal-activator modal-type=add_subcategory data-mastercatindex={{$index}} data-mastercategory={{masterCategory}}>Add Category</button></div></div></div></div><!-- // Ideally this would be in the /components/popovers directory --><script type=text/ng-template id=addMasterCategoryPopover.html><button type="button" class="popover-close-button btn btn-default" ng-click="tool.onMasterCategoryCancel_clickHandler($event)" aria-hidden="true">×</button>\n              <div class="container-fluid">\n                <div class="row">\n                  <div class="col-xs-12">\n                    <div class="form-group">\n                      <input type="text" class="form-control"\n                                         placeholder="Add name"\n                                         autofocus=""\n                                         ng-model="tool.newMasterCategory.Title"\n                                         ng-keyup="tool.onMasterCategoryInput_keyUpHandler($event)">\n                    </div>\n                  </div>\n                </div>\n                <div class="row">\n                  <div class="col-xs-6 text-center">\n                    <a class="font-orange" ng-click="tool.onMasterCategoryCancel_clickHandler($event)">CANCEL</a>\n                  </div>\n                  <div class="col-xs-6 text-center">\n                    <button class="btn btn-primary" type="button" ng-click="tool.onMasterCategorySave_clickHandler($event)">OK</button>\n                  </div>\n                </div>\n    \n              </div></script><div class=budget-tool-row><div class="budget-tool-master-category-inner master-category-add"><button class=btn-master-category-add popover-is-open=tool.newMasterCategory.PopoverOpen uib-popover-template="\'addMasterCategoryPopover.html\'" popover-placement=top-left popover-class=add-master-category-popover type=button>Add Master Category</button><div class="tool-print-options-wrap pull-right"><a href=javascript:window.print() class="ui-link budget-print-link arrow-right hide-for-mobile">PRINT</a> <button ng-if=!tool.isLoggedIn data-toggle=modal data-target=#login-modal class="btn btn-primary btn-small ui-link">SAVE</button> <button ng-if=tool.isLoggedIn class="btn btn-primary btn-small ui-link" ng-click=tool.onSave_clickHandler($event)>SAVE</button></div></div></div></div></div></div></print-view><div class="container-fluid budget-tool-container hide-for-print" ng-class="{\'view-list\':(tool.viewState == \'list\'), \'view-grid\':(tool.viewState == \'grid\'), \'breakdown-reduce\':tool.breakdownCollapse}"><div class=budget-items-form-wrap><!-- Budget Breakdown Mobile START--><section class=breakdown-horizontal><div class=budget-breakdown-mobile-container><div class=budget-breakdown-mobile-heading><div class=budget-breakdown-icon-container><img class=budget-breakdown-icon src=/themes/sorted/assets/images/icon-breakdown.png></div><div class=budget-breakdown-mobile-title><p>Budget Breakdown</p></div><div ng-click=tool.onToggleMobileBudget_clickHandler($event) class=budget-breakdown-mobile-toggle ng-class="{\'budget-breakdown-mobile-open\':tool.showMobileBudget}"></div></div><!-- Budget Breakdown Mobile Heading END --><div class=budget-breakdown-mobile-content><div ng-if=tool.showMobileBudget class=budget-graph-wrap><div class=budget-breakdown-chart kendo-chart k-options=tool.chartOptions k-rebind=tool.chartOptions></div><div class=budget-breakdown-readable><div class=budget-breakdown-titles><h3 class=subtotal ng-bind-html="tool.currentBudget.MasterCategoriesTotalFormattedString | currency"></h3><h5 class=subtotal-copy>Total budgeted</h5><p class=subtotal-period ng-bind-html=tool.currentBudget.Income.Period.Title></p></div><div class=budget-breakdown-legend><ul class=breakdown-master-categories><li ng-repeat="masterCategory in tool.currentBudget.MasterCategories"><div class=inner-legend ng-style="{\'background-color\': masterCategory.Color}"></div><div class="legend-label font-medium" ng-bind-html=masterCategory.Title></div><div class="legend-amount font-medium">{{masterCategory.PieValuePercent}}%</div></li></ul></div></div></div></div><!-- Budget Breakdown Mobile Content END --></div><!-- Budget Breakdown Mobile Container END --></section><!-- Budget Breakdown Mobile END --><!-- Budget Tool header START --><div class="budget-view-chooser-container row"><div class="budget-view-copy-container col-xs-3 col-xs-offset-5 col-sm-2 col-sm-offset-6 col-md-offset-5">Budgeted</div><div class="col-xs-4 text-right pull-right"><div class="budget-view-button-container text-left ng-scope"><img class=budget-view-button ng-src=/themes/sorted/standalone/tools/budget-calculator/assets/images/grid.svg ng-class="{\'selected\': (tool.viewState == \'grid\')}" ng-click="tool.onViewToggle_clickHandler($event, \'grid\')" src=/themes/sorted/assets/images/tools/budgeting-tool/grid.svg></div><div class="budget-view-button-container text-left ng-scope"><img class="budget-view-button selected" ng-src=/themes/sorted/standalone/tools/budget-calculator/assets/images/list.svg ng-class="{\'selected\': (tool.viewState == \'list\')}" ng-click="tool.onViewToggle_clickHandler($event, \'list\')" src=/themes/sorted/assets/images/tools/budgeting-tool/list.svg></div></div></div><!-- Budget Tool header END --><div class=budget-tool-rows><!-- NgRepeat a Master Category --><div class=budget-tool-row ng-repeat="masterCategory in tool.budgetData.MasterCategories"><div class=budget-tool-master-category ng-class="{\'master-category-open\':masterCategory.DisplayOpen}"><div class=budget-tool-master-category-inner><div class="master-category-icon pointer" ng-click="tool.onMasterCategory_clickHandler($event, masterCategory)"><img ng-if="masterCategory.Icon != \'\'" ng-src="{{tool.TOOL_ASSETS + masterCategory.Icon}}"><div style="display: flex;\n                              justify-content: center" ng-if="masterCategory.Icon == \'\'"><span style="background-color: {{masterCategory.Color}} !important;\n                                  width: 30px !important;\n                                  height: 30px !important;\n                                  display: inline-block !important;\n                                  border-radius: 50% !important;\n                                  margin-top: 11px !important"></span></div></div><div class=master-category-title modal-activator modal-type=edit_master_category data-mastercategory={{masterCategory}}><input modal-activator modal-type=edit_master_category type=text ng-model=masterCategory.Title readonly></div><div class="master-category-value pointer" ng-click="tool.onMasterCategory_clickHandler($event, masterCategory)"><input type=text ng-model=masterCategory.ValueFormattedString class=pointer readonly onfocus=this.blur()></div><div class="master-category-view-toggle pointer" ng-click="tool.onMasterCategory_clickHandler($event, masterCategory)"></div></div><!-- NgRepeat the Sub categories within this Master Category --><div class=categories-list-items><div ng-repeat="subCategory in masterCategory.SubCategories" class=sub-category-item ng-class="{\'category-state-edit\':subCategory.stateEdit}"><div class=cat-section-left><div class=sub-category-image modal-activator modal-type=add_subcategory data-subcategory={{subCategory}} data-mastercatindex={{$parent.$index}} data-catindex={{$index}} ng-style="{\'background-image\':\'url(./\'+ subCategory.Image+\')\'}"><img class=orange-edit ng-src="{{tool.TOOL_ASSETS + \'assets/images/edit-orange.svg\'}}"></div><div class=sub-category-title><input type=text ng-model=subCategory.Title ng-focus="tool.onSubCategoryTitle_focusInHandler($event, subCategory)" ng-blur="tool.onSubCategoryTitle_focusOutHandler($event, subCategory)" ng-keyup=tool.onSubCategoryTitle_keyUpHandler($event) prevent-input-zoom></div><div class=sub-category-value><input type=text ng-model=subCategory.ValueFormattedString ng-focus="tool.onSubCategoryValue_focusInHandler($event, subCategory)" ng-blur="tool.onSubCategoryValue_focusOutHandler($event, subCategory)" restrict-currency prevent-input-zoom></div><div class="sub-category-period budget-period"><div class=dropdown uib-dropdown><button class="btn btn-default dropdown-toggle form-control" type=button uib-dropdown-toggle aria-haspopup=true aria-expanded=true><span>{{subCategory.Period.Title}}</span> <i class=icon-chevron-down aria-hidden=true></i></button><ul class=dropdown-menu><li ng-repeat="period in tool.budgetPeriods"><a class=dropdown-link ng-click="tool.onSetPeriod_clickHandler($event, period, subCategory)">{{period.Title}}</a></li></ul></div></div></div><div class=cat-section-right><div class=sub-category-view-toggle><img src=/themes/sorted/standalone/tools/budget-calculator/assets/images/trash-grey.svg class=btn-delete-category modal-activator modal-type=delete_subcategory data-subcategory={{subCategory}} data-mastercatindex={{$parent.$index}} data-catindex={{$index}}></div></div></div><!-- Add new sub category row --><div class=sub-category-item><button class=btn-sub-category-add modal-activator modal-type=add_subcategory data-mastercatindex={{$index}} data-mastercategory={{masterCategory}}>Add Category</button></div></div></div></div><!-- // Ideally this would be in the /components/popovers directory --><script type=text/ng-template id=addMasterCategoryPopover.html><button type="button" class="popover-close-button btn btn-default" ng-click="tool.onMasterCategoryCancel_clickHandler($event)" aria-hidden="true">×</button>\n            <div class="container-fluid">\n              <div class="row">\n                <div class="col-xs-12">\n                  <div class="form-group">\n                    <input type="text" class="form-control"\n                            placeholder="Add name" autofocus=""\n                            ng-model="tool.newMasterCategory.Title"\n                            ng-keyup="tool.onMasterCategoryInput_keyUpHandler($event)"\n                            prevent-input-zoom>\n                  </div>\n                </div>\n              </div>\n              <div class="row">\n                <div class="col-xs-6 text-center">\n                  <a class="font-orange" ng-click="tool.onMasterCategoryCancel_clickHandler($event)">CANCEL</a>\n                </div>\n                <div class="col-xs-6 text-center">\n                  <button class="btn btn-primary" type="button" ng-click="tool.onMasterCategorySave_clickHandler($event)">OK</button>\n                </div>\n              </div>\n    \n            </div></script><div class=budget-tool-row><div class="budget-tool-master-category-inner master-category-add"><button class=btn-master-category-add popover-is-open=tool.newMasterCategory.PopoverOpen uib-popover-template="\'addMasterCategoryPopover.html\'" popover-placement=top-left popover-class=add-master-category-popover type=button>Add Master Category</button><div class="tool-print-options-wrap pull-right"><a href=javascript:window.print() class="ui-link budget-print-link arrow-right hide-for-mobile">PRINT</a> <button ng-if=!tool.isLoggedIn data-toggle=modal data-target=#login-modal class="btn btn-primary btn-small ui-link">SAVE</button> <button ng-if=tool.isLoggedIn class="btn btn-primary btn-small ui-link" ng-click=tool.onSave_clickHandler($event)>SAVE</button></div></div></div></div></div><!-- Budget Breakdown - Desktop --><div class="budget-breakdown-wrap breakdown-vertical" id=main-breakdown-vertical><div class=left-bar><button class=btn-toggle-breakdownview ng-click=tool.onBreakdownToggle_clickHandler($event)><div class="icon reduce"><span class=icon-chevron-left></span></div><div class="icon open"><span class=icon-chevron-right></span></div><span class=button-label>Budget Breakdown</span></button></div><div class=budget-graph-wrap><div class=budget-breakdown-chart kendo-chart k-options=tool.chartOptions k-rebind=tool.chartOptions></div><div class=budget-breakdown-readable><div class=budget-breakdown-titles><h3 class=subtotal ng-bind-html="tool.currentBudget.MasterCategoriesTotalFormattedString | currency"></h3><h5 class=subtotal-copy>Total budgeted</h5><p class=subtotal-period ng-bind-html=tool.currentBudget.Income.Period.Title></p></div><div class=budget-breakdown-legend><ul class=breakdown-master-categories><li ng-repeat="masterCategory in tool.currentBudget.MasterCategories"><div class=inner-legend ng-style="{\'background-color\': masterCategory.Color}"></div><div class="legend-label font-medium" ng-bind-html=masterCategory.Title></div><div class="legend-amount font-medium">{{masterCategory.PieValuePercent}}%</div></li></ul></div></div></div></div></div></div>'),e.put("app/welcome/welcome.html",'<intro-header data=welcome.data.Header breadcrumbs=welcome.breadcrumbs></intro-header><p ng-if="!welcome.isLoggedIn || vm.getProfile.getProfile()" class="font-medium login-prompt">Already got a budget? <a class=not-logged-in-link data-toggle=modal data-target=#login-modal>Log in here &gt;</a></p><div class=layout-container><div class=row><div class="budget-amount-form-container col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3"><form name=budgetAmountForm><div class=form-group><label for=amount-to-budget>Amount to budget (income)</label><div class=row><div class=col-sm-8><div class="input-group form-inline-addon form-addon-dollar"><input name=amount-to-budget id=amount-to-budget type=text class="budget-amount form-control" required ng-model=welcome.budget.Cents placeholder=Amount restrict-currency prevent-input-zoom> <span class="help-block hidden">Please enter a valid amount.</span></div></div><div class="col-sm-4 budget-period"><div class=dropdown uib-dropdown><button class="btn btn-default dropdown-toggle form-control modal-only" type=button uib-dropdown-toggle aria-haspopup=true aria-expanded=true><span>{{welcome.budget.Period.Title}}</span> <i class=icon-chevron-down aria-hidden=true></i></button><ul class=dropdown-menu><li ng-repeat="period in welcome.budgetPeriods"><a class=dropdown-link ng-click="welcome.onSetPeriod_clickHandler($event, period)">{{period.Title}}</a></li></ul></div></div></div></div><div class=row><div class="budget-next col-sm-6 col-sm-offset-3"><button class="btn btn-primary form-control" type=submit ng-click=welcome.next()>Next</button></div></div></form></div></div></div><div class="create-a-budget bg-green-gradient _relative"><div class="_full-height-xs-above _relative"><div class=layout-container><div class="row _relative _full-height-xs-above"><div class="layout-col col-sm-4 _relative _full-height-xs-above"><div class="row text-center"><div class="col-xs-10 col-xs-offset-1"><h2>Create a budget that keeps pace with your lifestyle</h2></div></div><div class="row text-center"><div class="col-xs-10 col-xs-offset-1"><p class=font-light>The quick and easy way to keep track of your spending.</p></div></div></div><div class="layout-col col-sm-8 _relative _full-height-xs-above"><div class=device-image-container><img class=img-responsive ng-src={{welcome.TOOL_ASSETS}}assets/images/DEVICES.png></div></div></div></div></div></div>'),e.put("app/components/breadcrumbs/breadcrumbs.html",'<ol class=breadcrumb><li ng-repeat="crumb in breadcrumbs"><a ng-href={{crumb.path}} ng-class="{\'font-orange\': !$last, active: $last}">{{crumb.title}}</a></li></ol>'),e.put("app/components/intro-header/introHeader.html",'<div class=layout-header-small><div class=header-small-container><div class=header-background style="background-image: url({{vm.TOOL_ASSETS}}assets/images/header-background-tools.jpg)"><div class="intro-header-icon-container center-block"><img class=img-responsive ng-src={{vm.TOOL_ASSETS}}assets/images/tools-budgeting-tool.png></div></div><div class=header-small-opacity></div><breadcrumbs ng-if=breadcrumbs breadcrumbs=breadcrumbs></breadcrumbs></div></div><div class="row text-center" ng-if=data.Title><div class="col-xs-8 col-xs-offset-2"><h2>{{data.Title}}</h2></div></div><div class="row text-center" ng-if=data.Content><div class="col-sm-6 col-sm-offset-3 col-md-4 col-md-offset-4"><p class="intro-header-copy font-light">{{data.Content}}</p></div></div>'),e.put("app/components/modals/addEditSubCategoryModal.html",'<div class=add-category-modal><div class=modal-header><button type=button class="modal-close-button btn btn-default" ng-click=$ctrl.onCancel_clickHandler($event) aria-hidden=true>×</button><h4 class=modal-title>{{$ctrl.title}}</h4></div><div class=modal-body><div class=container-fluid><div class=row><div class="col-lg-12 text-center category-image-container"><div class=category-image-wrap ng-if="$ctrl.newCategory.File || $ctrl.isLoggedIn" ng-class="{\'have-image\' : $ctrl.newCategory.File, \'have-not-image\' : !$ctrl.newCategory.File }"><div style="background-image: url(\'{{$ctrl.newCategory.File}}\');\n                  background-position: 50%;\n                  background-size: cover;\n                  background-repeat: no-repeat" ng-if=$ctrl.newCategory.File ng-src={{$ctrl.newCategory.File}} class="drop-image center-block"></div><div ng-if=$ctrl.isLoggedIn class="category-image drop-box" ngf-select ngf-model-invalid=$ctrl.errorFiles ng-model=$ctrl.files ngf-fix-orientation=true accept="\'image/*\'" ngf-max-size=3MB><img ng-if=$ctrl.isLoggedIn class="budget-category-image-upload ng-scope" src=https://sorted.org.nz/themes/sorted/assets/images/tools/budgeting-tool/upload.svg><div ng-if=$ctrl.isUploading class=progress style="width: 200px"><div class=progress-bar role=progressbar aria-valuenow=70 aria-valuemin=0 aria-valuemax=100 style=width:{{$ctrl.uploadProgress}}%><span class=sr-only>70% Complete</span></div></div></div></div><!-- max file upload error --> <span ng-if=$ctrl.errorFiles.$errorMessages.maxSize class=text-danger>Your image must be less than 3 MB</span><div ng-if=$ctrl.isLoggedIn class="text-center font-orange" style="margin-bottom: 10px; cursor: pointer" ngf-select ngf-model-invalid=$ctrl.errorFiles ng-model=$ctrl.files ww ngf-fix-orientation=true accept="\'image/*\'" ngf-max-size=3MB>Edit Photo &gt;</div><span ng-if=!$ctrl.isLoggedIn class="font-small register-prompt">Register for a free account to upload your own image.</span></div><div ng-if=$ctrl.isLoggedIn class=image-modal-spacer></div><div class="col-md-8 col-md-offset-2 category-name-group text-right"><input type=text class="budget-title form-control" ng-model=$ctrl.newCategory.Title ng-keyup=$ctrl.onCategoryName_keyUpHandler($event) placeholder="Name your category" prevent-input-zoom></div></div><div class=row><div class="col-sm-6 col-md-4 col-md-offset-2"><div class="input-group form-inline-addon form-addon-dollar"><input name=amount-to-budget id=amount-to-budget type=text class="budget-amount form-control" required ng-model=$ctrl.budget placeholder=Amount restrict-currency prevent-input-zoom> <span class="help-block hidden">Please enter a valid amount.</span></div></div><div class="col-sm-6 col-md-4 budget-period"><div class=dropdown uib-dropdown><button class="btn btn-default dropdown-toggle form-control modal-only" type=button uib-dropdown-toggle aria-haspopup=true aria-expanded=true><span>{{$ctrl.period.Title}}</span> <i class=icon-chevron-down aria-hidden=true></i></button><ul class=dropdown-menu><li ng-repeat="period in $ctrl.budgetPeriods"><a class=dropdown-link ng-click="$ctrl.onSetPeriod_clickHandler($event, period)">{{period.Title}}</a></li></ul></div></div></div><div class=row><div class="col-sm-12 col-md-offset-2 edit-cat-delete"><span modal-activator ng-if=$ctrl.subcategoryData modal-type=delete_subcategory data-subcategory={{$ctrl.subcategoryData}} data-mastercategory={{$ctrl.mastercategoryData}} data-mastercatindex={{$ctrl.masterCategoryIndex}} data-catindex={{$ctrl.categoryIndex}} class=edit-subcategory-modal-delete-text><span class="fa-stack budget-trash"><i class="fa fa-circle fa-stack-2x" style="color: #b7b8ba"></i> <i class="fa fa-trash fa-stack-1x fa-inverse"></i> </span>Delete category</span></div></div></div></div></div><div class="modal-footer text-center"><div class=row><div class="col-sm-6 modal-cancel-link"><a class=font-orange ng-click=$ctrl.onCancel_clickHandler($event)>CANCEL</a></div><div class="col-sm-6 modal-ok-button text-left"><button class="btn btn-primary btn-xs-fullwidth" type=button ng-click=$ctrl.onOk_clickHandler($event)>OK</button></div></div></div>'),
e.put("app/components/modals/deleteMasterCategoryModal.html",'<div class=budget-header-modal><div class=modal-header><button type=button class="modal-close-button btn btn-default" ng-click=$ctrl.onCancel_clickHandler($event) aria-hidden=true>×</button><h4 class=modal-title>Warning!</h4></div><div class=modal-body>Are you sure you want to delete this category?</div><div class="modal-footer text-center"><div class=row><div class="col-sm-6 modal-cancel-link"><a class=font-orange ng-click=$ctrl.onCancel_clickHandler($event)>CANCEL</a></div><div class="col-sm-6 modal-ok-button text-left"><button class="btn btn-primary btn-xs-fullwidth" type=button ng-click=$ctrl.onDelete_clickHandler($event)>DELETE</button></div></div></div></div>'),e.put("app/components/modals/deleteSubCategoryModal.html",'<div class=budget-header-modal><div class=modal-header><button type=button class="modal-close-button btn btn-default" ng-click=$ctrl.onCancel_clickHandler($event) aria-hidden=true>×</button><h4 class=modal-title>Warning!</h4></div><div class=modal-body>Are you sure you want to delete this category?<br><h4>{{$ctrl.subCategoryTitle}}</h4></div><div class="modal-footer text-center"><div class=row><div class="col-sm-6 modal-cancel-link"><a class=font-orange ng-click=$ctrl.onCancel_clickHandler($event)>CANCEL</a></div><div class="col-sm-6 modal-ok-button text-left"><button class="btn btn-primary btn-xs-fullwidth" type=button ng-click=$ctrl.onDelete_clickHandler($event)>DELETE</button></div></div></div></div>'),e.put("app/components/modals/editBudgetModal.html",'<div class=budget-header-modal><div class=modal-header><button type=button class="modal-close-button btn btn-default" ng-click=$ctrl.onCancel_clickHandler($event) aria-hidden=true>×</button><h4 class=modal-title>Edit Budget</h4></div><div class=modal-body><div class=container-fluid><div class=row><!-- <div class="col-md-3">\n          <div class="profile-picture">\n            <img ng-src="{{$ctrl.TOOL_ASSETS + $ctrl.userProfileData.Profile.ImageSource}}" />\n          </div>\n        </div> --><div class="budget-modal-user-avatar center-block text-center _relative col-md-3"><div class="budget-header-user-avatar center-block text-center _relative profile-picture" style=background-image:url({{$ctrl.userProfileData.Profile.ImageSource}})></div><div class=modal-edit-profile-link><!--<a class="font-orange" ng-click="">EDIT PROFILE <i class="fa fa-chevron-right font-xs"></i> (todo)</a>--></div></div><div class=col-md-6><div class=form-group><label for=budget-title>Budget name:</label><input type=text id=budget-title class="budget-title form-control" autofocus ng-model=$ctrl.budgetCalculator.Income.Title></div></div><div class="col-md-3 budget-period"><label for=budget-period-dropdown>Budgeting period:</label><div class=dropdown uib-dropdown><button class="btn btn-default dropdown-toggle form-control modal-only" id=budget-period-dropdown type=button uib-dropdown-toggle aria-haspopup=true aria-expanded=true><span>{{$ctrl.budgetCalculator.Income.Period.Title}}</span> <i class=icon-chevron-down aria-hidden=true></i></button><ul class=dropdown-menu><li ng-repeat="period in $ctrl.budgetPeriods"><a class=dropdown-link ng-click="$ctrl.onSetBudgetPeriod_clickHandler($event, period)">{{period.Title}}</a></li></ul></div></div></div><div class=row><div class=col-sm-12><label>Income streams:</label></div></div><!-- Loop through the income streams --><div class="row income-stream-group" ng-repeat="stream in $ctrl.budgetCalculator.Income.Streams"><div class="col-md-8 form-group income-stream-name-group"><input type=text class="budget-title form-control" ng-model=stream.Title placeholder="Income source"></div><div class=col-md-3><div class="form-inline-addon form-addon-dollar"><input type=text class="budget-title form-control" ng-model=stream.CentsFormattedString placeholder="Amount to budget" ng-blur="$ctrl.onUpdateStream_blurHandler($event, stream)" restrict-currency></div></div><div class="col-sm-12 col-md-1" ng-if=stream.Removable><button class="btn-income-stream-remove btn-wrap" ng-click="$ctrl.onRemoveIncome_clickHandler($event, stream, $index)"></button><label for=btn-income-stream-remove class=remove-income-label>Remove Income</label></div></div><!-- Add a new stream --><div class=row><div class="col-sm-12 col-md-8 remove-income-container"><button class=btn-income-stream-add ng-click=$ctrl.onAddIncome_clickHandler($event)>Add Income</button></div><div class="col-sm-12 col-md-4 btn-wrap"><h2 class=calculated-income-stream>${{$ctrl.budgetCalculator.Income.TotalFormattedString}}</h2><span class=budget-amount>Available to budget</span></div></div></div><div class="modal-footer text-center"><div class=row><div class="col-sm-6 modal-cancel-link"><a class=font-orange ng-click=$ctrl.onCancel_clickHandler($event)>CANCEL</a></div><div class="col-sm-6 modal-ok-button"><button class="btn btn-primary btn-xs-fullwidth" type=button ng-click=$ctrl.onOk_clickHandler($event)>OK</button></div></div></div></div></div>'),e.put("app/components/modals/editMasterCatModal.html",'<div class=edit-master-cat-modal><div class=modal-header><button type=button class="modal-close-button btn btn-default" ng-click=$ctrl.onCancel_clickHandler($event) aria-hidden=true>×</button><h4 class="modal-title text-center">Edit Master Category</h4></div><div class=modal-body><div class=container-fluid><div class=row><div class=col-md-12><p class=cat-icon-holder><img ng-if="$ctrl.icon != \'\'" class=cat-icon ng-src={{$ctrl.iconSrc}}></p></div></div><div class=row><div class=col-md-12><div class=form-group><input type=text id=budget-title class="budget-title form-control" autofocus ng-model=$ctrl.categoryTitle></div></div></div><div class=row><div class="col-md-12 trash-container"><!--ng-click="$ctrl.onDelete_clickHandler($event)"--> <span modal-activator modal-type=delete_master_category data-mastercategory={{$ctrl.categoryData}}><span class="fa-stack budget-trash"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-trash fa-stack-1x fa-inverse"></i> </span>Delete master category</span></div></div><!--<div class="row">--><!--<div class="col-md-3">--><!--<div class="profile-picture">--><!--</div>--><!--</div>--><!--<div class="col-md-6">--><!--<div class="form-group">--><!--<label for="budget-title">Budget name:</label>--><!--<input type="text" id="budget-title" class="budget-title form-control" autofocus="" ng-model="$ctrl.budgetCalculator.Income.Title">--><!--</div>--><!--</div>--><!--<div class="col-md-3 budget-period">--><!--<label for="budget-period-dropdown">Budgeting period:</label>--><!--<div class="dropdown" uib-dropdown>--><!--<button class="btn btn-default dropdown-toggle form-control"--><!--id="budget-period-dropdown"--><!--type="button"--><!--uib-dropdown-toggle--><!--aria-haspopup="true"--><!--aria-expanded="true"--><!--&gt;<span>{{$ctrl.budgetCalculator.Income.Period.Title}}</span>  <i class="icon-chevron-down" aria-hidden="true"></i></button>--><!--<ul class="dropdown-menu">--><!--<li ng-repeat="period in $ctrl.budgetPeriods">--><!--<a class="dropdown-link" ng-click="$ctrl.onSetBudgetPeriod_clickHandler($event, period)">{{period.Title}}</a>--><!--</li>--><!--</ul>--><!--</div>--><!--</div>--><!--</div>--><!--<div class="row">--><!--<div class="col-sm-12">--><!--<label>Income streams:</label>--><!--</div>--><!--</div>--><!-- Loop through the income streams --><!--<div class="row income-stream-group" ng-repeat="stream in $ctrl.budgetCalculator.Income.Streams">--><!--<div class="col-md-8">--><!--<input type="text" class="budget-title form-control" ng-model="stream.Title" placeholder="Income source">--><!--</div>--><!--<div class="col-md-3">--><!--<input type="text" class="budget-title form-control" ng-model="stream.CentsFormattedString" placeholder="Amount to budget" ng-blur="$ctrl.onUpdateStream_blurHandler($event, stream)" restrict-currency>--><!--</div>--><!--<div class="col-md-1 btn-wrap" ng-if="stream.Removable">--><!--<button class="btn-income-stream-remove" ng-click="$ctrl.onRemoveIncome_clickHandler($event, stream, $index)"></button>--><!--</div>--><!--</div>--><!-- Add a new stream --><!--<div class="row">--><!--<div class="col-sm-12 col-md-8">--><!--<button class="btn-income-stream-add" ng-click="$ctrl.onAddIncome_clickHandler($event)">Add Income</button>--><!--</div>--><!--<div class="col-sm-12 col-md-4">--><!--<h2 class="calculated-income-stream" ng-bind-html="$ctrl.budgetCalculator.Income.TotalFormattedString | currency"></h2>--><!--<span class="budget-amount">Available to budget</span>--><!--</div>--><!--</div>--></div></div><div class="modal-footer text-center"><div class=row><div class="col-sm-6 modal-cancel-link"><a class=font-orange ng-click=$ctrl.onCancel_clickHandler($event)>CANCEL</a></div><div class="col-sm-6 modal-ok-button text-left"><button class="btn btn-primary btn-xs-fullwidth" type=button ng-click=$ctrl.onOk_clickHandler($event)>OK</button></div></div></div></div>'),e.put("app/components/modals/multiBudgetModal.html",'<div class=budget-header-modal><div class=modal-header><button type=button class="modal-close-button btn btn-default" ng-click=$ctrl.onCancel_clickHandler($event) aria-hidden=true>×</button><h4 class=modal-title>Warning!</h4></div><div class=modal-body><div class=row><div class=col-xs-12><p>It looks like you already have a budget saved on Sorted. You can only have one – would you like to overwrite?</p></div></div></div><div class="modal-footer text-center"><div class=row><div class="col-sm-6 text-center"><button class="btn btn-primary form-control" type=button ng-click=$ctrl.onCancel_clickHandler()>KEEP EXISTING</button><p class="overwrite-confirm-button-copy font-sm ng-binding">Keep my existing budget from {{$ctrl.editDate | date:\'fullDate\'}}</p><p></p></div><div class="col-sm-6 text-center"><button class="btn btn-primary form-control" type=button ng-click=$ctrl.onOverWrite_clickHandler()>OVERWRITE WITH NEW</button><p class="overwrite-confirm-button-copy font-sm"><span class=font-medium>Overwrite</span> my existing budget</p></div></div></div></div>'),e.put("app/components/modals/timeoutModal.html",'<div class=budget-header-modal><div class=modal-header><button type=button class="modal-close-button btn btn-default" ng-click=$ctrl.onCancel_clickHandler($event) aria-hidden=true>×</button><h4 class=modal-title>Warning!</h4></div><div class=modal-body><p>Hi there,</p><p>You\'re working on a budget that hasn\'t been saved yet. Log in or register for a free Sorted account to save your progress.</p></div><div class="modal-footer text-center"><div class=row><div class="col-md-4 modal-cancel-link"><a class=font-orange ng-click=$ctrl.onCancel_clickHandler($event)>CANCEL</a></div><div class="col-md-4 modal-ok-button text-center timeout-ok"><button class="btn btn-primary btn-xs-fullwidth" type=button data-toggle=modal data-target=#login-modal ng-click=$ctrl.onCancel_clickHandler($event)>LOGIN</button></div><div class="col-md-4 modal-cancel-link text-left"><a class=font-orange data-toggle=modal data-target=#signup-modal ng-click=$ctrl.onCancel_clickHandler($event)>SIGN UP</a></div></div></div></div>'),e.put("app/components/toolHeader/toolHeader.html",'<div class=layout-header-small><div class=header-small-container><div class=header-background style="background-image: url({{vm.TOOL_ASSETS}}assets/images/header-background-tools.jpg)"><div class="intro-header-icon-container center-block" ng-if="data != undefined"><img class=img-responsive ng-src={{vm.TOOL_ASSETS}}assets/images/tools-budgeting-tool.png></div></div><div class=header-small-opacity></div><breadcrumbs ng-if=breadcrumbs breadcrumbs=breadcrumbs></breadcrumbs></div></div><div class="container-fluid author-details-container"><div class="row budget-header"><div class="logo-container print-only"><img ng-src={{vm.TOOL_ASSETS}}assets/images/tools-budgeting-tool.png></div><div class="col-md-2 profile-picture-wrap"><div class="profile-picture center-block" style="background: url({{vm.imagepath}});\n            width: 150px;\n            height: 150px;\n            border-radius: 50%;\n            background-position: 50%;\n            background-size: cover"></div></div><div class="col-md-4 tool-title-wrap" modal-activator modal-type=edit_budget><h1 class=prompt-editable ng-bind-html=budgetdata.Income.Title></h1><p class=budget-period ng-bind-html=budgetdata.Income.Period.Title></p></div><div class="col-md-3 tool-budget-amount-wrap" modal-activator modal-type=edit_budget><h2 class=heavy ng-bind-html="budgetdata.Income.LeftToBudget | currency" ng-class="{\'budget-exceeded\' : (budgetdata.Income.LeftToBudget < 0) }"></h2><p class=budget-amount-copy>Available to budget</p></div><div class="col-md-3 tool-print-options-wrap"><div class=options-row><a href=javascript:window.print() class="ui-link budget-print-link arrow-right hide-for-mobile">PRINT</a> <button ng-if=!vm.isLoggedIn() data-toggle=modal data-target=#login-modal class="btn btn-primary btn-small ui-link">SAVE</button> <button ng-if=vm.isLoggedIn() class="btn btn-primary btn-small ui-link" ng-click=vm.onSave_clickHandler($event)>SAVE</button></div><div class=options-row><a href=/how-these-calculators-work#budgeting-tool target=_blank id=how-this-tool-works class=font-book>How this tool works</a></div></div></div></div>')}]);
//# sourceMappingURL=../maps/scripts/app.js.map
